{"version":3,"sources":["actions/index.js","utils/index.js","components/MapContainer.js","components/PageMapContainer.js","components/ContributorInfo.js","components/CenterMarker.js","components/MessageContributorInfo.js","components/ContDistribution.js","components/ChoroplethMap.js","components/YearLegend.js","components/MessageTopInfo.js","stylesheets/mixins.js","stylesheets/components.js","components/InterestingPOIs.js","components/TitleHeader.js","components/ContributorsGraph.js","components/TimelineScroller.js","components/CholoplethLegend.js","components/KoreanLegend.js","components/IndividualInfo.js","constants/defaults.js","components/TextVisualization.js","components/TextVisualizationResponses.js","components/UserResponse.js","components/SelectedResponseViewer.js","components/NumberContributionLegend.js","components/sections/Intro.js","components/sections/SectionFirst.js","components/sections/SectionSecond.js","components/sections/SectionThird.js","components/sections/SectionFourth.js","components/sections/SectionFifth.js","components/sections/SectionOddPOIs.js","components/sections/SectionText.js","pages/Home.js","App.js","reducers/index.js","reducers/main.js","index.js"],"names":["changeOsmUserHistories","osmUserHistories","type","payload","changeSelectedOsmUserResponse","selectedOsmUserResponse","addTextCategorySelected","id","textCategoryInfo","changeTextVisualization","textVisualization","initGraphScene","params","nkTile","legend","currentFeature","timelineUI","zoom","center","graphMode","titleHeader","changeGraphKorean","cholopleth","choloplethMode","currentIndividual","changeWorldMapIndividual","individual","changeMapLoaded","mapLoaded","numberWithDelimiter","number","delimiter","separator","parts","toString","split","replace","join","e","randomBetween","low","high","diff","Math","random","MapContainer","window","mapboxgl","accessToken","this","map","Map","container","refsMapContainer","style","on","handleStyleLoad","bind","handleMoveEnd","handleRender","addSource","tiles","addLayer","property","stops","addWorldMap","resize","props","dispatch","url","prevProps","currentTimeStamp","osmUserHistoriesIdx","nkTileVisibility","setLayoutProperty","_","isNull","stop","flyTo","isUndefined","getLayer","removeLayer","removeSource","updateCurrentFeature","updateCurrentCholopleth","setFilter","updateOsmUserHistory","osmUserHistory","feature4326","toWgs84","features","proj4","bbox","turf","buffered","buffer","bboxPolygon","finalBbox","data","getSource","setData","fitBounds","padding","top","bottom","left","right","choloplethVisibility","currentCountryJSON","country_counts","country_analysis_all","country_analysis_top_20","country_analysis_top_5","updateCurrentCountryJSON","expression","colorScale","d3","domain","range","extent","cc","count","finalDomain","each","push","world_id","setPaintProperty","console","log","feature","filter","geometry","coordinates","zoomInData","delay","nextNum","length","windowHeight","ref","c","className","height","Component","connect","state","windowWidth","currentSeq","isFirstTransition","PageMapContainer","refsPageMapContainer","interactive","source","paint","newProps","Fragment","React","ContributorInfo","osm_user","moment","unix","osm_timestamp","format","rank","CenterMarker","name","MessageContributorInfo","countryCounts","sortedCounts","sortBy","reverse","splicedCounts","sc","splice","sp","i","nameKo","find","worldData","wd","name_ko","nameEn","name_en","topThreeCountries","getTopThreeCountries","width","allCount","all_count","total_contribution_count","key","ChoroplethMap","HIST","ContDistribution","d3Render","xDomain","first","last","yDomain","h","value","xScale","yScale","clamp","svg","svgContainer","selectAll","remove","lineDraw","x","d","y","append","attr","xAxis","enter","text","children","osm_id","val","backgroundColor","Number","toFixed","YearLegend","yearScale","opacity","MessageTopInfo","SectionContainer","styled","section","Gutter","div","Sticky","NonSticky","mixins","Box","InterestingPOIsContainer","POIBox","TitleArea","Label","h4","Value","Date","Disclaimer","InterestingPOIs","op","HeaderContainer","TitleHeader","ContributorsGraphBox","Title","Tooltip","ToolTipLabelArea","ToolTipLabel","ToolTipValue","ContributorsGraph","margin","refGraph","createRef","currentHover","simulation","osmUsersDataStats","stats","osm_users","force","strength","tick","current","initSimulation","xAxisFunction","g","call","ticks","tickFormat","LN10","abs","round","tickSizeOuter","_this","circleGraph","radius","setState","cx","cy","transition","circleColor","setCircleColor","korean","prevState","d3Init","d3Update","floor","korean_pct","show","scale","Container","RightStat","p","Timeline","Line","color","TimelineScroller","timeScale","scaleLinear","CholoplethLegend","result","LegendBox","RedCircle","KoreanLegend","Area","SmallSize","span","CloseButton","a","IndividualInfo","worldIds","country","worldId","label","world_data","w","top5Countries","getTop5Countries","onClick","handleClick","href","DEFAULT_STATE","osmUsers","responseCategories","selectedTextCategory","CATEGORIES_COLORS","SUBCATEGORY_SELECT","Bar","CategoryLink","UnCategoryLink","ArrowArea","TextVisualization","axios","all","get","then","spread","response","success","response_categories","subCategories","groupBy","subcategory_id","rc","categories","handleAddTextCategory","category_name","src","process","alt","GridBox","Main","TextVisualizationResponses","fontSizeScale","lineHeightScale","ou","fontSize","lineHeight","ceil","TextSpan","RespArea","UserResponse","responses","selected","category_id","resp","RespContainer","DataInfoContainer","CategorySpan","RespInfoArea","ContributorInfoArea","SelectedResponseViewer","intervalId","document","body","overflow","loadOsmUserSampleData","histories","catch","error","respCategories","uniq","compact","respCategory","osmHistory","selectedColorCategories","getSelectedColorCategories","handleClose","r","bgColor","scc","properties","Circle","NumberContributionLegend","SubtitleKo","IntroContainer","TitleContainer","H1","h1","SubParagraph","DateBox","Prompt","Intro","viewBox","enableBackground","fill","SectionFirst","SecondContainer","SectionSecond","SectionThirdContainer","GradientSticky","StickyGraphArea","SectionThird","graphHeight","graphWidth","SectionFourthContainer","StickyBottomGraphContainer","graphStickyTop","SectionFourth","SectionFifthContainer","NonStickyFinal","MethodologyTitle","MethodologyPG","SectionFifth","SectionOddPOIs","interestingPOIs2","shuffle","interestingPOIs","interestingPOI","SectionTextContainer","SectionText","zIndex","Home","introZoomLevelScale","timelineZoomLevelScale","worldMapZoomLevelScale","overflowY","loadData","scroller","scrollama","setup","step","offset","order","progress","onStepEnter","handleStepEnter","onStepProgress","throttle","handleStepProgress","onStepExit","handleStepExit","element","dataset","actionName","changeEmptyMap","changeChronicleMap","poi","iPoi","poiId","initWorldMap","direction","App","addEventListener","resizeHandler","dimension","innerWidth","innerHeight","BrowserRouter","Route","path","component","createStore","action","render","store","AppState","getElementById"],"mappings":"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","file":"static/js/main.d4c83301.chunk.js","sourcesContent":["\n\nexport const reset = () => {\n  return {\n    type: 'RESET',\n    payload: {}\n  }\n}\n\nexport const changeOsmUsersDataStats = (osmUsersDataStats) => {\n  return {\n    type: 'CHANGE_OSM_USERS_DATA_STATS',\n    payload: {\n      osmUsersDataStats: osmUsersDataStats\n    }\n  }\n}\n\nexport const removeAllTextCategories = () => {\n  return {\n    type: \"REMOVE_ALL_TEXT_CATEGORIES\",\n    payload: {\n      \n    }\n  }\n}\nexport const changeOsmUserHistories = (osmUserHistories) => {\n  return {\n    type: 'CHANGE_OSM_USER_HISTORIES',\n    payload: {\n      osmUserHistories: osmUserHistories\n    }\n  }\n}\n\nexport const changeOsmUserHistoriesIdx = (osmUserHistoriesIdx) => {\n  return {\n    type: 'CHANGE_OSM_USER_HISTORIES_IDX',\n    payload: {\n      osmUserHistoriesIdx: osmUserHistoriesIdx\n    }\n  }\n}\n\n\nexport const changeSelectedOsmUserResponse = (selectedOsmUserResponse) => {\n  return {\n    type: 'CHANGE_SELECTED_OSM_USER_RESPONSE',\n    payload: {\n      selectedOsmUserResponse: selectedOsmUserResponse\n    }\n  }\n}\n\n// export const \nexport const changeOsmUserReponseData = (osmUsers, responseCategories) => {\n  return {\n    type: 'CHANGE_OSM_USER_RESPONSE_DATA',\n    payload: {\n      osmUsers: osmUsers,\n      responseCategories: responseCategories\n    }\n  }\n}\n\n\nexport const addTextCategorySelected = (id, textCategoryInfo) => {\n  return {\n    type: 'ADD_TEXT_CATEGORY',\n    payload: {\n      id: id,\n      textCategoryInfo: textCategoryInfo\n    }\n  }\n}\nexport const removeTextCategorySelected = (id) => {\n  return {\n    type: 'REMOVE_TEXT_CATEGORY',\n    payload: {\n      id: id\n    }\n  }\n}\n\n\nexport const changeTextVisualization = (textVisualization) => {\n  return {\n    type: 'CHANGE_TEXT_VISUALIZATION',\n    payload: {\n      textVisualization: textVisualization\n    }\n  }\n}\n\n\nexport const changeIntro = (params) => {\n  return {\n    type: 'CHANGE_INTRO',\n    payload: {\n      nkTile: false,\n      zoom: params.zoom,\n      center: [127.09741740583831, 40.395224876339796],\n      timelineUI: false,\n      currentTimeStamp: 0,\n      legend: false,\n      titleHeader: false,\n      currentFeature: null\n    }\n  }\n}\n\nexport const changeEmptyMap = (params) => {\n  return {\n    type: 'CHANGE_EMPTY_MAP',\n    payload: {\n      nkTile: false,\n      zoom: params.zoom,\n      center: [127.09741740583831, 40.395224876339796],\n      timelineUI: false,\n      currentTimeStamp: 0,\n      legend: false,\n      titleHeader: true,\n      currentFeature: null\n    }\n  }\n};\n\nexport const wrapupChronicleMap = () => {\n  return {\n    type: 'WRAPUP_CHRONICLE_MAP',\n    payload: {\n      timelineUI: false,\n      currentTimeStamp : 1539016223,\n      legend: false,\n      titleHeader: true\n    }\n  }\n}\n\nexport const changeChronicleMap = (params) => {\n  return {\n    type: 'CHANGE_CHRONICLE_MAP',\n    payload: {\n      nkTile: true,\n      zoom: params.zoom,\n      center: [127.31301436214687, 40.48099092278639],\n      currentFeature: null,\n      timelineUI: true,\n      legend: true,\n      titleHeader: true\n    }\n  }\n};\n\nexport const changeInterestingPOIs = () => {\n  return {\n    type: 'CHANGE_INTERESTING_POIS',\n    payload: {\n      nkTile: true,\n      titleHeader: true\n    }\n  }\n}\n\nexport const initGraphScene = (params) => {\n  return {\n    type: 'INIT_GRAPH_SCENE',\n    payload: {\n      nkTile: true,\n      legend : false,\n      currentFeature : null,\n      timelineUI: false,\n      zoom: params.zoom,\n      center: [127.31301436214687, 40.48099092278639],\n      graphMode: \"all\",\n      titleHeader: true\n    }\n  }\n};\n\nexport const changeGraphKorean = (params) => {\n  return {\n    type: 'CHANGE_GRAPH_KOREAN',\n    payload: {\n      nkTile : true,\n      graphMode: \"korean\",\n      zoom: params.zoom,\n      center: [127.31301436214687, 40.48099092278639],\n      cholopleth: false,\n      choloplethMode: \"all\", //top20, top5, individual\n      currentIndividual: null,\n      currentFeature: null,\n      titleHeader: true\n    }\n  }\n};\n\nexport const initWorldMap = (params) => {\n  return {\n    type: 'INIT_WORLD_MAP',\n    payload: {\n      nkTile: false,\n      cholopleth: true,\n      choloplethMode: \"all\", //top20, top5, individual\n      currentIndividual: null,\n      currentFeature: null,\n      titleHeader: true,\n      legend: false,\n      zoom : params.zoom,\n      center: [152.4583090179674, 18.892423140497797]\n    }\n  }\n};\n\nexport const changeWorldMapHeavyContributor = () => {\n  return {\n    type: 'CHANGE_WORLD_MAP_HEAVY_CONTRIBUTOR',\n    payload: {\n      cholopleth: true,\n      choloplethMode: \"top20\", //top20, top5, individual\n      currentIndividual: null,\n      currentFeature: null,\n      legend: false,\n      textVisualization: false\n    }\n  }\n};\n\nexport const changeWorldMapHeaviestContributor = () => {\n  return {\n    type: 'CHANGE_WORLD_MAP_HEAVIEST_CONTRIBUTOR',\n    payload: {\n      cholopleth: true,\n      choloplethMode: \"top5\", //top20, top5, individual\n      currentIndividual: null,\n      currentFeature: null,\n      legend: false,\n      textVisualization: false\n    }\n  }\n};\n\nexport const changeWorldMapIndividual = (individual) => {\n  return {\n    type: 'CHANGE_WORLD_MAP_INDIVIDUAL',\n    payload: {\n      cholopleth: true,\n      currentIndividual: individual,\n      currentFeature: null,\n      legend: false,\n      textVisualization: false\n    }\n  }\n};\n\nexport const windowResize = (dimension) => {\n  return {\n    type: 'WINDOW_RESIZE',\n    payload: {\n      windowWidth: dimension.width,\n      windowHeight: dimension.height\n    }\n  }\n}\n\nexport const changeMapLoaded = (mapLoaded) => {\n  return {\n    type: 'CHANGE_MAP_LOADED',\n    payload: {\n      mapLoaded: mapLoaded\n    }\n  }\n}\n\nexport const changeCurrentSeq = (currentSeq) => {\n  return {\n    type: 'CHANGE_CURRENT_SEQ',\n    payload: {\n      currentSeq: currentSeq\n    }\n  }\n}\n\nexport const changeCurrentFeature = (currentFeature) => {\n  return {\n    type: 'CHANGE_CURRENT_FEATURE',\n    payload: {\n      currentFeature: currentFeature,\n      timelineUI: false,\n      currentTimeStamp: 1539016223,\n      legend: true,\n      titleHeader: true\n    }\n  }\n}\n\nexport const changeCurrentTimeStamp = (currentTimeStamp) => {\n  return {\n    type: 'CHANGE_CURRENT_TIMESTAMP',\n    payload: {\n      currentTimeStamp: currentTimeStamp\n    }\n  }\n}\n\nexport const changeDataLoaded = (dataLoaded) => {\n  return {\n    type: 'CHANGE_DATA_LOADED',\n    payload: {\n      dataLoaded: dataLoaded\n    }\n  }\n}","import _ from 'lodash';\n\n\nexport const constrain = (amt, low, high) => {\n  return (amt < low) ? low : ((amt > high) ? high : amt);\n}\n\n\n\n\nexport const numberWithDelimiter = (number, delimiter, separator) => {\n  try {\n    delimiter = delimiter || \",\";\n    separator = separator || \".\";\n    \n    var parts = number.toString().split('.');\n    parts[0] = parts[0].replace(/(\\d)(?=(\\d\\d\\d)+(?!\\d))/g, \"$1\" + delimiter);\n    return parts.join(separator);\n  } catch(e) {\n    return number\n  }\n};\n\nexport const getMetaContent = (name) => {\n  var metas = document.getElementsByTagName('meta');\n  let result = \"\"\n  _.each(metas, (meta) => {\n    if (meta.getAttribute(\"name\") === name) {\n      result = meta.getAttribute(\"content\");\n    }\n  });\n\n  return result;\n}\n\n\n\nexport const randomBetween = (low, high) => {\n  if (low >= high) return low;\n  var diff = high - low;\n  return Math.random() * diff + low;\n};\n\nexport const map = (value, start1,  stop1, start2,  stop2) => {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { changeMapLoaded, changeOsmUserHistoriesIdx } from '../actions';\nimport { toWgs84 }  from 'reproject';\nimport proj4 from 'proj4';\nimport turf from 'turf';\nimport { randomBetween } from '../utils';\nimport country_analysis_all from '../constants/country_analysis_all.json';\nimport country_analysis_top_20 from '../constants/country_analysis_top_20.json';\nimport country_analysis_top_5 from '../constants/country_analysis_top_5.json';\nimport * as d3 from 'd3';\nimport _ from 'lodash';\n\nclass MapContainer extends Component {\n\n  componentDidMount() {\n    window.mapboxgl.accessToken = 'pk.eyJ1Ijoic2Vuc2VhYmxlIiwiYSI6ImxSNC1wc28ifQ.hst-boAjFCngpjzrbXrShw';\n\n    this.map = new window.mapboxgl.Map({\n      container: this.refsMapContainer,\n      style: 'mapbox://styles/senseable/cjqd080el9i9y2rl7aarmzsbu',\n      zoom: 6.2,\n      // minZoom: 4,\n      center: [127.1205757172753, 38.76675314095931],\n      // interactive: false\n\n    });\n\n\n    window.map = this.map;\n    this.map.on('style.load', this.handleStyleLoad.bind(this));\n    this.map.on('moveend', this.handleMoveEnd.bind(this));\n    this.map.on('styledata', this.handleRender.bind(this));\n    \n    \n  }\n\n  handleRender(e){\n  }\n  \n  handleStyleLoad(e) {\n  \n    this.map.addSource('nk-line', {\n      type: 'vector',\n      tiles: ['https://tilesnew.wonyoung.so/services/vector-tiles/nk_osm_line/{z}/{x}/{y}.pbf']\n    })\n\n    this.map.addSource('nk-polygon', {\n      type: 'vector',\n      tiles: ['https://tilesnew.wonyoung.so/services/vector-tiles/nk_osm_polygon/{z}/{x}/{y}.pbf']\n    })\n  \n    this.map.addSource('nk-point', {\n      type: 'vector',\n      tiles: ['https://tilesnew.wonyoung.so/services/vector-tiles/nk_osm_point/{z}/{x}/{y}.pbf;']\n    })\n    \n    this.map.addLayer({\n      \"id\": \"nk-line-layer\",\n      \"source\": \"nk-line\",\n      \"source-layer\": \"nk_osm_line_4326\",\n      \"type\": \"line\",\n      \"layout\": {\n        'visibility': 'none'\n      },\n      \"paint\": {\n        'line-opacity': 0.25,\n        'line-color':  {\n          property: 't',\n          stops: [\n            [1184972887, \"#ffffcc\"],\n            [1346511620, \"#d6efc2\"],\n            [1360958163, \"#acdeb7\"],\n            [1378200802, \"#81ceba\"],\n            [1395305792, \"#56bec1\"],\n            [1438380051, \"#3caac2\"],\n            [1479834657, \"#3391bc\"],\n            [1502367226, \"#2b77b4\"],\n            [1510168743, \"#2855a4\"],\n            [1516131630, \"#253494\"]\n          ]\n        }\n      },\n      \"filter\": [\"<\", 't', 1384972887]\n    }, 'place-city-sm');\n\n    this.map.addLayer({\n      \"id\": \"nk-polygon-layer\",\n      \"source\": \"nk-polygon\",\n      \"source-layer\": \"nk_osm_polygon_4326\",\n      \"type\": \"fill\",\n      \"layout\": {\n        'visibility': 'none'\n      },\n      \"paint\": {\n        'fill-opacity': 0.5,\n        'fill-color':  {\n          property: 't',\n          stops: [\n            [1184972887, \"#ffffcc\"],\n            [1346511620, \"#d6efc2\"],\n            [1360958163, \"#acdeb7\"],\n            [1378200802, \"#81ceba\"],\n            [1395305792, \"#56bec1\"],\n            [1438380051, \"#3caac2\"],\n            [1479834657, \"#3391bc\"],\n            [1502367226, \"#2b77b4\"],\n            [1510168743, \"#2855a4\"],\n            [1516131630, \"#253494\"]\n          ]\n        }\n      },\n      \"filter\": [\"<\", 't', 1384972887]\n    }, 'place-city-sm');\n\n    this.map.addLayer({\n      \"id\": \"nk-point-layer\",\n      \"source\": \"nk-point\",\n      \"source-layer\": \"nk_osm_point_4326\",\n      \"type\": \"circle\",\n      \"layout\": {\n        'visibility': 'none'\n      },\n      \"paint\": {\n        'circle-radius': 2,\n        'circle-color':  {\n          property: 't',\n          stops: [\n            [1184972887, \"#ffffcc\"],\n            [1346511620, \"#d6efc2\"],\n            [1360958163, \"#acdeb7\"],\n            [1378200802, \"#81ceba\"],\n            [1395305792, \"#56bec1\"],\n            [1438380051, \"#3caac2\"],\n            [1479834657, \"#3391bc\"],\n            [1502367226, \"#2b77b4\"],\n            [1510168743, \"#2855a4\"],\n            [1516131630, \"#253494\"]\n          ]\n        }\n      },\n      \"filter\": [\"<\", 't', 1384972887]\n    }, 'place-city-sm');\n\n    this.addWorldMap();\n    this.map.resize();\n\n    this.props.dispatch(changeMapLoaded(true));\n  }\n\n  addWorldMap(){\n    this.map.addSource(\"world-map-source\", {\n      type: 'vector',\n      url: 'mapbox://senseable.8x6k6499'\n    });\n\n    this.map.addLayer({\n      \"id\": \"world-map-layer\",\n      \"source\": \"world-map-source\",\n      \"source-layer\": \"world_assoc-c3znvj\",\n      \"type\": \"fill\",\n      \"layout\": {\n        'visibility': 'none'\n      },\n      \"paint\": {\n        'fill-opacity': 0.7,\n        'fill-color': '#FFFFFF'\n      }\n    }, 'waterway-label');\n\n    this.map.addLayer({\n      \"id\": \"world-map-line-layer\",\n      \"source\": \"world-map-source\",\n      \"source-layer\": \"world_assoc-c3znvj\",\n      \"type\": \"line\",\n      \"layout\": {\n        'visibility': 'none'\n      },\n      \"paint\": {\n        'line-opacity': 0.2,\n        'line-color': '#BBB',\n        'line-width': 1\n      }\n    }, 'waterway-label');\n\n  }\n\n\n  componentDidUpdate(prevProps){\n    let { nkTile, cholopleth, currentFeature, zoom, center, currentTimeStamp, currentIndividual, choloplethMode, osmUserHistories, osmUserHistoriesIdx, mapLoaded } = this.props;\n\n\n    let nkTileVisibility = nkTile ? 'visible' : 'none';\n\n    if (mapLoaded){\n      this.map.resize();\n  \n      this.map.setLayoutProperty('nk-line-layer', 'visibility', nkTileVisibility);\n      this.map.setLayoutProperty('nk-polygon-layer', 'visibility', nkTileVisibility);\n      this.map.setLayoutProperty('nk-point-layer', 'visibility', nkTileVisibility);\n  \n      if (_.isNull(currentFeature)) {\n        this.map.stop();\n        this.map.flyTo({ center: center, zoom: zoom });\n        if (!_.isUndefined(this.map.getLayer(\"currentFeature-point\"))) {\n  \n          this.map.removeLayer(\"currentFeature-point\");\n          this.map.removeLayer(\"currentFeature-line\");\n          this.map.removeLayer(\"currentFeature-fill\");\n          this.map.removeSource(\"currentFeature\");\n        }\n      } else {\n        this.updateCurrentFeature(currentFeature);\n      }\n  \n      \n      this.updateCurrentCholopleth(cholopleth, choloplethMode, currentIndividual);\n  \n      this.map.setFilter('nk-line-layer', [\"<\", \"t\", currentTimeStamp]);\n      this.map.setFilter('nk-polygon-layer', [\"<\", \"t\", currentTimeStamp]);\n      this.map.setFilter('nk-point-layer', [\"<\", \"t\", currentTimeStamp]);  \n\n      if (_.isNull(prevProps.selectedOsmUserResponse) && !_.isNull(this.props.selectedOsmUserResponse)){\n        \n        this.map.stop();\n        this.map.flyTo({ center: [127.1205757172753, 38.76675314095931], zoom: 6.2 });\n      \n      } else if (!_.isNull(prevProps.selectedOsmUserResponse) && _.isNull(this.props.selectedOsmUserResponse)) {\n\n        this.map.stop();\n        this.map.flyTo({ center: center, zoom: zoom });\n      }\n\n\n      if (!_.isNull(osmUserHistories)) {\n        if (!_.isUndefined(osmUserHistories[osmUserHistoriesIdx])){\n          this.updateOsmUserHistory(osmUserHistories[osmUserHistoriesIdx]);\n        }\n      } else {\n        if (!_.isUndefined(this.map.getLayer('osm-user-history'))){\n          this.map.removeLayer('osm-user-history');\n          this.map.removeLayer('osm-user-history-circle');\n          this.map.removeSource('osm-user-history-source');\n\n          this.map.removeLayer('osm-user-history-bbox');\n          this.map.removeSource('osm-user-history-bbox-source');\n        }\n      }\n    }\n\n\n\n    \n  }\n\n  updateOsmUserHistory(osmUserHistory){\n\n    \n    let feature4326 = toWgs84(osmUserHistory.features[0], proj4('EPSG:3857'));\n\n    let bbox = turf.bbox(feature4326);\n    let buffered = turf.buffer(turf.bboxPolygon(bbox), 1, \"miles\");\n    let finalBbox = turf.bbox(buffered)\n\n\n    // if (window.map.isStyleLoaded()){\n\n      if (_.isUndefined(this.map.getLayer('osm-user-history'))){\n        // var bboxPolygon = turf.bboxPolygon(bbox);\n        // console.log(bboxPolygon);\n\n        this.map.addSource(\"osm-user-history-bbox-source\", {\n          type: 'geojson',\n          data: turf.bboxPolygon(finalBbox)\n        });\n\n        this.map.addLayer({\n          'id': 'osm-user-history-bbox',\n          'type': 'line',\n          'source': \"osm-user-history-bbox-source\",\n          'layout': {},\n          'paint': {\n            'line-color': '#FF0000',\n            'line-opacity': 0.8\n          }\n        });\n\n        this.map.addSource(\"osm-user-history-source\", {\n          type: 'geojson',\n          data: feature4326\n        });\n\n        this.map.addLayer({\n          'id': 'osm-user-history',\n          'type': 'line',\n          'source': \"osm-user-history-source\",\n          'layout': {},\n          'paint': {\n            'line-color': '#FF0000',\n            'line-opacity': 0.8\n          },\n          \"filter\": [\"in\", \"$type\", \"Polygon\", \"LineString\"]\n        });\n\n        this.map.addLayer({\n          'id': 'osm-user-history-circle',\n          'type': 'circle',\n          'source': \"osm-user-history-source\",\n          'layout': {},\n          'paint': {\n            'circle-color': '#FF0000',\n            'circle-opacity': 0.8\n          },\n          \"filter\": [\"==\", \"$type\", \"Point\"]\n        });\n\n      } else {\n\n        this.map.getSource('osm-user-history-source').setData(feature4326);\n        this.map.getSource('osm-user-history-bbox-source').setData(turf.bboxPolygon(finalBbox));\n        \n        \n      }\n\n    // }\n    \n\n    try {\n\n      this.map.stop();\n      this.map.fitBounds([[finalBbox[0], finalBbox[1]],\n      [finalBbox[2], finalBbox[3]]], {\n          padding: { top: 100, bottom: 100, left: 100, right: 100 }\n        }, { osmUserHistory: true });\n    } catch (e) {\n      this.handleMoveEnd({ osmUserHistory: true });\n    }\n  }\n\n  updateCurrentCholopleth(cholopleth, choloplethMode, currentIndividual) {\n\n    // turning on and off \n    let choloplethVisibility = cholopleth ? 'visible' : 'none';\n\n    this.map.setLayoutProperty(\"world-map-layer\", 'visibility', choloplethVisibility);\n    this.map.setLayoutProperty(\"world-map-line-layer\", 'visibility', choloplethVisibility);\n\n    let currentCountryJSON = null;\n\n    if (!_.isNull(currentIndividual)) {\n      // debugger;\n      currentCountryJSON = currentIndividual;\n\n    } else if (choloplethMode === \"all\") {\n\n      currentCountryJSON = { \n        country_counts: country_analysis_all \n      };\n\n    } else if (choloplethMode === \"top20\"){\n      \n      currentCountryJSON = {\n        country_counts: country_analysis_top_20\n      };\n\n    } else { // top5\n      \n      currentCountryJSON = {\n        country_counts: country_analysis_top_5\n      };\n\n    }\n\n    if (!_.isNull(currentCountryJSON) && cholopleth) {\n      this.updateCurrentCountryJSON(currentCountryJSON);\n    }\n\n  }\n\n  updateCurrentCountryJSON(currentCountryJSON) {\n    var expression = [\"match\", [\"get\", \"py_id\"]];\n\n    let colorScale = d3.scaleLinear()\n      .domain([1184972887,\n        1346511620,\n        1360958163,\n        1378200802,\n        1395305792,\n        1438380051,\n        1479834657,\n        1502367226,\n        1510168743,\n        1516131630])\n      .range([\"#ffffcc\",\n        \"#d6efc2\",\n        \"#acdeb7\",\n        \"#81ceba\",\n        \"#56bec1\",\n        \"#3caac2\",\n        \"#3391bc\",\n        \"#2b77b4\",\n        \"#2855a4\",\n        \"#253494\"])\n\n    var extent = [0, d3.max(currentCountryJSON.country_counts, cc => {\n      return cc.count;\n    })];\n\n\n    var finalDomain = [extent[0],\n    extent[0] + (extent[1] - extent[0]) / 9 * 1,\n    extent[0] + (extent[1] - extent[0]) / 9 * 2,\n    extent[0] + (extent[1] - extent[0]) / 9 * 3,\n    extent[0] + (extent[1] - extent[0]) / 9 * 4,\n    extent[0] + (extent[1] - extent[0]) / 9 * 5,\n    extent[0] + (extent[1] - extent[0]) / 9 * 6,\n    extent[0] + (extent[1] - extent[0]) / 9 * 7,\n    extent[0] + (extent[1] - extent[0]) / 9 * 8,\n    extent[0] + (extent[1] - extent[0]) / 9 * 9];\n\n\n    colorScale.domain(finalDomain);\n\n    _.each(currentCountryJSON.country_counts, cc => {\n\n      expression.push(cc.world_id, colorScale(cc.count));\n    });\n\n\n    expression.push(\"#ffffcc\");\n\n    this.map.setPaintProperty(\"world-map-layer\", \"fill-color\", expression);\n  }\n\n  updateCurrentFeature(currentFeature) {\n      console.log(\"======updateCurrentFeature======\", currentFeature);\n      let feature4326 = toWgs84(currentFeature.feature, proj4('EPSG:3857'));\n\n\n      if (_.isUndefined(this.map.getSource('currentFeature'))) {\n        this.map.addSource('currentFeature', {\n          type: 'geojson',\n          data: feature4326\n        });\n        this.map.addLayer({\n          \"id\": \"currentFeature-point\",\n          \"type\": \"circle\",\n          \"source\": \"currentFeature\",\n          \"paint\": {\n            \"circle-radius\": 10,\n            \"circle-opacity\": 0.7,\n            \"circle-color\": \"#FF0000\"\n          },\n          filter: [\"==\", \"$type\", \"Point\"]\n        }, 'place-city-sm');\n        this.map.addLayer({\n          \"id\": \"currentFeature-line\",\n          \"type\": \"line\",\n          \"source\": \"currentFeature\",\n          \"paint\": {\n            \"line-opacity\": 0.7,\n            \"line-width\": 1,\n            \"line-color\": \"#FF0000\"\n          },\n          filter: [\"in\", \"$type\", \"LineString\", \"Polygon\"]\n        }, 'place-city-sm');\n\n\n      } else {\n\n        this.map.getSource('currentFeature').setData(feature4326);\n      }\n      \n\n      if (feature4326.features[0].geometry.type === \"Point\") {\n        this.map.stop();\n        this.map.flyTo({\n          center: feature4326.features[0].geometry.coordinates,\n          zoom: randomBetween(12, 14)\n        }, { zoomInData: true });\n\n      } else {\n       \n        let bbox = turf.bbox(feature4326);\n        let buffered = turf.buffer(turf.bboxPolygon(bbox), 1, \"miles\");\n        let finalBbox = turf.bbox(buffered)\n\n        try {\n\n          this.map.stop();\n          this.map.fitBounds([[finalBbox[0], finalBbox[1]],\n          [finalBbox[2], finalBbox[3]]], {\n              padding: { top: 100, bottom: 100, left: 100, right: 100 }\n            }, { zoomInData: true });\n        } catch (e) {\n          this.handleMoveEnd({ zoomInData: true });\n        }\n      }\n\n  }\n\n  handleMoveEnd(e){\n    // console.log(e);\n    \n    if (e.osmUserHistory) {\n      _.delay(() => {\n        try {\n          let nextNum = (this.props.osmUserHistoriesIdx + 1) % this.props.osmUserHistories.length;\n          this.props.dispatch(changeOsmUserHistoriesIdx(nextNum));    \n        } catch(e){\n\n        }\n        \n      }, 4000);\n\n    }\n    \n  }\n\n\n  render() {\n    let { windowHeight } = this.props;\n    return (\n      <div ref={ c => { this.refsMapContainer = c; }} className=\"map-container\" style={{height: windowHeight}}>\n      </div>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n\n  return {\n    windowWidth: state.windowWidth,\n    windowHeight: state.windowHeight,\n    nkTile: state.nkTile,\n    cholopleth: state.cholopleth,\n    zoom: state.zoom,\n    mapLoaded: state.mapLoaded,\n    center: state.center,\n    currentSeq: state.currentSeq,\n    currentFeature: state.currentFeature,\n    currentTimeStamp: state.currentTimeStamp,\n    currentIndividual: state.currentIndividual,\n    choloplethMode: state.choloplethMode,\n    selectedOsmUserResponse: state.selectedOsmUserResponse,\n    osmUserHistories: state.osmUserHistories,\n    osmUserHistoriesIdx: state.osmUserHistoriesIdx\n  }\n}\n\nexport default connect(mapStateToProps)(MapContainer);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { changeMapLoaded } from '../actions';\nimport turf from 'turf';\nimport { toWgs84 }  from 'reproject';\nimport proj4 from 'proj4';\nimport _ from 'lodash';\n\nvar isFirstTransition = false;\nclass PageMapContainer extends Component {\n\n  componentDidMount() {\n    window.mapboxgl.accessToken = 'pk.eyJ1Ijoic2Vuc2VhYmxlIiwiYSI6ImxSNC1wc28ifQ.hst-boAjFCngpjzrbXrShw';\n\n    this.map = new window.mapboxgl.Map({\n      container: this.refsPageMapContainer,\n      style: 'mapbox://styles/senseable/cjnr299am1ljs2spk9a4t2sdz',\n      zoom: 7.133251225192166,\n      // minZoom: ,\n      center: [129.39850149741085, 40.36695472501947],\n      interactive: false\n    });\n\n\n    window.map = this.map;\n    this.map.on('style.load', this.handleStyleLoad.bind(this));\n  }\n  \n  handleStyleLoad(e){\n    this.props.dispatch(changeMapLoaded(true));\n\n    this.map.addSource('currentFeature-bbox', {\n      type: 'geojson',\n      data: {\n        type: 'Feature',\n        coordinates: [[[-67.13734351262877, 45.137451890638886],\n                       [-66.96466, 44.8097],\n                       [-67.13734351262877, 45.137451890638886]]]\n      }\n    });\n\n    this.map.addSource('nk-line', {\n      type: 'vector',\n      tiles: ['http://rc.libremaps.net:3005/services/vector-tiles/nk_osm_line/{z}/{x}/{y}.pbf']\n    })\n\n    this.map.addSource('nk-polygon', {\n      type: 'vector',\n      tiles: ['http://rc.libremaps.net:3005/services/vector-tiles/nk_osm_polygon/{z}/{x}/{y}.pbf']\n    })\n  \n    this.map.addSource('nk-point', {\n      type: 'vector',\n      tiles: ['http://rc.libremaps.net:3005/services/vector-tiles/nk_osm_point/{z}/{x}/{y}.pbf;']\n    })\n\n    this.map.addLayer({\n      id: 'currentFeature-bbox-layer',\n      source: 'currentFeature-bbox',\n      type: 'fill',\n      paint: {\n        'fill-color': '#FF0000',\n        'fill-opacity': 0.3\n      }\n    });\n\n    this.map.addLayer({\n      \"id\": \"nk-line-layer\",\n      \"source\": \"nk-line\",\n      \"source-layer\": \"nk_osm_line_4326\",\n      \"type\": \"line\",\n      \"paint\": {\n        'line-opacity': 0.25,\n        'line-color':  {\n          property: 't',\n          stops: [\n            [1184972887, \"#ffffcc\"],\n            [1346511620, \"#d6efc2\"],\n            [1360958163, \"#acdeb7\"],\n            [1378200802, \"#81ceba\"],\n            [1395305792, \"#56bec1\"],\n            [1438380051, \"#3caac2\"],\n            [1479834657, \"#3391bc\"],\n            [1502367226, \"#2b77b4\"],\n            [1510168743, \"#2855a4\"],\n            [1516131630, \"#253494\"]\n          ]\n        }\n      },\n      \"filter\": [\"<\", 't', 1384972887]\n    }, 'place-city-sm');\n\n    this.map.addLayer({\n      \"id\": \"nk-polygon-layer\",\n      \"source\": \"nk-polygon\",\n      \"source-layer\": \"nk_osm_polygon_4326\",\n      \"type\": \"fill\",\n      \"paint\": {\n        'fill-opacity': 0.5,\n        'fill-color':  {\n          property: 't',\n          stops: [\n            [1184972887, \"#ffffcc\"],\n            [1346511620, \"#d6efc2\"],\n            [1360958163, \"#acdeb7\"],\n            [1378200802, \"#81ceba\"],\n            [1395305792, \"#56bec1\"],\n            [1438380051, \"#3caac2\"],\n            [1479834657, \"#3391bc\"],\n            [1502367226, \"#2b77b4\"],\n            [1510168743, \"#2855a4\"],\n            [1516131630, \"#253494\"]\n          ]\n        }\n      },\n      \"filter\": [\"<\", 't', 1384972887]\n    }, 'place-city-sm');\n\n    this.map.addLayer({\n      \"id\": \"nk-point-layer\",\n      \"source\": \"nk-point\",\n      \"source-layer\": \"nk_osm_point_4326\",\n      \"type\": \"circle\",\n      \"paint\": {\n        'circle-radius': 2,\n        'circle-color':  {\n          property: 't',\n          stops: [\n            [1184972887, \"#ffffcc\"],\n            [1346511620, \"#d6efc2\"],\n            [1360958163, \"#acdeb7\"],\n            [1378200802, \"#81ceba\"],\n            [1395305792, \"#56bec1\"],\n            [1438380051, \"#3caac2\"],\n            [1479834657, \"#3391bc\"],\n            [1502367226, \"#2b77b4\"],\n            [1510168743, \"#2855a4\"],\n            [1516131630, \"#253494\"]\n          ]\n        }\n      },\n      \"filter\": [\"<\", 't', 1384972887]\n    }, 'place-city-sm');\n\n\n  }\n\n  componentWillReceiveProps(newProps) {\n\n\n\n    let { currentFeature, currentTimeStamp, currentSeq } = newProps;\n   \n    if (!_.isNull(currentFeature)){\n      \n      if (currentSeq !== this.props.currentSeq) {\n         console.log(currentFeature, \"newProps.currentseq: \", currentSeq, \"this.props.currentSeq:\", this.props.currentSeq);\n        console.log(\"will do transition\");\n        this.updateCurrentFeature(currentFeature);\n      } else if (isFirstTransition) {\n        isFirstTransition = false;\n         console.log(currentFeature, \"newProps.currentseq: \", currentSeq, \"this.props.currentSeq:\", this.props.currentSeq);\n\n        console.log(\"will do transition but it's first\");\n        this.updateCurrentFeature(currentFeature);\n      } else {\n        console.log(\"will not\");\n\n      }\n    } \n    if (currentTimeStamp !== this.props.currentTimeStamp) {\n      this.map.setFilter('nk-line-layer', [\"<\", \"t\", currentTimeStamp]);\n      this.map.setFilter('nk-polygon-layer', [\"<\", \"t\", currentTimeStamp]);\n      this.map.setFilter('nk-point-layer', [\"<\", \"t\", currentTimeStamp]);  \n    }\n  }\n\n  componentWillUnmount(){\n\n  }\n\n  componentDidUpdate(){\n    this.map.resize();\n\n  }\n\n  updateCurrentFeature(currentFeature) {\n\n    let feature4326 = toWgs84(currentFeature.feature, proj4('EPSG:3857'));\n\n    \n    let bbox = turf.bbox(feature4326);\n    let buffered = turf.buffer(turf.bboxPolygon(bbox), 25, \"miles\");\n\n    this.map.getSource('currentFeature-bbox').setData(buffered);\n\n  }\n  render() {\n    let { windowHeight } = this.props;\n    return (\n      <div ref={ c => { this.refsPageMapContainer = c; }} className=\"map-container\" style={{height: windowHeight }}>\n      </div>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    windowWidth: state.windowWidth,\n    windowHeight: state.windowHeight,\n    currentSeq: state.currentSeq,\n    currentFeature: state.currentFeature,\n    currentTimeStamp: state.currentTimeStamp\n  }\n}\n\nexport default connect(mapStateToProps)(PageMapContainer);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport moment from 'moment';\n\nconst Fragment = React.Fragment;\n\nclass ContributorInfo extends Component {\n  render() {\n    let { currentFeature } = this.props;\n\n    return (\n      <Fragment>\n        <div className=\"contributor-info left\">\n          <div className=\"name\">\n            { currentFeature.osm_user.osm_user }\n          </div>\n        </div>\n\n        <div className=\"contributor-info center\">\n          <div className=\"time\">\n            { //moment(currentFeature.osm_timestamp * 1000).format(\"YYYY MM DD\") }\n              moment.unix(currentFeature.osm_timestamp).format(\"MMMM DD, YYYY\")\n            }\n          </div>\n        </div>\n\n\n        <div className=\"contributor-info right\">\n          <div className=\"rank\">\n            { currentFeature.osm_user.rank } of 887\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    currentFeature: state.currentFeature\n  }\n}\n\n\n\nexport default connect(mapStateToProps)(ContributorInfo);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\nclass CenterMarker extends Component {\n  render() {\n    let { currentFeature } = this.props;\n\n    return (\n      <div className=\"center-marker\">\n        {\n          currentFeature.name\n        }\n      </div>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    currentFeature: state.currentFeature\n  }\n}\n\nexport default connect(mapStateToProps)(CenterMarker);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport _ from 'lodash';\nimport { numberWithDelimiter } from '../utils';\nimport { ContDistribution, ChoroplethMap } from './'\nimport worldData from '../constants/world_data.json';\n\n\nclass MessageContributorInfo extends Component {\n  getTopThreeCountries(countryCounts){\n    // countryCounts\n    let sortedCounts = _.sortBy(countryCounts, cc => { return cc.count }).reverse();\n    let splicedCounts = _.filter(sortedCounts, sc => { return sc.count > 0; }).splice(0, 5);\n\n    _.each(splicedCounts, (sp, i) => {\n      splicedCounts[i].nameKo = _.find(worldData, wd => { return wd.id === sp.world_id; }).name_ko;\n      splicedCounts[i].nameEn = _.find(worldData, wd => { return wd.id === sp.world_id; }).name_en;\n    })\n    return splicedCounts;\n\n  }\n  render() {\n\n\n    let { currentFeature } = this.props;\n    let countryCounts = currentFeature.osm_user.country_counts;\n    let topThreeCountries = this.getTopThreeCountries(countryCounts);\n\n    return (\n      <div className=\"msg-contributor-info\">\n        <div className=\"name-rank-area\">\n          <div className=\"lv\">\n            <div className=\"label\">\n              지도 기여자\n            </div>\n            <div className=\"value\">\n              { currentFeature.osm_user.osm_user }\n            </div>\n          </div>\n          <div className=\"lv\">\n            <div className=\"label\">\n              순위\n            </div>\n            <div className=\"value\">\n              { currentFeature.osm_user.rank } of 889\n            </div>\n          </div>\n        </div>\n\n        <div className=\"name-rank-area\">\n          <div className=\"lv\">\n            <ContDistribution width={250} height={200} allCount={currentFeature.osm_user.all_count} />\n          </div>\n          <div className=\"lv\">\n            <div className=\"label\">\n              오픈스트리트맵 총 기여셋 횟수*\n            </div>\n            <div className=\"value\">\n              { numberWithDelimiter(currentFeature.osm_user.total_contribution_count) }\n            </div>\n            <div className=\"l-apple-box\">\n            </div>\n            <div className=\"label\">\n              북한 지도 기여 횟수\n            </div>\n            <div className=\"value\">\n              { numberWithDelimiter(currentFeature.osm_user.all_count) }\n            </div>\n            <div className=\"disclaimer\">\n              * 오픈스트리트맵은 여러 개의 지물을 고쳐 하나의 체인지세트(changeset) 단위로 업로드하는데, 총 기여세트 횟수는 이 체인지세트의 개수를 나타냅니다. 실제로 북한 지도에 기여된 지물의 개수보다 적게 나오기도 하는 이유가 됩니다. \n            </div>\n\n          </div>\n        </div>\n\n        <div className=\"changeset-area\">\n          <div className=\"title-area\">\n            <div className=\"label\">\n              지도 기여자의 과거 기여셋 이력 비교\n            </div>\n            <div className=\"value\">\n              {\n                _.map(topThreeCountries, (c, i) => { \n                  return( \n                    <span key={i}>\n                      { `${c.nameKo}${i === topThreeCountries.length - 1 ? \"\" : \", \"}` } \n                    </span>\n                  );\n                })\n              }\n            </div>\n\n          </div>\n\n          <div className=\"choromap-container\">\n            <ChoroplethMap />\n          </div>\n\n        </div>\n\n      </div>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    currentFeature: state.currentFeature\n  }\n}\n\n\n\nexport default connect(mapStateToProps)(MessageContributorInfo);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport * as d3 from 'd3';\nimport { numberWithDelimiter } from '../utils';\nimport _ from 'lodash';\n\nconst HIST = [{\"key\":0,\"value\":0},{\"key\":756.82,\"value\":854.0},{\"key\":2268.46,\"value\":17.0},{\"key\":3780.1000000000004,\"value\":4.0},{\"key\":5291.740000000001,\"value\":4.0},{\"key\":6803.38,\"value\":0.0},{\"key\":8315.02,\"value\":1.0},{\"key\":9826.66,\"value\":1.0},{\"key\":11338.300000000001,\"value\":2.0},{\"key\":12849.94,\"value\":0.0},{\"key\":14361.580000000002,\"value\":1.0},{\"key\":15873.220000000001,\"value\":0.0},{\"key\":17384.86,\"value\":0.0},{\"key\":18896.5,\"value\":0.0},{\"key\":20408.140000000003,\"value\":0.0},{\"key\":21919.780000000002,\"value\":0.0},{\"key\":23431.420000000002,\"value\":0.0},{\"key\":24943.06,\"value\":1.0},{\"key\":26454.7,\"value\":0.0},{\"key\":27966.34,\"value\":0.0},{\"key\":29477.980000000003,\"value\":0.0},{\"key\":30989.620000000003,\"value\":0.0},{\"key\":32501.260000000002,\"value\":1.0},{\"key\":34012.9,\"value\":0.0},{\"key\":35524.54,\"value\":0.0},{\"key\":37036.18,\"value\":0.0},{\"key\":38547.82,\"value\":0.0},{\"key\":40059.46,\"value\":0.0},{\"key\":41571.100000000006,\"value\":0.0},{\"key\":43082.740000000005,\"value\":0.0},{\"key\":44594.380000000005,\"value\":0.0},{\"key\":46106.020000000004,\"value\":0.0},{\"key\":47617.66,\"value\":0.0},{\"key\":49129.3,\"value\":0.0},{\"key\":50640.94,\"value\":0.0},{\"key\":52152.58,\"value\":0.0},{\"key\":53664.22,\"value\":0.0},{\"key\":55175.86,\"value\":0.0},{\"key\":56687.50000000001,\"value\":0.0},{\"key\":58199.14000000001,\"value\":0.0},{\"key\":59710.780000000006,\"value\":0.0},{\"key\":61222.420000000006,\"value\":0.0},{\"key\":62734.060000000005,\"value\":0.0},{\"key\":64245.700000000004,\"value\":0.0},{\"key\":65757.34000000001,\"value\":0.0},{\"key\":67268.98000000001,\"value\":0.0},{\"key\":68780.62000000001,\"value\":0.0},{\"key\":70292.26000000001,\"value\":0.0},{\"key\":71803.90000000001,\"value\":0.0},{\"key\":73315.54000000001,\"value\":0.0},{\"key\":74827.18000000001,\"value\":1.0}];\n\n\nclass ContDistribution extends Component {\n  componentDidMount(){\n    this.d3Render(this.props);\n  }\n\n  componentWillReceiveProps(newProps){\n    this.d3Render(newProps);\n  }\n\n  d3Render(props){\n      // HIST.push({key: _.last(HIST).key + 0, value: 0});\n      \n      let xDomain = [_.first(HIST).key, _.last(HIST).key];\n      let yDomain = [0, d3.max(HIST, h => { return h.value })];\n      // HIST.unshift({key: 0, value: 0});\n\n      this.xScale = d3.scaleLinear()\n        .domain(xDomain)\n        .range([30, props.width - 30]);\n\n      this.yScale = d3.scaleLinear()\n        .domain(yDomain)\n        .clamp(true)\n        .range([props.height - 30, 50]);\n\n\n      var svg = d3.select(this.svgContainer);\n      svg.selectAll(\"*\").remove();\n\n      let lineDraw = d3.line()\n        // .curve(d3.curveCardinal)\n        .x(d => {\n          return this.xScale(d.key)\n        })\n        .y(d => {\n          return this.yScale(d.value)\n        });\n\n\n\n\n      svg.append(\"path\")\n        .data([HIST])\n        .attr(\"class\", \"line\")\n        .attr(\"fill\", \"#ECF7FA\")\n        .attr(\"stroke\", \"#727272\")\n        .attr(\"stroke-width\", 1)\n        .attr(\"d\", lineDraw);\n\n\n      var xAxis = svg.append(\"g\")\n        .attr(\"transform\", `translate(0, ${props.height - 10})`);\n\n      xAxis.append(\"line\")\n        .attr(\"stroke\", \"#727272\")\n        .attr(\"stroke-width\", 0.5)\n        .attr(\"x1\", 0)\n        .attr(\"y1\", -19)\n        .attr(\"x2\", props.width)\n        .attr(\"y2\", -19)\n\n      \n      xAxis.selectAll(\"text\")\n          .data([0, 10000, 30000, 50000, 70000])\n        .enter().append(\"text\")\n          .attr(\"fill\", \"#AAAAAA\")\n          .style(\"font-size\", \"0.6em\")\n          .attr(\"text-anchor\", d => { return d === 60 ? \"end\" : \"middle\" })\n          .attr(\"x\", d => { return this.xScale(d) })\n          .attr(\"y\", -2)\n          .text(d => { return d === 0.0 ? \"0\" : `${numberWithDelimiter(d / 1000)}K` });\n\n      xAxis.selectAll(\"text\")\n          .data(HIST)\n        .enter().append(\"text\")\n\n\n\n\n        svg.append(\"line\")\n          .attr(\"stroke\", \"black\")\n          .attr(\"stroke-width\", 2)\n          .attr(\"x1\", this.xScale(props.allCount))\n          .attr(\"y1\", 15)\n          .attr(\"x2\", this.xScale(props.allCount))\n          .attr(\"y2\", props.height - 25)\n\n    \n      \n      // svg.append(\"text\")\n      //     .attr(\"fill\", \"#AAAAAA\")\n      //     .attr(\"x\", 0)\n      //     .attr(\"y\", this.yScale(yDomain[0]) - 5)\n      //     .text(yDomain[0]);\n\n      // svg.append(\"text\")\n      //     .attr(\"fill\", \"#AAAAAA\")\n      //     .attr(\"x\", 0)\n      //     .attr(\"y\", this.yScale(yDomain[1]) + 5)\n      //     .text( numberWithDelimiter(yDomain[1]) );\n\n\n\n    \n  }\n\n  render() {\n    return (\n      <svg className={`distribution-index${this.props.className}`} style={{ width: this.props.width, height: this.props.height }}>\n        <g ref={ c => { this.svgContainer = c; } }>\n        </g>\n        { this.props.children }\n      </svg>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n\n  }\n};\n\nexport default connect(mapStateToProps)(ContDistribution);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { numberWithDelimiter } from '../utils';\nimport * as d3 from 'd3';\nimport _ from 'lodash';\n\nconst Fragment = React.Fragment;\nclass MapContainer extends Component {\n\n  componentDidMount() {\n    window.mapboxgl.accessToken = 'pk.eyJ1Ijoic2Vuc2VhYmxlIiwiYSI6ImxSNC1wc28ifQ.hst-boAjFCngpjzrbXrShw';\n\n    this.map = new window.mapboxgl.Map({\n      container: this.refsMapContainer,\n      style: 'mapbox://styles/senseable/cjnr299am1ljs2spk9a4t2sdz',\n      zoom: 0.3431335719213704,\n      center: [9.629819343809345, 30.34808136525487],\n      interactive: false\n    });\n    // window.map = this.map;\n    this.map.on('style.load', this.handleStyleLoad.bind(this));\n    this.map.on('moveend', this.handleMoveEnd.bind(this));\n  }\n  \n  handleStyleLoad(e){\n    this.map.addSource(\"world-map-source\", {\n      type: 'vector',\n      url: 'mapbox://senseable.8x6k6499'\n    });\n\n   this.map.addLayer({\n      \"id\": \"world-map-layer\",\n      \"source\": \"world-map-source\",\n      \"source-layer\": \"world_assoc-c3znvj\",\n      \"type\": \"fill\",\n      \"paint\": {\n        'fill-opacity': 0.7,\n        'fill-color': '#FFFFFF'\n      }\n    }, 'waterway-label');\n\n   this.map.addLayer({\n      \"id\": \"world-map-line-layer\",\n      \"source\": \"world-map-source\",\n      \"source-layer\": \"world_assoc-c3znvj\",\n      \"type\": \"line\",\n      \"paint\": {\n        'line-opacity': 0.2,\n        'line-color': '#BBB',\n        'line-width': 1\n      }\n    }, 'waterway-label');\n\n\n  }\n\n  componentWillReceiveProps(newProps) {\n    let { currentFeature } = newProps;\n\n    if (!_.isNull(currentFeature)){\n\n      if (_.isNull(this.props.currentFeature)) {\n        this.updateCurrentFeature(currentFeature);\n      } else if (currentFeature.osm_id !== this.props.currentFeature.osm_id) {\n        this.updateCurrentFeature(currentFeature);\n      }\n    }\n    \n  }\n\n  updateCurrentFeature(currentFeature){\n\n    var expression = [\"match\", [\"get\", \"py_id\"]];\n\n    // Calculate color for each state based on the unemployment rate\n    \n    let colorScale = d3.scaleLinear()\n      .domain([1184972887, \n               1346511620, \n               1360958163, \n               1378200802, \n               1395305792, \n               1438380051, \n               1479834657, \n               1502367226, \n               1510168743, \n               1516131630])\n      .range([\"#ffffcc\",\n              \"#d6efc2\",\n              \"#acdeb7\",\n              \"#81ceba\",\n              \"#56bec1\",\n              \"#3caac2\",\n              \"#3391bc\",\n              \"#2b77b4\",\n              \"#2855a4\",\n              \"#253494\"])\n\n    var extent = d3.extent(currentFeature.osm_user.country_counts, cc => {\n      return cc.count;\n    })\n\n\n    var finalDomain = [extent[0], \n                       extent[0] + (extent[1] - extent[0]) / 9 * 1,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 2,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 3,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 4,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 5,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 6,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 7,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 8,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 9];\n\n\n    colorScale.domain(finalDomain);\n\n    _.each(currentFeature.osm_user.country_counts, cc => {\n\n      expression.push(cc.world_id, colorScale(cc.count));\n    });\n\n\n    expression.push(\"rgba(0,0,0,0)\");\n\n    this.map.setPaintProperty(\"world-map-layer\", \"fill-color\", expression);\n\n  }\n\n  componentDidUpdate(){\n    this.map.resize();\n  }\n\n\n  handleMoveEnd(e){\n\n    \n  }\n\n\n  render() {\n    let { currentFeature } = this.props;\n    let colorScale = d3.scaleLinear()\n      .range([\"#ffffcc\",\n              \"#d6efc2\",\n              \"#acdeb7\",\n              \"#81ceba\",\n              \"#56bec1\",\n              \"#3caac2\",\n              \"#3391bc\",\n              \"#2b77b4\",\n              \"#2855a4\",\n              \"#253494\"])\n\n    var extent = d3.extent(currentFeature.osm_user.country_counts, cc => {\n      return cc.count;\n    })\n\n    var finalDomain = [extent[0], \n                       extent[0] + (extent[1] - extent[0]) / 9 * 1,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 2,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 3,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 4,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 5,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 6,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 7,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 8,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 9];\n\n\n    colorScale.domain(finalDomain);\n\n    return (\n      <Fragment>\n        <div ref={ c => { this.refsMapContainer = c; }} className=\"map-container-choropleth\" style={{width: \"100%\", height: 500}}>\n        </div>\n        \n        <div className=\"sub-legend\">\n          <div className=\"title\">\n            기여 횟수\n          </div>\n          {\n            _.map(finalDomain, (val, i) => {\n              if (_.isUndefined(val)) {\n                return null;\n              } else {\n                return (\n                  <div key={i} className=\"legend-sub-area\">\n                    <div className=\"color-box\" style={{ backgroundColor: colorScale(val) }}>\n                    </div>\n                    <div className=\"value\">\n                      { numberWithDelimiter(Number(val.toFixed(0))) }\n                    </div>\n                  </div>\n                ); \n              }\n\n              \n            })\n          }\n        </div>\n\n      </Fragment>\n\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    currentSeq: state.currentSeq,\n    currentFeature: state.currentFeature,\n    currentTimeStamp: state.currentTimeStamp\n  }\n}\n\nexport default connect(mapStateToProps)(MapContainer);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport moment from 'moment';\nimport * as d3 from 'd3';\nimport _ from 'lodash';\n\nclass YearLegend extends Component {\n\n  render() {\n    let { legend } = this.props;\n    let domain = [1184972887, \n              1346511620, \n              1360958163, \n              1378200802, \n              1395305792, \n              1438380051, \n              1479834657, \n              1502367226, \n              1510168743, \n              1516131630]\n    let yearScale = d3.scaleLinear()\n      .domain(domain)\n      .range([\"#ffffcc\",\n                \"#d6efc2\",\n                \"#acdeb7\",\n                \"#81ceba\",\n                \"#56bec1\",\n                \"#3caac2\",\n                \"#3391bc\",\n                \"#2b77b4\",\n                \"#2855a4\",\n                \"#253494\"]);\n\n    return (\n      <div className=\"year-legend\" style={{ opacity: legend ? 1 : 0 }}>\n        <div className=\"title\">\n          Date of Contribution\n        </div>\n        {\n          _.map(domain, (val, i) => {\n            if (_.isUndefined(val)) {\n              return null;\n            } else {\n              return (\n                <div key={i} className=\"legend-sub-area\">\n                  <div className=\"color-box\" style={{ backgroundColor: yearScale(val) }}>\n                  </div>\n                  <div className=\"value\">\n                    { moment.unix(val).format(\"YYYY MMM\") }\n                    {\n                      !(i + 1 > domain.length - 1) ? \n                      `-${moment.unix(domain[i + 1]).format(\"YYYY MMM\")}` :\n                      \"-\"\n                    }\n                  </div>\n                </div>\n              ); \n            }\n\n            \n          })\n        }\n      </div>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    legend: state.legend\n  }\n}\n\n\nexport default connect(mapStateToProps)(YearLegend);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport moment from 'moment';\n\nconst Fragment = React.Fragment;\n\nclass MessageTopInfo extends Component {\n  render() {\n    let { currentFeature } = this.props;\n    return (\n      <Fragment>\n        <div className=\"contributor-info center\">\n          <div className=\"time\">\n            { //moment(currentFeature.osm_timestamp * 1000).format(\"YYYY MM DD\") }\n              moment.unix(currentFeature.osm_timestamp).format(\"MMMM DD, YYYY\")\n            }\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    currentFeature: state.currentFeature\n  }\n}\n\n\n\nexport default connect(mapStateToProps)(MessageTopInfo);\n","const TITLE_TYPE = `\n  font-family: 'Alfa Slab One', cursive;\n  font-size: 1em;\n  line-height: 1.2em;\n  font-style: normal;\n  font-weight: 400;\n  text-rendering: optimizeLegibility;\n`;\n\nconst REGULAR_TYPE = `\n  font-family: 'Caponi Text', 'Noto Serif KR', serif;\n  font-size: 1em;\n  line-height: 1.6em;\n  font-style: normal;\n  font-weight: 400;\n  text-rendering: optimizeLegibility;\n`;\n\nconst BOLD_TYPE = `\n  font-family: 'Caponi Text', 'Noto Serif KR', serif;\n  font-size: 1em;\n  line-height: 1.6em;\n  font-style: normal;\n  font-weight: 400;\n  text-rendering: optimizeLegibility;\n`;\n\nconst LABEL_BOLD_TYPE = `\n  font-family: 'Roboto', sans-serif;\n  font-size: 1em;\n  line-height: 1.6em;\n  font-style: normal;\n  font-weight: 700;\n  text-rendering: optimizeLegibility;\n`;\n\nconst LABEL_REGULAR_TYPE = `\n  font-family: 'Roboto', sans-serif;\n  font-size: 1em;\n  line-height: 1.6em;\n  font-style: normal;\n  font-weight: 400;\n  text-rendering: optimizeLegibility;\n`;\n\nconst LABEL_ITALIC_TYPE = `\n  font-family: 'Roboto', sans-serif;\n  font-size: 1em;\n  line-height: 1.6em;\n  font-style: normal;\n  font-weight: 400;\n  text-rendering: optimizeLegibility;\n`;\n\nconst ABSOLUTE_MIDDLE = `\n  transform: translate(0, -50%);\n`;\n\nconst ABSOLUTE_CENTER = `\n  transform: translate(-50%, 0);\n`;\n\nconst ABSOLUTE_CENTER_MIDDLE = `\n  transform: translate(-50%, -50%);\n`;\n\nexport default {\n  REGULAR_TYPE,\n  TITLE_TYPE,\n  BOLD_TYPE,\n  LABEL_BOLD_TYPE,\n  LABEL_REGULAR_TYPE,\n  LABEL_ITALIC_TYPE,\n  ABSOLUTE_CENTER,\n  ABSOLUTE_CENTER_MIDDLE,\n  ABSOLUTE_MIDDLE\n};","import styled from 'styled-components';\nimport mixins from './mixins';\n\nconst SectionContainer = styled.section`\n  width: 100%;\n  position: relative;\n`;\n\nconst Gutter = styled.div`\n  height: ${props => props.h}px;\n`;\n\nconst Sticky = styled.div`\n  position:sticky;\n  top: 10px;\n  height:auto;\n`;\n\nconst NonSticky = styled.div`\n  width: 400px;\n  position:relative;\n  margin: 0 auto;\n  z-index:5;\n  ${mixins.BOLD_TYPE}\n  font-size:1.2em;\n  line-height:1.4;\n  border: 1px solid #BBB;\n  padding: 10px 15px;\n  background: #E7F7FB;\n  color: black;\n\n\n  @media (max-width: 768px) {\n    width: calc(100% - 40px);\n  }\n\n`;\n\n\nconst Box = styled.div`\n  /* ${mixins.ABSOLUTE_CENTER} */\n  /* position: absolute; */\n  /* left: 50%; */\n  /* top: 0; */\n  width: 450px;\n  margin: 0 auto;\n  height: auto;\n  \n  ${mixins.BOLD_TYPE}\n  font-size:1.2em;\n  border: 1px solid #BBB;\n  padding: 10px 15px;\n  background: #E7F7FB;\n  color: black;\n\n\n  @media (max-width: 768px) {\n    width: calc(100% - 40px);\n  }\n`;\n\nexport {\n  SectionContainer,\n  Box,\n  Sticky,\n  NonSticky,\n  Gutter\n};","import React, { Component } from 'react'\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport mixins from '../stylesheets/mixins';\nimport {SectionContainer } from '../stylesheets/components';\nimport moment from 'moment';\nimport _ from 'lodash';\n\nconst InterestingPOIsContainer = styled(SectionContainer)`\n  margin:0;\n`;\n\nconst POIBox = styled.div`\n  position: absolute;\n  left: 50%;\n  ${mixins.ABSOLUTE_CENTER}\n  top: 20px;\n  ${mixins.BOLD_TYPE}\n  font-size:1.2em;\n  border: 1px solid #BBB;\n  padding: 10px 15px;\n  background: white;\n  color: black;\n  display:flex;\n  justify-content: space-between;\n  width: 400px;\n\n  @media (max-width: 768px) {\n    width: calc(100% - 40px);\n  }\n\n`;\n\nconst TitleArea = styled.div`\n  width:200px;\n`;\n\nconst Label = styled.h4`\n  ${mixins.LABEL_BOLD_TYPE}\n  font-size:0.65em;\n  color:#777;\n  margin-bottom: 5px;\n`;\n\nconst Value = styled.div`\n  font-size: 0.9em;\n  color: black;\n  padding-right: 10px;\n`;\n\nconst Date = styled.div `\n  ${mixins.LABEL_REGULAR_TYPE}\n  font-size:0.6em;\n  color: #AAA;\n`;\n\nconst Disclaimer = styled.div `\n  ${mixins.LABEL_ITALIC_TYPE}\n  font-size:0.5em;\n  color: #AAA;\n`;\n\nclass InterestingPOIs extends Component {\n\n\n  render() {\n    let name = _.isUndefined(this.props.name_en) ? this.props.name : this.props.name_en;\n    \n    return (\n      <InterestingPOIsContainer className=\"trigger\" data-action-name=\"changeInterestingPOIs\" data-poi-id={this.props.op} style={{ height: this.props.windowHeight}}>\n        <POIBox>\n          <TitleArea>\n            <Label>\n              Name\n            </Label>\n            <Value>\n              {name }\n            </Value>\n          </TitleArea>\n          <TitleArea>\n            <Label>\n              Contributor\n            </Label>\n            <Value>\n              P{this.props.osm_user.id}*\n            </Value>\n            <Date>\n              {moment.unix(this.props.osm_timestamp).format(\"MMMM DD, YYYY\")}\n            </Date>\n            <Disclaimer>\n              * Names have been anonymized for privacy\n            </Disclaimer>\n          </TitleArea>\n        </POIBox>\n      </InterestingPOIsContainer>\n    )\n  }\n}\n\nlet mapStateToProps = state => {\n    return state;\n};\n\nexport default connect(mapStateToProps)(InterestingPOIs);","import React, { Component } from 'react'\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport mixins from '../stylesheets/mixins';\n\nconst HeaderContainer = styled.div`\n  position: fixed;\n  left: 10px;\n  top: 10px;\n  z-index: 5;\n  opacity: ${props => props.titleHeader ? 1 : 0};\n  ${mixins.TITLE_TYPE}\n  transition: 0.4s opacity;\n  border: 1px solid #CCCCCC;\n  padding: 7px;\n  background-color: white;\n  font-size: 0.8em;\n  color: black;\n\n  .ko {\n    ${mixins.BOLD_TYPE}\n    color: black;\n    font-size: 0.9em;\n  }\n\n  @media (max-width: 768px) {\n    left: 50%;\n    width: calc(100% - 40px);\n    transform: translate(-50%, 0);\n  }\n\n`;\n\n\nclass TitleHeader extends Component {\n  render() {\n    return (\n      <HeaderContainer titleHeader={this.props.titleHeader}>    \n        Cartographers of North Korea &nbsp;<span className=\"ko\">북한의 지도 제작자</span>\n      </HeaderContainer>\n    )\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    titleHeader: state.titleHeader\n  }\n}\nexport default connect(mapStateToProps)(TitleHeader);","import React, { Component } from 'react'\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport mixins from '../stylesheets/mixins';\nimport {changeWorldMapIndividual } from '../actions';\nimport {KoreanLegend, IndividualInfo, NumberContributionLegend} from './';\n// import {SectionContainer, Box, Sticky} from '../stylesheets/components';\n// import osm_stats from '../constants/osm_users.json';\nimport * as d3 from 'd3';\nimport { numberWithDelimiter } from '../utils';\nimport _ from 'lodash';\nimport axios from 'axios';\n\nconst ContributorsGraphBox = styled.div`\n  background-color: white;\n  border: 1px solid #ccc;\n  width: 80%;\n  margin: 0 auto;\n  position: relative;\n\n  @media (max-width: 768px) {\n    width: calc(100% - 20px);\n  }\n`;\n\nconst Title = styled.div`\n  position: absolute;\n  left: 50%;\n  transform: translate(-50%, 0);\n  top: 20px;\n  color: black;\n  font-size: 0.9em;\n\n  @media (max-width: 768px) {\n    width: fit-content;\n  }\n\n  div.disclaimer {\n    ${mixins.LABEL_ITALIC_TYPE}\n    margin-top:5px;\n    font-size:0.7em;\n    text-align: center;\n    color:#AAA;\n  }\n`;\n\nconst Tooltip = styled.div`\n  position:absolute;\n  line-height: 1;\n  padding: 10px;\n  background: #E7F7FB;\n  color: black;\n  z-index:6;\n  ${mixins.LABEL_BOLD_TYPE}\n  font-size:0.8em;\n  transition: 0.4s opacity;\n\n  width: calc(200px - 24px);\n  &:after {\n    content: \" \";\n    position: absolute;\n    top: 100%; /* At the bottom of the tooltip */\n    left: 50%;\n    margin-left: -5px;\n    border-width: 5px;\n    border-style: solid;\n    border-color: #E7F7FB transparent transparent transparent;\n  }\n\n  hr {\n    border:none;\n    margin: 0;\n    margin-bottom: 10px;\n    padding: 0;\n    border-bottom: 1px solid black;\n  }\n`;\nconst ToolTipLabelArea = styled.div`  \n  display: flex;\n  align-items:center;\n  justify-content: space-between;\n  /* padding-bottom:5px; */\n  margin-bottom:5px;\n`;\n\n const ToolTipLabel = styled.div`\n  ${mixins.LABEL_REGULAR_TYPE}\n  font-size:0.9em;\n`;\n\nconst ToolTipValue = styled.div`\n  ${mixins.LABEL_BOLD_TYPE}\n  font-size: 0.9em;\n`;\n\n\n\nclass ContributorsGraph extends Component {\n  constructor(props){\n    super(props);\n    // this.osmUsersData = osm_stats.stats.osm_users;\n\n\n    this.margin = {\n      top: 30, \n      right: 60,\n      bottom: 30,\n      left: 60\n    };\n\n    this.refGraph = React.createRef();   \n    this.colorScale = d3.scaleLog()\n      .domain([1, 2, 3, 10, 100, 1000, 5000, 10000, 100000])\n      .range([\"#ffffcc\",\n        \"#d6efc2\",\n        \"#acdeb7\",\n        \"#81ceba\",\n        \"#56bec1\",\n        \"#3caac2\",\n        \"#3391bc\",\n        \"#2b77b4\",\n        \"#2855a4\",\n        \"#253494\"]);\n\n    this.state = {\n      currentHover: null\n    }\n  \n  }\n\n  initSimulation(props){\n\n    var simulation = d3.forceSimulation(this.props.osmUsersDataStats.stats.osm_users)\n      .force(\"x\", d3.forceX(d => { return this.xScale(d.all_count); }).strength(1))\n      .force(\"y\", d3.forceY(props.height / 2 - 20))\n      .force(\"collide\", d3.forceCollide(props.padding))\n      .stop();\n\n    for (var i = 0; i < 400; ++i) simulation.tick();\n  }\n  \n  d3Init(){\n    let { width, height } = this.props;    \n    const svg = d3.select(this.refGraph.current);\n    this.xScale.range([this.margin.left, width - this.margin.right]);\n\n    this.initSimulation(this.props);\n\n    this.xAxisFunction = g => g\n      .attr(\"transform\", `translate(0,${height - this.margin.bottom})`)\n      .call(d3.axisBottom(this.xScale)\n        .ticks(width / 80)\n        .tickFormat(d => {\n          var log = Math.log(d) / Math.LN10;\n          return Math.abs(Math.round(log) - log) < 1e-6 ? numberWithDelimiter(d) : '';\n        })\n        .tickSizeOuter(0));\n    \n    this.xAxis = svg.append(\"g\")\n      .call(this.xAxisFunction);\n\n    var _this = this;\n    this.circleGraph = svg.append(\"g\")\n      .selectAll(\"circle\")\n      .data(this.props.osmUsersDataStats.stats.osm_users)\n      .enter().append(\"circle\")\n      .attr(\"fill\", d => { return this.colorScale(d.all_count) })\n      .attr(\"stroke\", \"#eee\")\n      .style('cursor', 'pointer')\n      .attr(\"cx\", d => d.x)\n      .attr(\"cy\", d => d.y)\n      .attr(\"r\", this.props.radius)\n      .on('mouseover touchend', function (d) {\n        _this.setState({\n          currentHover: {\n            ...d,\n            cx: d3.select(this).attr('cx'),\n            cy: d3.select(this).attr('cy')\n          }\n        });\n\n        d3.select(this)\n          .transition()\n          .attr('r', _this.props.radius + 2)\n          .attr('fill', '#ff0000');\n      })\n      .on('mouseout', function (d) {\n        _this.setState({\n          currentHover: null\n        });\n\n        let circleColor = _this.setCircleColor(_this.props, d);\n        d3.select(this)\n          .transition()\n          .attr('r', _this.props.radius)\n          .attr('fill', circleColor);\n      })\n      .on('click', d => {\n        if (this.props.cholopleth) {\n          this.setState({\n            currentHover: d\n          });\n          this.props.dispatch(changeWorldMapIndividual(d));\n          d3.select(this)\n            .transition()\n            .attr('r', _this.props.radius + 2)\n            .attr('fill', '#ff0000');\n        }\n      });\n\n  }\n\n  d3Update() {\n    let { width, height } = this.props;\n    this.xScale.range([this.margin.left, width - this.margin.right]);\n    \n    this.initSimulation(this.props);\n\n    this.xAxisFunction = g => g\n      .attr(\"transform\", `translate(0,${height - this.margin.bottom})`)\n      .call(d3.axisBottom(this.xScale)\n        .ticks(width / 80)\n        .tickFormat(d => {\n          var log = Math.log(d) / Math.LN10;\n          return Math.abs(Math.round(log) - log) < 1e-6 ? numberWithDelimiter(d) : '';\n        })\n        .tickSizeOuter(0))\n\n    this.xAxis\n      .transition()\n      .call(this.xAxisFunction);\n\n    this.circleGraph\n      .transition()\n      .attr(\"cx\", d => d.x)\n      .attr(\"cy\", d => d.y)\n  }\n\n  setCircleColor(props, d) {\n    let { graphMode, choloplethMode, cholopleth, currentIndividual } = props;\n\n    if (cholopleth) {\n      graphMode = choloplethMode;\n      // console.log(\"final graphmode is:\", graphMode);\n    }\n    //top20, top5\n    if (!_.isNull(currentIndividual) && !_.isUndefined(currentIndividual)) {\n\n      return d.id === currentIndividual.id ? \"#FF0000\" : \"#DDD\";\n\n    } else {\n      if (graphMode === \"korean\") {\n        return d.korean ? \"#FF0000\" : \"#DDD\";\n\n      } else if (graphMode === \"all\") {\n\n        return this.colorScale(d.all_count);\n\n      } else if (graphMode === \"top20\") {\n\n        return d.rank > 0 && d.rank <= 20 ? \"#253494\" : \"#DDD\";\n\n      } else if (graphMode === \"top5\") {\n\n        return d.rank > 0 && d.rank <= 5 ? \"#253494\" : \"#DDD\";\n\n      }\n    }\n\n  }\n\n  componentDidUpdate(prevProps, prevState){\n    let { graphMode, choloplethMode, cholopleth, currentIndividual } = this.props;\n   \n    if (prevProps.osmUsersDataStats !== this.props.osmUsersDataStats) {\n\n      if (!_.isNull(this.props.osmUsersDataStats)) {\n        this.xScale = d3.scaleLog()\n          .domain(d3.extent(this.props.osmUsersDataStats.stats.osm_users, d => d.all_count));\n        this.d3Init();\n\n      }\n      \n    }\n   \n    if (!_.isNull(this.props.osmUsersDataStats)){\n\n      if (prevProps.width !== this.props.width || prevProps.height !== this.props.height) {\n        this.d3Update();\n        console.log(\"d3update called\");\n      }\n      \n      if (cholopleth) {\n        graphMode = choloplethMode;\n      }\n      \n      if (!_.isUndefined(this.circleGraph)) {\n\n        if (!_.isNull(currentIndividual) && !_.isUndefined(currentIndividual)) {\n  \n          this.circleGraph.transition().attr(\"fill\", d => {\n    \n            if (d.id === currentIndividual.id) {\n            \n              return \"#FF0000\";\n            \n            } else {\n    \n              return \"#DDD\";\n            \n            }\n    \n          })\n    \n        } else {\n          //top20, top5\n          if (graphMode === \"korean\") {\n    \n            this.circleGraph.transition().attr(\"fill\", d => {\n              return d.korean ? \"#FF0000\" : \"#DDD\";\n            })\n    \n          } else if (graphMode === \"all\") {\n            this.circleGraph.transition().attr(\"fill\", d => {\n              return this.colorScale(d.all_count)\n            });\n    \n          } else if (graphMode === \"top20\") {\n            \n            this.circleGraph.transition().attr(\"fill\", d => {\n              return d.rank > 0 && d.rank <= 20 ? \"#253494\" : \"#DDD\"; // this.colorScale(d.all_count)\n            })\n    \n          } else if (graphMode === \"top5\") {\n            this.circleGraph.transition().attr(\"fill\", d => {\n              return d.rank > 0 && d.rank <= 5 ? \"#253494\" : \"#DDD\";\n            }) //this.colorScale(d.all_count)\n          }\n        }\n      }\n      \n    }\n    \n  }\n\n  render() {\n    let { currentHover } = this.state;\n    let { graphMode, choloplethMode, cholopleth, currentIndividual } = this.props;\n\n    if (cholopleth) {\n      graphMode = choloplethMode;\n      // console.log(\"final graphmode is:\", graphMode);\n    }\n\n    if (!_.isNull(currentHover)) {\n      console.log(currentHover.cx, currentHover.cy);\n\n    }\n    \n    return (\n\n        <ContributorsGraphBox style={{ height: this.props.height }}>\n          <Title>\n            Distribution of Contributors by # of Contribution\n\n            <div className=\"disclaimer\">\n              * Names have been anonymized for privacy\n            </div>\n          </Title>\n          <svg ref={this.refGraph} width={this.props.width} height={this.props.height}>\n          </svg>\n\n          {\n            _.isNull(currentHover) ? \n            null : \n            <Tooltip style={{ left: currentHover.cx - 100, top: Number(currentHover.cy) - 140 }}>\n              P{ currentHover.id }*\n              <hr />\n              <ToolTipLabelArea>\n                <ToolTipLabel>\n                  Total Contribution\n                </ToolTipLabel>\n                <ToolTipValue>\n                  { numberWithDelimiter(currentHover.all_count) }\n                </ToolTipValue>\n              </ToolTipLabelArea>\n              <ToolTipLabelArea>\n                <ToolTipLabel>\n                  # of Changesets \n                </ToolTipLabel>\n                <ToolTipValue>\n                  { numberWithDelimiter(currentHover.total_contribution_count) }\n                </ToolTipValue>\n              </ToolTipLabelArea>\n              <ToolTipLabelArea>\n                <ToolTipLabel>\n                  % of Contribution in Korean\n                </ToolTipLabel>\n                <ToolTipValue>\n                  {numberWithDelimiter(Math.floor(currentHover.korean_pct * 100))}% \n                </ToolTipValue>\n              </ToolTipLabelArea>\n            </Tooltip>\n          }\n          <KoreanLegend show={graphMode === \"korean\"} />\n          <NumberContributionLegend scale={this.colorScale} show={!cholopleth && graphMode !== \"korean\"} />\n          {\n            _.isNull(currentIndividual) || _.isUndefined(currentIndividual) ? \n            null : <IndividualInfo />\n          }\n          \n        </ContributorsGraphBox>\n    )\n  }\n}\n\nlet mapStateToProps = state => {\n    return {\n      graphMode: state.graphMode,\n      choloplethMode: state.choloplethMode,\n      osmUsersDataStats: state.osmUsersDataStats,\n      cholopleth: state.cholopleth,\n      currentIndividual: state.currentIndividual\n    }\n};\n\nexport default connect(mapStateToProps)(ContributorsGraph);","import React, { Component } from 'react'\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport mixins from '../stylesheets/mixins';\nimport { Gutter } from '../stylesheets/components';\nimport { scaleLinear } from 'd3';\nimport moment from 'moment';\nimport { YearLegend } from './';\n\nconst Fragment = React.Fragment;\n\nconst Container = styled.div`\n  position: fixed;\n  right: 10px;\n  top: 10px;\n  z-index:4;\n  opacity: ${props => props.show ? 1 : 0};\n  transition: 0.4s opacity;\n\n\n  @media (max-width: 768px) {\n    top:50px;\n    right: 11px;\n  }\n`;\n\nconst RightStat = styled.div`\n \n  border: 1px solid #ccc;\n  padding:10px;\n  background-color: white;\n`;\n\nconst Label = styled.h4`\n  ${mixins.LABEL_BOLD_TYPE}\n  text-align: right;\n  font-size: 0.7em;\n  color: #777;\n`;\n\nconst Value = styled.p`\n  ${mixins.TITLE_TYPE}\n  font-size:1.5em;\n  color:black;\n  text-align: right;\n`;\n\n\nconst Timeline = styled.div`\n\n  border: 1px solid #ccc;\n  padding:15px 10px;\n  background-color: white;\n  height: 300px;\n  width: 15px;\n  position: relative;\n  float: right;\n`;\n\nconst Line = styled.div`\n  position: absolute;\n  left: 50%;\n  width: 3px;\n  transform: translate(-50%, 0);\n  background-color: ${ props => props.color };\n  height: calc(${ props => props.height }% - 30px);\n  transition: 0.2s height;\n`;\n\nconst Date = styled.div`\n  position: absolute;\n  right: 27px;\n  z-index: 6;\n  width: max-content;\n  ${mixins.LABEL_REGULAR_TYPE}\n  font-size:0.7em;\n  top: calc(${ props => props.top }% - 30px);\n  border: 1px solid #ccc;\n  padding:10px;\n  background-color: white;\n  transition: 0.2s top;\n`;\n\nclass TimelineScroller extends Component {\n  render() {\n    let timeScale = scaleLinear().domain([1184971551, 1539016223]).clamp(true).range([0, 100]);\n    let { timelineUI, currentTimeStamp } = this.props;\n    return (\n      <Fragment>\n        <Container show={timelineUI}>\n          <RightStat>\n            <Label>\n              Total Contributors\n            </Label>\n            <Value>\n              889\n            </Value>\n            <Gutter></Gutter>\n            <Label>\n              Total Contributions\n            </Label>\n            <Value>\n              324,415\n            </Value>\n          </RightStat>\n          <Gutter h={15}></Gutter>\n          <Timeline>\n            <Date top={timeScale(currentTimeStamp)}>\n              {moment.unix(currentTimeStamp).format(\"MMMM DD, YYYY\")}\n            </Date>\n            <Line color=\"#ddd\" height={100} />\n            <Line color=\"#000\" height={timeScale(currentTimeStamp)} />\n          </Timeline>\n        </Container>\n        <YearLegend />\n      </Fragment>\n    )\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    timelineUI: state.timelineUI,\n    currentTimeStamp: state.currentTimeStamp\n  }\n}\n\nexport default connect(mapStateToProps)(TimelineScroller);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport {  numberWithDelimiter } from '../utils';\nimport * as d3 from 'd3';\nimport country_analysis_all from '../constants/country_analysis_all.json';\nimport country_analysis_top_20 from '../constants/country_analysis_top_20.json';\nimport country_analysis_top_5 from '../constants/country_analysis_top_5.json';\nimport _ from 'lodash';\n\nclass CholoplethLegend extends Component {\n  constructor(props) {\n    super(props);\n    this.colorScale = d3.scaleLinear()\n      .range([\"#ffffcc\",\n        \"#d6efc2\",\n        \"#acdeb7\",\n        \"#81ceba\",\n        \"#56bec1\",\n        \"#3caac2\",\n        \"#3391bc\",\n        \"#2b77b4\",\n        \"#2855a4\",\n        \"#253494\"])\n\n  }\n\n  componentDidMount() {\n  }\n  updateCurrentCholopleth(cholopleth, choloplethMode, currentIndividual) {\n\n    let currentCountryJSON = null;\n\n    if (!_.isNull(currentIndividual)) {\n\n      currentCountryJSON = currentIndividual;\n\n    } else if (choloplethMode === \"all\") {\n\n      currentCountryJSON = {\n        country_counts: country_analysis_all\n      };\n\n    } else if (choloplethMode === \"top20\") {\n\n      currentCountryJSON = {\n        country_counts: country_analysis_top_20\n      };\n\n    } else { // top5\n\n      currentCountryJSON = {\n        country_counts: country_analysis_top_5\n      };\n\n    }\n\n    if (!_.isNull(currentCountryJSON) && cholopleth) {\n\n      var extent = [0, d3.max(currentCountryJSON.country_counts, cc => {\n        return cc.count;\n      })]\n\n      var finalDomain = [extent[0],\n      extent[0] + (extent[1] - extent[0]) / 9 * 1,\n      extent[0] + (extent[1] - extent[0]) / 9 * 2,\n      extent[0] + (extent[1] - extent[0]) / 9 * 3,\n      extent[0] + (extent[1] - extent[0]) / 9 * 4,\n      extent[0] + (extent[1] - extent[0]) / 9 * 5,\n      extent[0] + (extent[1] - extent[0]) / 9 * 6,\n      extent[0] + (extent[1] - extent[0]) / 9 * 7,\n      extent[0] + (extent[1] - extent[0]) / 9 * 8,\n      extent[0] + (extent[1] - extent[0]) / 9 * 9];\n      return {\n        opacity: 1,\n        finalDomain: finalDomain\n      }\n    } else {\n      return {\n        opacity: 0,\n        finalDomain: [0, 1]\n      }\n    }\n  }\n\n  render() {\n    let { cholopleth, choloplethMode, currentIndividual } = this.props;\n    console.log(\"cholopleth\", cholopleth, \"choroplethMode\", choloplethMode, \"currentIndividual\", currentIndividual);\n    let result = this.updateCurrentCholopleth(cholopleth, choloplethMode, currentIndividual);\n\n    this.colorScale.domain(result.finalDomain);\n\n    return (\n      <div className=\"sub-legend\" style={{ opacity: result.opacity }}>\n        <div className=\"title\">\n          # of Contribution\n        </div>\n        {\n          result.opacity === 1 ? \n          _.map(result.finalDomain, (val, i) => {\n            if (_.isUndefined(val)) {\n              return null;\n            } else {\n              return (\n                <div key={i} className=\"legend-sub-area\">\n                  <div className=\"color-box\" style={{ backgroundColor: this.colorScale(val) }}>\n                  </div>\n                  <div className=\"value\">\n                    {numberWithDelimiter(Number(val.toFixed(0)))}\n                  </div>\n                </div>\n              );\n            }\n\n\n          }) : null\n        }\n      </div>\n\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n\n    choloplethMode: state.choloplethMode,\n    currentIndividual: state.currentIndividual,\n    cholopleth: state.cholopleth\n    // currentSeq: state.currentSeq,\n    // currentFeature: state.currentFeature,\n    // currentTimeStamp: state.currentTimeStamp\n  }\n}\n\nexport default connect(mapStateToProps)(CholoplethLegend);","import React, { Component } from 'react'\nimport styled from 'styled-components';\nimport mixins from '../stylesheets/mixins';\n\nconst LegendBox = styled.div`\n  background-color: white;\n  border: 1px solid #ccc;\n  padding: 10px;\n  position: absolute;\n  right: 10px;\n  top: 10px;\n  transition: 0.4s opacity;\n  opacity: 0;\n  display: flex;\n\n  @media (max-width: 768px) {\n    right: 0;\n    top: -45px;\n  }\n`;\n\nconst RedCircle = styled.div`\n  width: 12px;\n  height: 12px;\n  border-radius: 20px;\n  background-color: red;\n  margin-top: 3px;\n`;\n\nconst Label = styled.div `\n  margin-left: 7px;\n  ${mixins.LABEL_REGULAR_TYPE}\n  font-size:0.7em;\n  color:#999;\n`;\n\nclass KoreanLegend extends Component {\n  render() {\n    return (\n      <LegendBox style={{ opacity: this.props.show ? 1 : 0 }}>\n        <RedCircle />\n        <Label>\n          Contributed in Korean\n        </Label>\n      </LegendBox>\n    )\n  }\n}\n\nexport default KoreanLegend;","import React, { Component } from 'react'\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport mixins from '../stylesheets/mixins';\nimport world_data from '../constants/world_data.json';\nimport { numberWithDelimiter } from '../utils';\nimport {changeWorldMapIndividual} from '../actions';\nimport _ from 'lodash';\n\nconst Box = styled.div`\n  position: absolute;\n  left: 50%;\n  background-color: white;\n  border: 1px solid #ccc;\n  padding: 10px 5px;\n  font-size:1.1em;\n  top: 50px;\n  transform: translate(-50%, -100%);\n  display: flex;\n  width: 300px;\n\tjustify-content: space-between;\n`;\n\nconst Area = styled.div`\n  width: 50%;\n  padding: 0 5px;\n`;\n\nconst Label = styled.h4`\n  ${mixins.LABEL_BOLD_TYPE}\n  font-size:0.65em;\n  color:#777;\n`;\n\nconst Value = styled.div `\n  font-size: 0.9em;\n  color: black;\n  padding-right: 10px;\n`;\n\nconst SmallSize = styled.span`\n  ${mixins.LABEL_BOLD_TYPE}\n  font-size: 0.7em;   \n  position: relative;\n  top: -1px;\n`;\n\nconst CloseButton = styled.a`\n  position: absolute;\n  right: 8px;\n  top: 1px;\n  ${mixins.LABEL_BOLD_TYPE}\n\n`;\n\n\nclass IndividualInfo extends Component {\n  componentDidMount(){\n    \n  }\n\n  getTop5Countries(currentIndividual) {\n\n    let worldIds = _.map(_.filter(_.sortBy(currentIndividual.country_counts, country => country.count).reverse().splice(0, 5), c => c.count > 0), country => {\n      return {\n        id: country.world_id,\n        count: country.count\n      };\n    });\n\n    let labels = _.map(worldIds, worldId => {\n      let label = _.find(world_data, w => {\n        return w.id === worldId.id\n      });\n\n      label.count = worldId.count;\n\n      return label;\n    });\n\n    return labels;\n  }\n\n  handleClick(e){\n    this.props.dispatch(changeWorldMapIndividual(null));\n  }\n\n  render() {\n    let { currentIndividual } = this.props;\n    let top5Countries = this.getTop5Countries(currentIndividual);\n\n    return (\n      <Box>\n        \n        <CloseButton onClick={this.handleClick.bind(this)} href=\"javascript:void(0);\">\n          ⨯\n        </CloseButton>\n        <Area>\n          <Label>\n            Name\n          </Label>\n          <Value>\n            P{currentIndividual.id}\n          </Value>\n        </Area>\n        <Area>\n          <Label>\n            Top {top5Countries.length} Countries\n          </Label>\n          <Value>\n            {\n              _.map(top5Countries, (c, i) => {\n                return (\n                  <div key={i}>\n                    {c.name_en} <SmallSize>{ numberWithDelimiter(c.count) }</SmallSize>\n                  </div>\n                )\n              })\n            }\n          </Value>\n        </Area>\n      </Box>\n    )\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    currentIndividual: state.currentIndividual\n  }\n};\n\nexport default connect(mapStateToProps)(IndividualInfo);","export const DEFAULT_STATE = {\n  windowWidth: 1024,\n  windowHeight: 768,\n  titleHeader: false,\n  mapLoaded: false,\n  nkTile: false,\n  cholopleth: false,\n  timelineUI: false,\n  textVisualization: false,\n  legend: false,\n  currentSeq: 0,\n  currentFeature: null,\n  currentTimeStamp: 1167609600,\n  zoom: 6,\n  graphMode: \"all\", // all, korean\n  choloplethMode: \"all\", //top20, top5, individual\n  currentIndividual: null,\n  osmUsers: [],\n  osmUsersDataStats: null,\n  responseCategories: [],\n  osmUserHistories: null,\n  osmUserHistoriesIdx: 0,\n  center: [125.75432, 39.03385],\n  selectedTextCategory: {},\n  selectedOsmUserResponse: null\n};\n\nexport const CATEGORIES_COLORS = [\n  \"#9bd1c7\",\n  \"#d8d754\",\n  \"#6258da\",\n  \"#ec8677\",\n  \"#8ab0d0\",\n  \"#f3b670\",\n  \"#bbdb79\",\n  \"#e8a4c8\",\n  \"#ada6a6\",\n  \"#b484b9\",\n  \"#99d182\",\n  \"#8ce2fc\",\n  \"#5f6687\",\n  \"#ce6586\",\n  \"#2e307d\"\n]\n\nexport const INTERESTING_NAMES = [\n  {dataPoint: \"p=4109493330\", id: 4109493330, title: \"위대한 수령 김일성동지 기념비\"},\n  {dataPoint: \"p=3090640091\", id: 3090640091, title: \"평양려관 5층 차집\"},\n  {dataPoint: \"p=5485334795\", id: 5485334795, title: \"사진꽃방 (1층)\"},\n  {dataPoint: \"pg=500783829\", id: 500783829,  title: \"Missile Launchpad\"},\n  {dataPoint: \"pg=408248450\", id: 408248450,  title: \"위대한 수령 김일성동지의 개선연설 자필기념비\"},\n  {dataPoint: \"pg=554071936\", id: 554071936,  title: \"Prison Workers Unit 3 Village\"}\n]\n\nexport const SUBCATEGORY_SELECT = {\n  1: ['Why?', '1'],\n  2: ['How?', '2'],\n  3: ['Comments', '3']\n}\n\n// 1448928000\n// 1448928052","import React, { Component } from 'react'\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport axios from 'axios';\nimport { addTextCategorySelected, removeTextCategorySelected, changeOsmUserReponseData } from '../actions';\nimport _ from 'lodash';\nimport { SUBCATEGORY_SELECT, CATEGORIES_COLORS } from '../constants/defaults';\nimport * as d3 from 'd3';\nimport {TextVisualizationResponses } from './';\n\nconst Fragment = React.Fragment;\nconst Bar = styled.div`\n  position: fixed;\n  z-index: 8;\n  top: 0;\n  opacity: 0;\n  transition: 0.4s opacity;\n  width: 170px;\n\n  section {\n    padding: 10px;\n    margin-bottom: 20px;\n  }\n\n  h3 {\n    font-size: 1.0em;\n    line-height: 1.1;\n    color: black;\n    margin-bottom: 7px;\n    font-weight: 700;\n    text-indent: -4px;\n  }\n\n  p {\n    color: #888;\n    line-height: 1.2;\n    font-family: \"Roboto\", sans-serif;\n    font-size:0.8em;\n  }\n\n  \n`;\n\nconst CategoryLink = styled.a`\n  font-size: 0.7em;\n  display: inline-block;\n  margin-bottom: 6px;\n  margin-left: -5px;\n  padding: 4px;\n  line-height: 1.2;\n  cursor: pointer;\n  background:white;\n  font-family: \"Roboto\", sans-serif;\n  font-weight: 400;\n  color:black;\n`\n\nconst UnCategoryLink = styled.a`\n  font-size: 0.7em;\n  display: inline-block;\n  margin-bottom: 6px;\n  margin-left: -5px;\n  line-height: 1.2;\n  padding: 4px;\n  cursor: pointer;\n  font-family: \"Roboto\", sans-serif;\n  font-weight: 700;\n  color:white;\n  position:relative;\n  padding-right:20px;\n\n  \n  .close-btn {\n    font-size:1.2em;\n\n    top: 1px;\n    right: 6px;\n    position: absolute;\n  }\n`\nconst ArrowArea = styled.div`\n  position: fixed;\n  z-index: 9;\n  opacity: 1;\n  transition: 0.4s opacity;\n  left: 180px;\n  height: 32px;\n  width: calc(100% - 190px);\n  bottom: 20px;\n  display: flex;\n  justify-content: space-between;\n\n\n  @media (max-width: 768px) {\n    left: 10px;\n    height: 32px;\n    width: calc(100% - 20px);\n    bottom: 10px;\n  }\n  \n  \n  hr {\n    border:none;\n    position:absolute;\n    top:20px;\n    border:1px solid #888;\n    width:100%;\n  }\n`;\n\n\nclass TextVisualization extends Component {\n  \n  componentDidMount(){\n    axios.all([axios.get('https://nkosm.s3.amazonaws.com/osm_users.json')])\n    .then(axios.spread((response) => {\n      if (response.data.success) {\n        this.props.dispatch(changeOsmUserReponseData(response.data.osm_users, response.data.response_categories));\n      }\n    }));\n\n  }\n  \n  handleAddTextCategory(c) {\n    let { selectedTextCategory } = this.props;\n    \n    if ( !_.isUndefined(selectedTextCategory[c.id]) ) {\n\n      this.props.dispatch(removeTextCategorySelected(c.id));\n    } else {\n    \n      this.props.dispatch(addTextCategorySelected(c.id, {id: c.id }));\n    \n    }\n  }\n\n  render() {\n    let { windowWidth, textVisualization, selectedTextCategory, responseCategories } = this.props;\n    let subCategories = _.groupBy(responseCategories, c => { return c.subcategory_id; });\n    let colorScale = d3.scaleOrdinal().domain(_.map(responseCategories, rc => { return rc.id})).range(CATEGORIES_COLORS);\n    \n    return (\n      <Fragment>\n        {\n          windowWidth > 768 ? \n          <Bar style={{left: 0, opacity: textVisualization ? 1 : 0}}>\n            {\n              _.map(subCategories, (categories, key) => {\n                return (\n                  <section key={key}>\n                    <h3>\n                      { SUBCATEGORY_SELECT[Number(key)][0] }\n                    </h3>\n                    {\n                      _.map(categories, c => {\n                  \n                        let selected = _.isUndefined(selectedTextCategory[c.id]);\n                        return selected ? \n                          <CategoryLink onClick={this.handleAddTextCategory.bind(this, c)} key={c.id}>{c.category_name}</CategoryLink> : \n                          <UnCategoryLink style={{backgroundColor: colorScale(c.id)}} onClick={this.handleAddTextCategory.bind(this, c)} key={c.id}>\n                            {c.category_name} <span className=\"close-btn\">⨯</span>\n                          </UnCategoryLink>;\n                      })\n                    }\n                  </section>\n                  \n                );\n              })\n            }\n          </Bar> : null\n        }\n        \n        \n       \n\n        <ArrowArea style={{opacity: textVisualization ? 1 : 0}}>\n          <img src={`${process.env.PUBLIC_URL}/assets/more_data_arrow.svg`} alt=\"more data contributed\" />\n          <img src={`${process.env.PUBLIC_URL}/assets/less_data_arrow.svg`} alt=\"less data contributed\" />\n        </ArrowArea>\n\n        {/* <Bar style={{right: 0, opacity: textVisualization ? 1 : 0}}>\n          <section>\n            <h3>\n              Responses<br />\n              211\n            </h3>\n            <p>\n              from 889<br />\n              contributors\n            </p>\n          </section>\n        </Bar> */}\n      </Fragment>\n    )\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    windowWidth: state.windowWidth,\n    textVisualization: state.textVisualization,\n    selectedTextCategory: state.selectedTextCategory,\n    responseCategories: state.responseCategories\n\n  }\n}\nexport default connect(mapStateToProps)(TextVisualization);","import React, { Component } from 'react'\nimport styled from 'styled-components';\nimport { UserResponse } from './';\nimport { connect } from 'react-redux';\nimport * as d3 from 'd3';\nimport _ from 'lodash';\nimport { CATEGORIES_COLORS } from '../constants/defaults';\n\nconst GridBox = styled.div`\n  column-count: 15;\n  column-gap: 5px;\n  /* height: 2000px; */\n  width: calc(100% - 10px);\n\n\n  @media (max-width: 768px) {\n\n    column-count: 10;\n    column-gap: 1px;\n  }\n\n`;\n\nconst Main = styled.div`\n  /* left: 180px; */\n  position: sticky;\n  z-index: 8;\n  margin-left: 180px;\n  top: 10px;\n  transition: 0.4s opacity;\n  width: calc(100% - 180px);\n  /* top: 20px; */\n  \n  @media (max-width: 768px) {\n\n    margin-left: 5px;\n    top: 10px;\n    width: 100%;\n    height: calc(100vh - 15px);\n    overflow: hidden;\n  }\n  \n\n  /* padding-top: 9px; */\n`;\n\nclass TextVisualizationResponses extends Component {\n\n  constructor(props){\n    super(props);\n\n    this.fontSizeScale = d3.scaleLinear().domain([1024, 1280, 1440, 2560]).clamp(true).range([2.2, 2.4, 3.2, 5]);\n    this.lineHeightScale = d3.scaleLinear().domain([1024, 1280, 1440, 2560]).clamp(true).range([1.7, 1.7, 1.5, 1.4]);\n  }\n  \n  render() {\n\n    let { osmUsers, responseCategories, textVisualization, windowWidth } = this.props;\n    let colorScale = d3.scaleOrdinal().domain(_.map(responseCategories, rc => { return rc.id})).range(CATEGORIES_COLORS);\n\n    return (\n      <Main style={{opacity: textVisualization ? 1 : 0 }}>\n        <GridBox>\n          {\n            _.map(osmUsers, (ou, i) => {\n              return (\n                <UserResponse {...ou} fontSize={this.fontSizeScale(windowWidth)} lineHeight={Math.ceil(this.lineHeightScale(windowWidth) * 10)/10} key={i} colorScale={colorScale} />\n              )\n            })\n          }\n        </GridBox>\n      </Main>\n    )\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    osmUsers: state.osmUsers,\n    windowWidth: state.windowWidth,\n    textVisualization: state.textVisualization,\n    responseCategories: state.responseCategories,\n    selectedTextCategory: state.selectedTextCategory\n  }\n}\n\nexport default connect(mapStateToProps)(TextVisualizationResponses);","import React, { Component } from 'react'\nimport _ from 'lodash';\nimport styled from 'styled-components';\nimport { changeSelectedOsmUserResponse } from '../actions';\nimport { connect } from 'react-redux';\nimport chroma from 'chroma-js';\nimport * as d3 from 'd3';\n\nconst TextSpan = styled.span`\n  word-break: break-word;\n\n  transition: 0.4s all;\n\n`;\n\nconst RespArea = styled.div`\n  margin-bottom: 5px;\n  font-size: 4px;\n  line-height: 1.5;\n  cursor:pointer;\n  transition: 0.4s all;\n  -webkit-column-break-inside: avoid;\n  page-break-inside: avoid;\n  break-inside: avoid;\n\n  &:hover {\n    background-color: white;\n  }\n`;\n\nclass UserResponse extends Component {\n  handleClick(response){\n    this.props.dispatch(changeSelectedOsmUserResponse({\n      ...this.props\n    })) \n  }\n\n  render() {\n    let { selectedTextCategory, fontSize, lineHeight } = this.props;\n    return (\n      <RespArea style={{ fontSize: `${fontSize}px`, lineHeight: lineHeight }} onClick={this.handleClick.bind(this)}>\n        {\n          _.map(this.props.responses, response => {\n            let selected = !_.isUndefined(selectedTextCategory[response.category_id]);\n            \n            return (\n              <TextSpan key={response.id} style={{\n                color: selected ? this.props.colorScale(response.category_id) : \"#999\",\n                backgroundColor: selected ? this.props.colorScale(response.category_id) : \"transparent\"\n              }}>\n                { response.resp }\n              </TextSpan> \n            );\n          })\n        }\n      </RespArea>\n    )\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    windowWidth: state.windowWidth,\n    selectedTextCategory: state.selectedTextCategory\n  }\n};\n\nexport default connect(mapStateToProps)(UserResponse);","import React, { Component } from 'react'\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport _ from 'lodash';\nimport mixins from '../stylesheets/mixins';\nimport { Gutter } from '../stylesheets/components';\nimport { changeSelectedOsmUserResponse, changeOsmUserHistories, changeOsmUserHistoriesIdx } from '../actions';\nimport axios from 'axios';\nimport * as d3 from 'd3';\nimport moment from 'moment';\nimport { CATEGORIES_COLORS } from '../constants/defaults';\nimport { numberWithDelimiter } from '../utils';\nimport chroma from 'chroma-js';\n\nconst Fragment = React.Fragment;\nconst RespContainer = styled.div`\n\n  position: fixed;\n  bottom: 10px;\n  left: 10px;\n  z-index:20;\n  background-color: white;\n  padding: 10px;\n  min-width: 308px;\n  width: 25%;\n  border: 1px solid #ccc;\n  line-height: 1.6;\n  word-break: break-word;\n\n\n  @media (max-width: 768px) {\n    top: 50px;\n    left: 13px;\n    z-index: 20;\n    bottom: auto;\n    background-color: white;\n    padding: 10px;\n    min-width: 308px;\n    width: calc(100% - 45px);\n  }\n\n  .rela-cont {\n    position:relative;\n  }\n\n  .resp-content {\n    \n    max-height: 300px;\n    overflow-y: scroll;\n    line-height: 1.5;\n    padding-bottom: 10px;\n    font-size:0.9em;\n\n  }\n  span {\n    padding: 2px 4px;\n  }\n\n  .close-btn {\n    position:absolute;\n    right: 10px;\n    top: 2px;\n  }\n`;\n\nconst DataInfoContainer = styled.div`\n  position: fixed;\n  bottom: 10px;\n  right: 10px;\n  z-index:20;\n  background-color: white;\n  border: 1px solid #ccc;\n  padding: 10px;\n`;\n\n\nconst POIBox = styled.div`\n  color: black;\n  display:flex;\n  justify-content: space-between;\n  width: 250px;\n`;\n\nconst TitleArea = styled.div`\n  width:125px;\n`;\n\nconst Label = styled.h4`\n  ${mixins.LABEL_BOLD_TYPE}\n  font-size:0.7em;\n  color:#777; \n  margin-bottom: 5px;\n`;\n\nconst Value = styled.div`\n  font-size: 0.9em;\n  color: black;\n  padding-right: 10px;\n`;\n\nconst Date = styled.div`\n  ${mixins.LABEL_REGULAR_TYPE}\n  font-size:0.8em;\n  margin-top: -3px;\n  color: #AAA;\n`;\n\nconst CategorySpan = styled.div`\n  font-size: 0.7em;\n  font-family: \"Roboto\", sans-serif;\n  font-weight: 400;\n  padding: 2px 5px;\n  line-height: 1.6;\n  margin-bottom: 3px;\n`\n\nconst RespInfoArea = styled.div`\n  display: flex;\n  /* justify-content: space-between; */\n  flex-wrap: wrap;\n  padding: 10px 0;\n  border-top: 1px solid #ccc;\n  background: white;\n  width: 100%;\n\n\n  div.inner {\n    width: calc(50% - 10px);\n  }\n\n\n  div.inner {\n    line-height: 1.6;\n  }\n\n  i {\n    font-style: italic;\n  }\n`;\n\nconst ContributorInfoArea = styled.div`\n  text-align:right;\n  font-size:0.8em;\n  font-family: \"Roboto\", sans-serif;\n  color:#777;\n\n`;\n\nclass SelectedResponseViewer extends Component {\n  constructor(props){\n    super(props);\n    \n    this.intervalId = null;\n  }\n  componentDidMount(){\n    document.body.style.overflow = 'hidden';\n\n    this.loadOsmUserSampleData();\n  }\n\n  loadOsmUserSampleData(){\n\n    let { selectedOsmUserResponse } = this.props;\n    axios.get(`https://nkosm.wonyoung.so/api/osm_users/${selectedOsmUserResponse.id}.json`)\n      .then((response) => {\n        this.props.dispatch(changeOsmUserHistories(response.data.osm_user.histories));\n\n        // response.data.osm_user.histories\n\n      })\n      .catch(function (error) {\n        console.log(error);\n      })\n  }\n\n  componentWillUnmount(){\n    document.body.style.overflow = 'auto';\n    // clearInterval(this.intervalId);\n  }\n\n  handleClose(e){\n    this.props.dispatch(changeSelectedOsmUserResponse(null));\n    this.props.dispatch(changeOsmUserHistories(null));\n  }\n\n  getSelectedColorCategories(selectedOsmUserResponse, responseCategories, colorScale){\n    let respCategories = _.uniq(_.compact(_.map(selectedOsmUserResponse.responses, response => {\n      return response.category_id === 12 ? null : response.category_id\n    })));\n\n    let result = [];\n    _.each(respCategories, respCategory => {\n      let c = _.find(responseCategories, rc => { return rc.id === respCategory });\n      result.push({\n        ...c,\n        color: colorScale(c.id)\n      });\n    })\n\n    return result;\n  }\n  \n  componentDidUpdate(prevProps){\n   \n  }\n\n  render() {\n    let { selectedOsmUserResponse, responseCategories, osmUserHistories, osmUserHistoriesIdx } = this.props;\n    // debugger;\n    let colorScale = d3.scaleOrdinal().domain(_.map(responseCategories, rc => { return rc.id})).range(CATEGORIES_COLORS);\n    let selectedColorCategories = this.getSelectedColorCategories(selectedOsmUserResponse, responseCategories, colorScale);\n    let osmHistory;\n\n    if (!_.isNull(osmUserHistories)) {\n      if (!_.isUndefined(osmUserHistories[osmUserHistoriesIdx])){\n        osmHistory = osmUserHistories[osmUserHistoriesIdx].features[0];\n\n      }\n    }\n    \n    return (\n      <Fragment>\n\n        <RespContainer>\n          <div className='rela-cont'>\n            <button className=\"close-btn\" onClick={this.handleClose.bind(this)}><img src=\"./assets/close_btn.svg\" alt=\"close_btn\" /></button>\n\n            <div className=\"resp-content\">\n              \n              <Gutter h={25}/>\n\n              {\n                _.map(selectedOsmUserResponse.responses, (r, i) => {\n                  \n                  let bgColor = r.category_id === 12 ? \"transparent\": colorScale(r.category_id);\n                  let color = bgColor === \"transparent\" ? \"black\" : \"white\";\n                  return (\n                    <span key={i} style={{backgroundColor: bgColor, color: color }}>\n                      {r.resp}\n                    </span>\n                  )\n                })\n              }\n            \n\n            </div>\n\n            <RespInfoArea>\n\n              {\n                _.map(selectedColorCategories, scc => {\n                  return (\n                    <CategorySpan key={scc.id} style={{ backgroundColor: scc.color, color: \"white\" }}>\n                      {scc.category_name}\n                    </CategorySpan>\n                  )\n                })\n              }\n            </RespInfoArea>\n            <ContributorInfoArea>\n                P{ selectedOsmUserResponse.id }<br/>\n                <i>{ numberWithDelimiter(selectedOsmUserResponse.all_count) } Contribution</i>\n            </ContributorInfoArea>\n          </div>\n          \n          \n        \n        </RespContainer>\n        {\n          !_.isUndefined(osmHistory) ?\n          <DataInfoContainer>\n            <POIBox>\n              <TitleArea>\n                <Label>\n                  Name\n              </Label>\n                <Value>\n                    {_.isNull(osmHistory.properties.name_en) ? (_.isNull(osmHistory.properties.name) ? \"–\" : osmHistory.properties.name) : osmHistory.properties.name_en }\n                </Value>\n              </TitleArea>\n              <TitleArea>\n                <Label>\n                  Contributed Date\n                </Label>\n                <Date>\n                  {moment.unix(osmHistory.properties.osm_timestamp).format(\"MMMM DD, YYYY\")}\n                </Date>\n              </TitleArea>\n            </POIBox>\n          </DataInfoContainer> : null\n        }\n        \n      </Fragment>\n    )\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    selectedOsmUserResponse: state.selectedOsmUserResponse,\n    responseCategories: state.responseCategories,\n    osmUserHistories: state.osmUserHistories,\n    osmUserHistoriesIdx: state.osmUserHistoriesIdx\n  }\n};\n\nexport default connect(mapStateToProps)(SelectedResponseViewer);","import React, { Component } from 'react'\nimport styled from 'styled-components';\nimport mixins from '../stylesheets/mixins';\nimport _ from 'lodash';\nimport { numberWithDelimiter } from '../utils';\n\nconst LegendBox = styled.div`\n  background-color: white;\n  border: 1px solid #ccc;\n  padding: 10px;\n  position: absolute;\n  right: 10px;\n  top: 10px;\n  transition: 0.4s opacity;\n  opacity: 0;\n  \n\n\n  @media (max-width: 768px) {\n    right: 0;\n    top: -100px;\n  }\n\n  h4 {\n    ${mixins.LABEL_BOLD_TYPE}\n    font-size:0.7em;\n    color:#999;\n  }\n\n  div.legend-inner { \n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    justify-content: flex-start;\n    align-items: center;\n    align-content: stretch;    \n    width: 200px;\n\n  }\n  div.legend {\n    width: 65px;\n    display: flex;\n  }\n`;\n\nconst Circle = styled.div`\n  width: 12px;\n  height: 12px;\n  border-radius: 20px;\n  margin-top: 3px;\n`;\n\nconst Label = styled.div `\n  margin-left: 7px;\n  ${mixins.LABEL_REGULAR_TYPE}\n  font-size:0.7em;\n  color:#999;\n`;\n\nclass NumberContributionLegend extends Component {\n  render() {\n    \n    return (\n      <LegendBox style={{ opacity: this.props.show ? 1 : 0 }}>\n        <h4>\n          # of Contribution \n        </h4>\n        \n        <div className=\"legend-inner\">\n          \n          {\n            _.map(this.props.scale.domain(), (d, i) => {\n              return (\n                <div className=\"legend\" key={i}>\n                  <Circle style={{ backgroundColor: this.props.scale(d) }} />\n                  <Label>\n                    { numberWithDelimiter(d) }\n                  </Label>\n                </div>\n              )\n            })\n          }\n\n        </div>\n      </LegendBox>\n    )\n  }\n}\n\nexport default NumberContributionLegend;","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport mixins from '../../stylesheets/mixins';\nimport { SectionContainer } from '../../stylesheets/components';\n\nconst SubtitleKo = styled.div`\n  ${mixins.BOLD_TYPE}\n  font-size: 0.85em;\n  text-align: center;\n`;\n\nconst IntroContainer = styled(SectionContainer)`\n  background-image: linear-gradient(-180deg, rgba(231, 247, 251, 0.83) 22%, rgba(231, 247, 251, 0.00) 81%);\n`;\n\nconst TitleContainer = styled.div`\n  width: 600px;\n  margin: 0 auto;\n  padding-top: 120px;\n\n  @media (max-width: 768px) {\n    width:100%;\n  }\n`;\n\nconst H1 = styled.h1`\n  ${mixins.TITLE_TYPE}\n  text-align: center;\n  font-size:2.5em;\n  line-height: 1.2;\n  margin: 10px 0;\n\n  @media (max-width: 768px) {\n    font-size:2.0em;\n  }\n`;\n\nconst SubParagraph = styled.p`\n  ${mixins.BOLD_TYPE}\n  text-align: center;\n  font-size:1.5em;\n  line-height: 1.35;\n  margin-top: 10px;\n\n  @media (max-width: 768px) {\n    font-size:1.0em;\n  }\n\n`;\n\nconst DateBox = styled.div`\n  ${mixins.LABEL_REGULAR_TYPE}\n  border: 1px solid #CCCCCC;\n  padding: 5px;\n  text-align: center;\n  background-color: white;\n  display: block;\n  font-size:0.8em;\n  line-height:1.5;\n  color: #888;\n\n  text-align: center;\n  margin: 20px auto;\n  width: 105px;\n\n`;\n\nconst Prompt = styled.div`\n  position: absolute;\n  width: 48px;\n  height: 26px;\n  bottom: 3rem;\n  left: 50%;\n  margin-left: -24px;\n  animation: bounce 2s infinite;\n  opacity: ${props => props.titleHeader ? 0 : 1};\n  transition: .5s opacity;\n`;\n\nclass Intro extends Component {\n  render() {\n    let { titleHeader } = this.props;\n    return (\n      <IntroContainer className=\"trigger\" data-action-name=\"changeIntro\" style={{ height: this.props.windowHeight}}>\n      \n        <TitleContainer>\n          <SubtitleKo>\n            북한의 지도 제작자\n          </SubtitleKo>\n\n          <H1>\n            Cartographers <br/>\n            of North Korea\n          </H1>\n\n          <SubParagraph>\n            An analysis of the OpenStreetMap data in North Korea: <br/>\n            Who are the contributors? How and Why did they contribute to North Korea?\n          </SubParagraph>\n\n          <DateBox>\n            May 12th<br/>Wonyoung So\n          </DateBox>\n        </TitleContainer>\n\n        <Prompt titleHeader={titleHeader}>\n          <svg x=\"0px\" y=\"0px\" width=\"48px\" height=\"26px\" viewBox=\"0 0 48 26\" enableBackground=\"new 0 0 48 26\">\n            <g>\n              <path fill=\"#222\" d=\"M24.146,26c-0.53,0-1.039-0.284-1.414-0.659L0.586,3.158c-0.781-0.781-0.781-2.066,0-2.846\n                c0.78-0.781,2.048-0.791,2.828-0.009L24.137,21.02L44.576,0.305c0.776-0.787,2.042-0.796,2.829-0.021\n                c0.786,0.776,0.794,2.042,0.019,2.828L25.57,25.332C25.196,25.711,24.686,26,24.153,26C24.151,26,24.149,26,24.146,26z\"></path>\n            </g>\n          </svg>\n        </Prompt>\n\n      </IntroContainer>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    windowHeight: state.windowHeight,\n    titleHeader: state.titleHeader\n  }\n}\n\nexport default connect(mapStateToProps)(Intro);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport {SectionContainer, NonSticky} from '../../stylesheets/components';\n\nconst IntroContainer = styled(SectionContainer)``;\n\nclass SectionFirst extends Component {\n  render() {\n    return (\n      <IntroContainer style={{ \n        height: this.props.windowHeight * 0.7\n      }} className=\"trigger\" data-action-name=\"changeEmptyMap\">\n        <NonSticky>\n          The population of North Korea only has extremely limited internet access; while a select group of people can access the internet for research purposes, almost everybody else can only access a countrywide intranet called Kwangmyong.\n        </NonSticky>\n\n      </IntroContainer>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    windowHeight: state.windowHeight\n  }\n}\n\nexport default connect(mapStateToProps)(SectionFirst);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport {SectionContainer, Box, Sticky } from '../../stylesheets/components';\n\nconst SecondContainer = styled(SectionContainer)`\n  padding: 200px 0;\n`;\n\nclass SectionSecond extends Component {\n  componentDidMount(){\n\n  }\n  \n  render() {\n    return (\n      <SecondContainer className=\"trigger\" data-action-name=\"changeChronicleMap\">\n        <Sticky>\n          <Box>\n            For a country that is closed to the internet, however, the quality of OSM data in North Korea is extraordinary: 324,415 data points drawn by 889 contributors since 2007.\n          </Box>\n        </Sticky>\n\n        \n        <div style={{ height: this.props.windowHeight * 1.5}}>\n        </div>\n      </SecondContainer>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    windowHeight: state.windowHeight\n  }\n}\n\nexport default connect(mapStateToProps)(SectionSecond);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { ContributorsGraph } from '../';\nimport styled from 'styled-components';\nimport mixins from '../../stylesheets/mixins';\nimport {SectionContainer,} from '../../stylesheets/components';\n\nconst SectionThirdContainer = styled(SectionContainer)`\n`;\n\nconst GradientSticky = styled.div`\n  position: sticky;\n  background-image: linear-gradient(-180deg, rgba(231, 247, 251, 0.83) 22%, rgba(231, 247, 251, 0.00) 81%);\n  top: 0;\n  width: 100%;\n  z-index:2;\n  height: ${props => props.height }px;\n`;\n\nconst NonSticky = styled.div`\n  width: 400px;\n  position:relative;\n  margin: 0 auto;\n  z-index:5;\n  ${mixins.BOLD_TYPE}\n  font-size:1.2em;\n  border: 1px solid #BBB;\n  padding: 10px 15px;\n  background: #E7F7FB;\n  color: black;\n  @media (max-width: 768px) {\n    width: calc(100% - 40px);\n  }\n`;\n\nconst StickyGraphArea = styled.div`\n  position:sticky;\n  z-index:4;\n  top: 50%;\n  transform: translate(0, -50%);\n`;\n\nclass SectionThird extends Component {\n  render() {\n    let { windowHeight, windowWidth} = this.props;\n\n    let graphHeight = windowHeight * 0.4 < 400 ? 400 : windowHeight * 0.4;\n\n    let graphWidth = windowWidth < 768 ? windowWidth - 20 : this.props.windowWidth * 0.8;\n    let radius = windowWidth < 768 ? 2 : 4;\n    return (\n      <SectionThirdContainer>\n        <GradientSticky height={this.props.windowHeight} />\n        <NonSticky className=\"trigger\" data-action-name=\"initGraphScene\">\n          Although it is hard to know about the contributors only by the OSM data, but the data shows some characteristics about them. First, the plot shows that the top 10 contributors drew 61 percent of the map, thus forming a power-law graph.\n        </NonSticky>\n\n        <div style={{\n          height: this.props.windowHeight * 0.2\n        }}>\n        </div>\n\n\n        <StickyGraphArea>\n          <ContributorsGraph \n            radius={radius}\n            padding={radius * 1.5}\n            width={graphWidth} \n            height={graphHeight} /> \n        </StickyGraphArea>\n        \n        <div style={{\n          height: this.props.windowHeight * 0.8\n        }}>\n        </div>\n        \n        <NonSticky className=\"trigger\" data-action-name=\"changeGraphKorean\">\n          Second, 62% of the contributors labeled map objects in Korean, including the top five contributors.\n        </NonSticky>\n        \n\n        <div style={{\n          height: this.props.windowHeight * 1.5\n        }}>\n        </div>\n\n      </SectionThirdContainer>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    windowWidth: state.windowWidth,\n    windowHeight: state.windowHeight\n  }\n}\n\nexport default connect(mapStateToProps)(SectionThird);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport { ContributorsGraph } from '../';\nimport {SectionContainer,  NonSticky} from '../../stylesheets/components';\n\nconst SectionFourthContainer = styled(SectionContainer)`\n`;\n\nconst Gutter = styled.div`\n  height: ${props => props.height }px;\n`;\n\nconst StickyBottomGraphContainer = styled.div`\n  position: sticky;\n  top: ${props => props.graphStickyTop}px;\n`;\n\n\nclass SectionFourth extends Component {\n  render() {\n    let { windowWidth, windowHeight } = this.props;\n    let minHeight = 350;\n    let graphHeight = windowWidth < 768 ? minHeight : windowHeight * 0.3;\n\n    let graphWidth = windowWidth < 768 ? windowWidth - 20 : windowWidth * 0.8;\n    let radius = windowWidth < 768 ? 1.5 : 2;\n    let graphStickyTop =  windowWidth < 768 ? windowHeight - minHeight - 10 : windowHeight - (windowHeight * 0.3) - 10;\n\n    return (\n      <SectionFourthContainer style={{ height: this.props.windowHeight * 3.5}}>\n        <NonSticky className=\"trigger\" data-action-name=\"initWorldMap\">\n          Contributors' activity can also be estimated by means of OSM changesets, which are a history of each user’s past contributions. Using these changesets, one can see which regions other than North Korea contributors have also worked on. \n        </NonSticky>\n        \n\n        <Gutter height={150} />\n\n        <StickyBottomGraphContainer graphStickyTop={graphStickyTop} style={{ height: graphHeight }}>\n          <ContributorsGraph \n            radius={radius}\n            padding={radius * 1.5}\n            width={graphWidth} \n            height={graphHeight} />\n        </StickyBottomGraphContainer>\n        \n        <Gutter height={this.props.windowHeight * 0.5} />\n\n        <NonSticky className=\"trigger\" data-action-name=\"changeWorldMapHeavyContributor\">\n          For instance, the top 20 contributors who used Korean to label map objects also contributed to the OSM dataset for China, Germany, India, the United States, and South Korea.\n        </NonSticky>  \n        \n\n        <Gutter height={ this.props.windowHeight } />\n\n\n        <NonSticky className=\"trigger\" data-action-name=\"changeWorldMapHeaviestContributor\">\n          For the top five contributors, this list changes slightly: India, Germany, Ukraine, Russia, and Japan.\n        </NonSticky>\n      </SectionFourthContainer>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    windowHeight: state.windowHeight,\n    windowWidth: state.windowWidth\n  }\n}\n\nexport default connect(mapStateToProps)(SectionFourth);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport {SectionContainer, NonSticky} from '../../stylesheets/components';\n\n\nconst SectionFifthContainer = styled(SectionContainer)`\n  background-image: linear-gradient(-180deg, rgba(231, 247, 251, 0.83) 22%, rgba(231, 247, 251, 0.00) 81%);\n`;\n\n\nconst Gutter = styled.div`\n  height: ${props => props.height }px;\n`;\n\nconst NonStickyFinal = styled(NonSticky)`\n  width: 800px;\n`;\n\nconst MethodologyTitle = styled.h4`\n  font-size:0.7em;\n  color: #777;\n  line-height:1.2;\n`;\n\nconst MethodologyPG = styled.p`\n  font-size:0.7em;\n  color: #777;\n  width: 60%;\n`;\n\nclass SectionFifth extends Component {\n  render() {\n    return (\n      <SectionFifthContainer style={{height: this.props.windowHeight}}>\n        <Gutter height={100}></Gutter>\n        <NonStickyFinal className=\"trigger\" data-action-name=\"final\">\n          Although most cartographers of North Korea do not live in the country, they are motivated by issues there. Like data analysts and investigative journalists, they combine information obtained from different sources by a variety of methods to produce place-level knowledge remotely. However, because of the inherent limitations of remotely contributed data, it is questionable whether these strategies can be applied to other crowdsourced projects. We should also consider who ultimately benefits from the OSM process. As mapping is a combination of technical, political, and social capabilities and intentions and open data can be accessed not only by citizens but also by institutions, unexpected outcomes are frequently observed.\n          \n          <Gutter height={50}></Gutter>\n          <MethodologyTitle>\n            * Methodology\n          </MethodologyTitle>\n          <MethodologyPG>\n            OpenStreetMap data is used for the research. The OSM data is under the Open Database License (ODbL) version 1.0 share-alike license. For aggregating the changeset data, I used the centroid point of each changeset boundary. All contributors' screen name is anonymized for protecting the individual privacy.\n          </MethodologyPG>\n        </NonStickyFinal>\n      </SectionFifthContainer>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    windowHeight: state.windowHeight\n  }\n}\n\nexport default connect(mapStateToProps)(SectionFifth);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { InterestingPOIs } from '../';\nimport styled from 'styled-components';\nimport mixins from '../../stylesheets/mixins';\nimport { SectionContainer, Box, Sticky } from '../../stylesheets/components';\nimport interestingPOIs from '../../constants/interesting_pois.json';\nimport _ from 'lodash';\n\nconst SecondContainer = styled(SectionContainer)`\n  margin: 200px 0;\n`;\n\nclass SectionOddPOIs extends Component {\n  render() {\n    var interestingPOIs2 = _.shuffle(interestingPOIs).splice(0, 5);\n\n    return (\n      <SecondContainer>\n        <Sticky className=\"trigger\" data-action-name=\"wrapupChronicleMap\">\n          <Box>\n            It is particularly interesting to note that there are a number of street-level points of interests (POIs), as POIs are regarded as information that only the local people can contribute.\n          </Box>\n        </Sticky>\n        \n        <div style={{ height: this.props.windowHeight}}>\n        </div>\n\n        {\n          _.map(interestingPOIs2, (interestingPOI, i) => {\n            return (\n              <InterestingPOIs {...interestingPOI} key={i}  />\n            )\n          })\n        }\n      </SecondContainer>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    windowHeight: state.windowHeight\n  }\n}\n\nexport default connect(mapStateToProps)(SectionOddPOIs);","import React, { Component } from 'react'\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport { TextVisualizationResponses } from '../';\nimport {SectionContainer,  NonSticky, Gutter } from '../../stylesheets/components';\nimport _ from 'lodash';\n\nconst SectionTextContainer = styled(SectionContainer)`\n  transition: 0.4s all;\n  background: rgba(231, 247, 251);\n  opacity: 1;\n\n  &.hide {\n    opacity: 0;\n    pointer-events: none;\n  }\n`;\n\n\n\nclass SectionText extends Component {\n  render() {\n    let { selectedOsmUserResponse } = this.props;\n    return (\n      <SectionTextContainer className={selectedOsmUserResponse ? \"hide\" : \"\" } style={{ height: 8000}}>\n        <div style={{ height: this.props.windowHeight }}></div>\n    \n\n        <NonSticky className=\"trigger\" data-action-name=\"initTextVisualization\" style={{ zIndex: 11 }}>\n          To know more about their motivations and mapping strategies, we sent a letter to all of the contributors; here are the responses from 211 contributors.\n        </NonSticky>\n        <Gutter h={200} />\n        <TextVisualizationResponses />\n        <Gutter h={500} />\n        <NonSticky className=\"trigger\" data-action-name=\"changeTextVisualizationWhy\" style={{ zIndex: 11 }}>\n          First, although the contributors' motivation is mostly for fun and pure curiosity—such as searching for empty space in OSM—, they were motivated by diverse reasons; in particular, with the respect of advocating open mapping, they wanted North Koreans to use the map in the near future, such as for escaping their territory. \n        </NonSticky>\n        <Gutter h={1500} />\n        <NonSticky className=\"trigger\" data-action-name=\"changeTextVisualizationHow\" style={{ zIndex: 11 }}>\n          Contributors mostly use satellite imagery to contribute data to North Korea, as OpenStreetMap provides Microsoft Bing satellite images. However, some contributors have first-hand knowledge as they have been to Pyeongyang. Moreover, they often combine resources on the internet to contribute street-level information to the OSM.\n        </NonSticky>\n         <Gutter h={1500} />\n        <NonSticky className=\"trigger\" data-action-name=\"changeTextVisualizationStory\" style={{ zIndex: 11 }}>\n          Some contributors have been interested in North Korea because of similar national history (e.g., German citizens) or they have personal history (e.g., their father was deployed to the Korean War), thus they have followed the news about North Korea. They have some thought about the reunification of the Korean peninsula. To explore more, please toggle and click to see individual responses.\n        </NonSticky>\n\n      </SectionTextContainer>\n    )\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    windowHeight: state.windowHeight,\n    selectedOsmUserResponse: !_.isNull(state.selectedOsmUserResponse)\n  }\n}\n\nexport default connect(mapStateToProps)(SectionText);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { MapContainer, TextVisualization, SelectedResponseViewer, TitleHeader, TimelineScroller, CholoplethLegend } from '../components';\nimport { changeGraphKorean, changeIntro,  wrapupChronicleMap, changeEmptyMap, changeChronicleMap, initGraphScene, changeCurrentFeature, changeCurrentTimeStamp, initWorldMap, changeWorldMapHeaviestContributor, changeWorldMapHeavyContributor, addTextCategorySelected, changeTextVisualization, removeAllTextCategories, changeOsmUsersDataStats } from '../actions';\nimport 'intersection-observer';\nimport scrollama from 'scrollama';\nimport { Intro, SectionFirst, SectionSecond, SectionThird, SectionFourth, SectionFifth, SectionOddPOIs, SectionText } from '../components/sections';\nimport _ from 'lodash';\nimport interestingPOIs from '../constants/interesting_pois.json';\nimport { scaleLinear } from 'd3';\nimport axios from 'axios';\n\nconst Fragment = React.Fragment;\n\nclass Home extends Component {\n  constructor(props){\n    super(props);\n\n    this.timeScale = scaleLinear().domain([0, 1]).clamp(true).range([1184971551, 1539016223]);\n    this.introZoomLevelScale = scaleLinear()\n      .domain([\n        375, \n        667, \n        750, \n        800, \n        1440\n      ])\n      .range ([\n        5.129678844315936 - 0.1,\n        5.95692370701329 - 0.1,\n        6.169505942965738 - 0.1,\n        6.285137881074422 - 0.1,\n        7.083247699254196 - 0.1\n      ]);\n\n    this.timelineZoomLevelScale = scaleLinear()\n      .domain([\n        375, \n        667, \n        750, \n        800, \n        1440\n      ])\n      .range ([\n        5.129678844315936,\n        5.95692370701329,\n        6.169505942965738,\n        6.285137881074422,\n        7.083247699254196\n      ]);\n\n    this.worldMapZoomLevelScale = scaleLinear()\n      .domain([\n        375,\n        667,\n        750,\n        800,\n        1440\n      ])\n      .range([\n        0.8913299194094557,\n        0.8913299194094557,\n        1.04073926761343,\n        1.234294902868799,\n        1.234294902868799\n      ]);\n\n  }\n  componentDidMount(){\n    document.body.style.overflowY = \"hidden\";\n  }\n\n  loadData(){\n    axios.all([axios.get('https://nkosm.s3.amazonaws.com/summaries.json')])\n    .then(axios.spread((response) => {\n      if (response.data.success) {\n        this.props.dispatch(changeOsmUsersDataStats(response.data));\n      }\n    }));\n  }\n\n  componentDidUpdate(prevProps, prevState){\n    if (prevProps.mapLoaded !== this.props.mapLoaded && this.props.mapLoaded) {\n\n    this.loadData();\n\n    this.scroller = scrollama();\n    this.scroller.setup({\n      step: '.trigger',\n      container: '.scroll-container',\n      offset: 0.8,\n      order: true,\n      progress: true\n    })\n      .onStepEnter(this.handleStepEnter.bind(this))\n      .onStepProgress(_.throttle(this.handleStepProgress.bind(this), 250))\n      .onStepExit(this.handleStepExit.bind(this));\n\n      \n\n      document.body.style.overflowY = \"auto\";\n    }\n\n    if (prevProps.windowHeight !== this.props.windowHeight && !_.isUndefined(this.scroller)) {\n      this.scroller.resize();\n    }\n  }\n  checkActive(){\n    // for (var key in this.activeStepByIndex) {\n    //   if (activeStepByIndex[key]) {\n    //     console.log('index ' + key + ' is active');\n        \n    //   }\n    // }\n  }\n\n  handleStepProgress(e){\n    let actionName = e.element.dataset.actionName;\n    if (actionName === \"changeChronicleMap\") {\n      \n      this.props.dispatch(changeCurrentTimeStamp(this.timeScale(e.progress)));\n\n    }\n  }\n\n  handleStepEnter(e){\n    // console.log(e.index);\n    // console.log(e);\n    // console.log(e.index);\n    let { windowHeight } = this.props;\n    let actionName = e.element.dataset.actionName;\n    console.log(actionName, \"enter\");\n    \n    if (!_.isUndefined(actionName)){\n\n      switch(actionName) {\n        case \"changeIntro\": \n          this.props.dispatch(changeIntro({\n            zoom: this.introZoomLevelScale(windowHeight)\n          }));\n          break;\n        case \"changeEmptyMap\":\n          this.props.dispatch(changeEmptyMap({\n            zoom: this.introZoomLevelScale(windowHeight)\n          }));\n          break;\n        case \"changeChronicleMap\":\n          this.props.dispatch(changeChronicleMap({\n            zoom: this.timelineZoomLevelScale(windowHeight)\n          }));\n          break;\n        case \"wrapupChronicleMap\":\n          this.props.dispatch(wrapupChronicleMap());\n          break;\n        case \"changeInterestingPOIs\":\n          \n          let poi = _.find(interestingPOIs, iPoi => {\n            return iPoi.op === e.element.dataset.poiId;\n          });\n          \n          this.props.dispatch(changeCurrentFeature(poi));\n          break;\n        case \"initGraphScene\":\n          this.props.dispatch(initGraphScene({\n            zoom: this.timelineZoomLevelScale(windowHeight)\n          }));\n          break;\n        case \"changeGraphKorean\":\n          this.props.dispatch(changeGraphKorean({\n            zoom: this.timelineZoomLevelScale(windowHeight)\n          }));\n          break;\n        case 'initWorldMap':\n          this.props.dispatch(initWorldMap({\n            zoom: this.worldMapZoomLevelScale(windowHeight)\n          }));\n          break;\n        case 'changeWorldMapHeavyContributor':\n          this.props.dispatch(changeWorldMapHeavyContributor());\n          break;\n        case 'changeWorldMapHeaviestContributor':\n          this.props.dispatch(changeWorldMapHeaviestContributor());\n          break;\n        case 'initTextVisualization':\n          this.props.dispatch(changeTextVisualization(true));\n          this.props.dispatch(removeAllTextCategories());\n          break;\n        case 'changeTextVisualizationWhy':\n          // this.props.dispatch(change)\n          this.props.dispatch(removeAllTextCategories());\n          this.props.dispatch(addTextCategorySelected(1, {id: 1 }));\n          this.props.dispatch(addTextCategorySelected(3, {id: 3 }));\n          this.props.dispatch(addTextCategorySelected(13, {id: 13 }));\n          break;\n        case 'changeTextVisualizationHow':\n          this.props.dispatch(removeAllTextCategories());\n          this.props.dispatch(addTextCategorySelected(7, {id: 7 }));\n          this.props.dispatch(addTextCategorySelected(8, {id: 8 }));\n          this.props.dispatch(addTextCategorySelected(9, {id: 9 }));\n          \n          break;\n        \n        case 'changeTextVisualizationStory':\n\n          this.props.dispatch(removeAllTextCategories());\n          this.props.dispatch(addTextCategorySelected(4, {id: 4 }));\n          this.props.dispatch(addTextCategorySelected(11, {id: 11 }));\n          this.props.dispatch(addTextCategorySelected(15, {id: 15 }));\n\n          break;\n\n        case 'final':\n          this.props.dispatch(changeTextVisualization(false));\n          break;\n        default: \n          break;\n      }\n\n      \n    }\n    \n  }\n\n  handleStepExit(e){\n    // console.log(e.index);\n// console.log(e);\n    let {windowHeight} = this.props;\n\n    let actionName = e.element.dataset.actionName;\n    // console.log(actionName, \"exit\", e.direction);\n    console.log(actionName, \"exit\");\n    if (!_.isUndefined(actionName)) {\n\n      switch (actionName) {\n     \n        case \"changeGraphKorean\":\n          if (e.direction === \"up\") {\n            this.props.dispatch(initGraphScene({\n              zoom: this.timelineZoomLevelScale(windowHeight)\n            }));\n          }\n          break;\n        case 'initWorldMap': \n          if (e.direction === \"up\") {\n            this.props.dispatch(changeGraphKorean({\n              zoom: this.timelineZoomLevelScale(windowHeight)\n            }));\n          }\n          break;\n        case 'initTextVisualization':\n          if (e.direction === \"up\") {\n\n            this.props.dispatch(changeTextVisualization(false));\n          }\n          \n          break;\n         case 'changeTextVisualizationWhy':\n          if (e.direction === \"up\") {\n            this.props.dispatch(changeTextVisualization(true));\n            this.props.dispatch(removeAllTextCategories());\n          }\n          \n          break;\n        case 'changeTextVisualizationHow':\n          if (e.direction === \"up\") {\n            this.props.dispatch(changeTextVisualization(true));\n\n            this.props.dispatch(removeAllTextCategories());\n            this.props.dispatch(addTextCategorySelected(1, {id: 1 }));\n            this.props.dispatch(addTextCategorySelected(3, {id: 3 }));\n            this.props.dispatch(addTextCategorySelected(13, {id: 13 }));\n          }\n          \n          break;\n        case 'changeTextVisualizationStory':\n          if (e.direction === \"up\") {\n            \n          this.props.dispatch(removeAllTextCategories());\n          this.props.dispatch(addTextCategorySelected(7, {id: 7 }));\n          this.props.dispatch(addTextCategorySelected(8, {id: 8 }));\n          this.props.dispatch(addTextCategorySelected(9, {id: 9 }));\n          }\n          \n          break;\n        case 'final':\n          if (e.direction === \"up\") {\n            this.props.dispatch(changeTextVisualization(true));\n\n            this.props.dispatch(removeAllTextCategories());\n            this.props.dispatch(addTextCategorySelected(4, {id: 4 }));\n            this.props.dispatch(addTextCategorySelected(11, {id: 11 }));\n            this.props.dispatch(addTextCategorySelected(15, {id: 15 }));\n          }\n          \n          break;\n        default: \n          break;\n      }\n\n\n    }\n  }\n\n  render() {\n    let {  selectedOsmUserResponse } = this.props;\n\n    return (\n      <Fragment>\n        <div className=\"scroll-container\">\n          <Intro />\n          <SectionFirst />\n          <SectionSecond />\n          <SectionOddPOIs />\n          <SectionThird />\n          <SectionFourth />\n          <SectionText /> \n          <SectionFifth />\n        </div>\n        <TimelineScroller />\n        <TitleHeader />\n        <CholoplethLegend />\n        {\n          !selectedOsmUserResponse ?\n          <TextVisualization /> : null\n        }\n        {\n          selectedOsmUserResponse ? \n          <SelectedResponseViewer /> : null\n        }\n        <MapContainer />\n      </Fragment>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    mapLoaded: state.mapLoaded,\n    windowWidth: state.windowWidth,\n    windowHeight: state.windowHeight,\n    selectedOsmUserResponse: !_.isNull(state.selectedOsmUserResponse)\n  }\n}\n\nexport default connect(mapStateToProps)(Home);","import React, { Component } from 'react';\nimport { windowResize } from './actions';\nimport { connect } from 'react-redux';\nimport { BrowserRouter, Route } from 'react-router-dom';\nimport Home from './pages/Home';\n// import SummaryPage from './pages/SummaryPage';\n\nconst Fragment = React.Fragment;\n\nclass App extends Component {\n  componentWillMount(){\n\n  }\n\n  componentDidMount(){\n\n    window.addEventListener('resize', this.resizeHandler.bind(this));\n    this.resizeHandler();\n  }\n\n\n\n\n  resizeHandler(e){\n    this.props.dispatch(windowResize({\n      width: window.innerWidth,\n      height: window.innerHeight\n    }));\n    \n  }\n\n\n  render() {\n\n    return (\n      <BrowserRouter>\n        <Fragment>\n          <Route path={process.env.PUBLIC_URL + '/'} component={Home} />\n        </Fragment>\n      </BrowserRouter>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    width: state.windowWidth,\n    height: state.windowHeight\n  }\n};\n\nexport default connect(mapStateToProps)(App);","import { createStore } from 'redux';\nimport mainReducer from './main';\n\nexport default createStore(mainReducer);\n","import { DEFAULT_STATE } from '../constants/defaults';\nimport _ from 'lodash';\n\nexport default function screenReducer(state = DEFAULT_STATE, action){\n  switch(action.type) {\n    case \"WINDOW_RESIZE\":\n      return {\n        ...state,\n        windowWidth: action.payload.windowWidth,\n        windowHeight: action.payload.windowHeight\n      }\n\n    case 'CHANGE_OSM_USERS_DATA_STATS':\n      return {\n        ...state,\n        osmUsersDataStats: action.payload.osmUsersDataStats\n      }\n    case 'CHANGE_OSM_USER_HISTORIES_IDX':\n      return {\n        ...state,\n        osmUserHistoriesIdx: action.payload.osmUserHistoriesIdx\n      };  \n    case 'CHANGE_OSM_USER_HISTORIES':\n      return {\n        ...state,\n        osmUserHistories: action.payload.osmUserHistories\n      };    \n    case 'CHANGE_OSM_USER_RESPONSE_DATA':\n      return {\n        ...state,\n        osmUsers: action.payload.osmUsers,\n        responseCategories: action.payload.responseCategories\n      }\n    case 'ADD_TEXT_CATEGORY':\n      return {\n        ...state,\n        selectedTextCategory: {\n          ...state.selectedTextCategory,\n          [action.payload.id]: action.payload.textCategoryInfo\n        }\n      }\n    case \"REMOVE_ALL_TEXT_CATEGORIES\":\n      return {\n        ...state,\n        selectedTextCategory: {}\n      }\n    case 'REMOVE_TEXT_CATEGORY':\n      let selectedTextCategory = { ...state.selectedTextCategory };\n\n      delete selectedTextCategory[action.payload.id]\n      return {\n        ...state,\n        selectedTextCategory: selectedTextCategory\n      }\n    case 'CHANGE_TEXT_VISUALIZATION':\n      return {\n        ...state,\n        textVisualization: action.payload.textVisualization\n      }\n    case \"CHANGE_MAP_LOADED\":\n      return {\n        ...state,\n        mapLoaded: action.payload.mapLoaded\n      }\n    case 'CHANGE_INTRO': \n      return {\n        ...state,\n        nkTile: action.payload.nkTile,\n        titleHeader: action.payload.titleHeader,\n        zoom: action.payload.zoom,\n        center: action.payload.center,\n        currentFeature: action.payload.currentFeature\n      }\n    case 'CHANGE_EMPTY_MAP':\n      return {\n        ...state,\n        nkTile: action.payload.nkTile,\n        zoom: action.payload.zoom,\n        center: action.payload.center,\n        timelineUI: action.payload.timelineUI,\n        currentTimeStamp : action.payload.currentTimeStamp,\n        legend : action.payload.legend,\n        titleHeader: action.payload.titleHeader,\n        currentFeature: action.payload.currentFeature\n      };\n    case 'CHANGE_CHRONICLE_MAP':\n      return {\n        ...state,\n        nkTile: action.payload.nkTile,\n        zoom: action.payload.zoom,\n        center: action.payload.center,\n        currentFeature: action.payload.currentFeature,\n        timelineUI: action.payload.timelineUI,\n        legend: action.payload.legend,\n        titleHeader: action.payload.titleHeader\n      };\n    case 'CHANGE_SELECTED_OSM_USER_RESPONSE':\n      return {\n        ...state,\n        selectedOsmUserResponse: action.payload.selectedOsmUserResponse,\n        cholopleth: _.isNull(action.payload.selectedOsmUserResponse),\n        nkTile: !_.isNull(action.payload.selectedOsmUserResponse),\n        osmUserHistoriesIdx: _.isNull(action.payload.selectedOsmUserResponse) ? 0 : state.osmUserHistoriesIdx\n      };\n    case 'WRAPUP_CHRONICLE_MAP':\n      return {\n        ...state,\n        timelineUI: action.payload.timelineUI,\n        currentTimeStamp: action.payload.currentTimeStamp,\n        legend: action.payload.legend,\n        titleHeader: action.payload.titleHeader\n      }\n\n    case 'CHANGE_INTERESTING_POIS':\n      return {\n        ...state\n      };\n    case 'INIT_GRAPH_SCENE':\n      return {\n        ...state,\n        nkTile: action.payload.nkTile,\n        legend: action.payload.legend,\n        timelineUI: action.payload.timelineUI,\n        currentFeature: action.payload.currentFeature,\n        zoom: action.payload.zoom,\n        center: action.payload.center,\n        graphMode: action.payload.graphMode,\n        titleHeader: action.payload.titleHeader\n      };\n    case 'CHANGE_GRAPH_KOREAN':\n      return {\n        ...state,\n        nkTile: action.payload.nkTile,\n        graphMode: action.payload.graphMode,\n        zoom: action.payload.zoom,\n        center: action.payload.center,\n        cholopleth: action.payload.cholopleth,\n        titleHeader: action.payload.titleHeader\n      };\n    case 'INIT_WORLD_MAP':\n      return {\n        ...state,\n        nkTile: action.payload.nkTile,\n        zoom: action.payload.zoom,\n        center: action.payload.center,\n        currentFeature: action.payload.currentFeature,\n        cholopleth: action.payload.cholopleth,\n        choloplethMode: action.payload.choloplethMode, //top20, top5, individual\n        currentIndividual: action.payload.currentIndividual,\n        legend: action.payload.legend,\n        titleHeader: action.payload.titleHeader\n      };\n    case 'CHANGE_WORLD_MAP_HEAVY_CONTRIBUTOR':\n      return {\n        ...state,\n        nkTile: action.payload.nkTile,\n        cholopleth: action.payload.cholopleth,\n        currentFeature: action.payload.currentFeature,\n        choloplethMode: action.payload.choloplethMode, //top20, top5, individual\n        currentIndividual: action.payload.currentIndividual,\n        legend: action.payload.legend\n      };\n    case 'CHANGE_WORLD_MAP_HEAVIEST_CONTRIBUTOR':\n      return {\n        ...state,\n        nkTile: action.payload.nkTile,\n        cholopleth: action.payload.cholopleth,\n        currentFeature: action.payload.currentFeature,\n        choloplethMode: action.payload.choloplethMode, //top20, top5, individual\n        currentIndividual: action.payload.currentIndividual,\n        legend: action.payload.legend,\n        textVisualization: false\n      };\n    case 'CHANGE_WORLD_MAP_INDIVIDUAL':\n      return {\n        ...state,\n        nkTile: action.payload.nkTile,\n        currentFeature: action.payload.currentFeature,\n        currentIndividual: action.payload.currentIndividual        \n      }\n    case \"RESET\":\n      return {\n        ...state\n      }\n    case \"CHANGE_CURRENT_SEQ\":\n      return {\n        ...state,\n        currentSeq: action.payload.currentSeq\n      }\n    case \"CHANGE_CURRENT_TIMESTAMP\":\n      return {\n        ...state,\n        currentTimeStamp: action.payload.currentTimeStamp\n      }\n    case \"CHANGE_CURRENT_FEATURE\":\n      return {\n        ...state,\n        nkTile: true,\n        currentFeature: action.payload.currentFeature,\n        legend: true\n      }\n    default:\n      break;\n  }\n\n  return state;\n};","import React from 'react';\nimport { render } from 'react-dom';\nimport { Provider } from 'react-redux';\nimport App from './App';\nimport AppState from './reducers';\nimport \"./stylesheets/style.scss\";\n\nrender(\n  <Provider store={AppState}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);"],"sourceRoot":""}