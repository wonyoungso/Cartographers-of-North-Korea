{"version":3,"sources":["actions/index.js","utils/index.js","components/MapContainer.js","components/PageMapContainer.js","components/ContributorInfo.js","components/CenterMarker.js","components/MessageContributorInfo.js","components/ContDistribution.js","components/ChoroplethMap.js","components/YearLegend.js","components/MessageTopInfo.js","stylesheets/mixins.js","stylesheets/components.js","components/InterestingPOIs.js","components/TitleHeader.js","components/ContributorsGraph.js","components/TimelineScroller.js","components/CholoplethLegend.js","components/KoreanLegend.js","components/IndividualInfo.js","constants/defaults.js","components/TextVisualization.js","components/TextVisualizationResponses.js","components/UserResponse.js","components/SelectedResponseViewer.js","components/NumberContributionLegend.js","components/sections/Intro.js","components/sections/SectionFirst.js","components/sections/SectionSecond.js","components/sections/SectionThird.js","components/sections/SectionFourth.js","components/sections/SectionFifth.js","components/sections/SectionOddPOIs.js","components/sections/SectionText.js","pages/Home.js","App.js","reducers/index.js","reducers/main.js","index.js"],"names":["changeOsmUserHistories","osmUserHistories","type","payload","changeSelectedOsmUserResponse","selectedOsmUserResponse","addTextCategorySelected","id","textCategoryInfo","changeTextVisualization","textVisualization","initGraphScene","params","nkTile","legend","currentFeature","timelineUI","zoom","center","graphMode","titleHeader","changeGraphKorean","cholopleth","choloplethMode","currentIndividual","changeWorldMapIndividual","individual","changeMapLoaded","mapLoaded","numberWithDelimiter","number","delimiter","separator","parts","toString","split","replace","join","e","randomBetween","low","high","diff","Math","random","MapContainer","window","mapboxgl","accessToken","this","map","Map","container","refsMapContainer","style","on","handleStyleLoad","bind","handleMoveEnd","handleRender","addSource","tiles","addLayer","source","source-layer","layout","visibility","paint","line-opacity","line-color","property","stops","filter","fill-opacity","fill-color","circle-radius","circle-color","addWorldMap","resize","props","dispatch","url","line-width","prevProps","_this$props","currentTimeStamp","osmUserHistoriesIdx","nkTileVisibility","setLayoutProperty","_","isNull","stop","flyTo","isUndefined","getLayer","removeLayer","removeSource","updateCurrentFeature","updateCurrentCholopleth","setFilter","updateOsmUserHistory","osmUserHistory","feature4326","toWgs84","features","proj4","bbox","turf","buffered","buffer","bboxPolygon","finalBbox","data","circle-opacity","getSource","setData","fitBounds","padding","top","bottom","left","right","choloplethVisibility","currentCountryJSON","country_counts","country_analysis_all","country_analysis_top_20","country_analysis_top_5","updateCurrentCountryJSON","expression","colorScale","d3","domain","range","extent","cc","count","finalDomain","each","push","world_id","setPaintProperty","console","log","feature","geometry","coordinates","zoomInData","_this","delay","nextNum","length","_this2","windowHeight","react_default","a","createElement","ref","c","className","height","Component","connect","state","windowWidth","currentSeq","isFirstTransition","PageMapContainer","refsPageMapContainer","interactive","newProps","Fragment","React","ContributorInfo","osm_user","moment","unix","osm_timestamp","format","rank","CenterMarker","name","MessageContributorInfo","countryCounts","sortedCounts","sortBy","reverse","splicedCounts","sc","splice","sp","i","nameKo","find","worldData","wd","name_ko","nameEn","name_en","topThreeCountries","getTopThreeCountries","components_ContDistribution","width","allCount","all_count","total_contribution_count","key","concat","ChoroplethMap","HIST","value","ContDistribution","d3Render","xDomain","first","last","yDomain","h","xScale","yScale","clamp","svg","svgContainer","selectAll","remove","lineDraw","x","d","y","append","attr","xAxis","enter","text","children","osm_id","ChoroplethMap_Fragment","val","backgroundColor","Number","toFixed","YearLegend","yearScale","opacity","MessageTopInfo","MessageTopInfo_Fragment","mixins","SectionContainer","styled","section","_templateObject","Gutter","div","_templateObject2","Sticky","_templateObject3","NonSticky","_templateObject4","Box","_templateObject5","InterestingPOIsContainer","InterestingPOIs_templateObject","POIBox","InterestingPOIs_templateObject2","TitleArea","InterestingPOIs_templateObject3","Label","h4","InterestingPOIs_templateObject4","Value","InterestingPOIs_templateObject5","Date","_templateObject6","Disclaimer","_templateObject7","InterestingPOIs","data-action-name","data-poi-id","op","InterestingPOIs_Date","HeaderContainer","TitleHeader_templateObject","TitleHeader","ContributorsGraphBox","ContributorsGraph_templateObject","Title","ContributorsGraph_templateObject2","Tooltip","ContributorsGraph_templateObject3","ToolTipLabelArea","ContributorsGraph_templateObject4","ToolTipLabel","ContributorsGraph_templateObject5","ToolTipValue","ContributorsGraph_templateObject6","ContributorsGraph","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","margin","refGraph","createRef","currentHover","simulation","osmUsersDataStats","stats","osm_users","force","strength","tick","_this3","current","initSimulation","xAxisFunction","g","ticks","tickFormat","LN10","abs","round","tickSizeOuter","circleGraph","radius","setState","objectSpread","cx","cy","transition","circleColor","setCircleColor","_this4","_this$props2","korean","prevState","_this5","_this$props3","d3Init","d3Update","_this$props4","floor","korean_pct","components_KoreanLegend","show","components_NumberContributionLegend","scale","components_IndividualInfo","Container","TimelineScroller_templateObject","RightStat","TimelineScroller_templateObject2","TimelineScroller_templateObject3","p","TimelineScroller_templateObject4","Timeline","TimelineScroller_templateObject5","Line","TimelineScroller_templateObject6","color","TimelineScroller_templateObject7","TimelineScroller","timeScale","scaleLinear","TimelineScroller_Fragment","TimelineScroller_Label","TimelineScroller_Value","TimelineScroller_Date","components_YearLegend","CholoplethLegend","result","LegendBox","KoreanLegend_templateObject","RedCircle","KoreanLegend_templateObject2","KoreanLegend_templateObject3","KoreanLegend","KoreanLegend_Label","IndividualInfo_templateObject","Area","IndividualInfo_templateObject2","IndividualInfo_templateObject3","IndividualInfo_templateObject4","SmallSize","span","IndividualInfo_templateObject5","CloseButton","IndividualInfo_templateObject6","IndividualInfo","worldIds","country","worldId","label","world_data","w","top5Countries","getTop5Countries","IndividualInfo_Box","onClick","handleClick","href","IndividualInfo_Label","IndividualInfo_Value","DEFAULT_STATE","osmUsers","responseCategories","selectedTextCategory","CATEGORIES_COLORS","SUBCATEGORY_SELECT","1","2","3","Bar","TextVisualization_templateObject","CategoryLink","TextVisualization_templateObject2","UnCategoryLink","TextVisualization_templateObject3","ArrowArea","TextVisualization_templateObject4","TextVisualization","axios","all","get","then","spread","response","success","response_categories","subCategories","groupBy","subcategory_id","rc","TextVisualization_Fragment","categories","handleAddTextCategory","category_name","src","process","alt","GridBox","TextVisualizationResponses_templateObject","Main","TextVisualizationResponses_templateObject2","TextVisualizationResponses","fontSizeScale","lineHeightScale","ou","components_UserResponse","assign","fontSize","lineHeight","ceil","TextSpan","UserResponse_templateObject","RespArea","UserResponse_templateObject2","UserResponse","responses","selected","category_id","resp","RespContainer","SelectedResponseViewer_templateObject","DataInfoContainer","SelectedResponseViewer_templateObject2","SelectedResponseViewer_templateObject3","SelectedResponseViewer_templateObject4","SelectedResponseViewer_templateObject5","SelectedResponseViewer_templateObject6","SelectedResponseViewer_templateObject7","CategorySpan","_templateObject8","RespInfoArea","_templateObject9","SelectedResponseViewer","intervalId","document","body","overflow","loadOsmUserSampleData","histories","catch","error","respCategories","uniq","compact","respCategory","osmHistory","selectedColorCategories","getSelectedColorCategories","SelectedResponseViewer_Fragment","handleClose","r","bgColor","scc","SelectedResponseViewer_POIBox","SelectedResponseViewer_TitleArea","SelectedResponseViewer_Label","SelectedResponseViewer_Value","properties","SelectedResponseViewer_Date","NumberContributionLegend_templateObject","Circle","NumberContributionLegend_templateObject2","NumberContributionLegend_templateObject3","NumberContributionLegend","NumberContributionLegend_LegendBox","NumberContributionLegend_Label","SubtitleKo","Intro_templateObject","IntroContainer","Intro_templateObject2","TitleContainer","Intro_templateObject3","H1","h1","Intro_templateObject4","SubParagraph","Intro_templateObject5","DateBox","Intro_templateObject6","Prompt","Intro_templateObject7","Intro","viewBox","enableBackground","fill","SectionFirst_templateObject","SectionFirst","SectionFirst_IntroContainer","SecondContainer","SectionSecond_templateObject","SectionSecond","SectionThirdContainer","SectionThird_templateObject","GradientSticky","SectionThird_templateObject2","SectionThird_templateObject3","StickyGraphArea","SectionThird_templateObject4","SectionThird","graphHeight","SectionThird_NonSticky","components_ContributorsGraph","SectionFourthContainer","SectionFourth_templateObject","SectionFourth_templateObject2","StickyBottomGraphContainer","SectionFourth_templateObject3","SectionFourth","SectionFourth_Gutter","SectionFifthContainer","SectionFifth_templateObject","SectionFifth_templateObject2","NonStickyFinal","SectionFifth_templateObject3","MethodologyTitle","SectionFifth_templateObject4","MethodologyPG","SectionFifth_templateObject5","SectionFifth","SectionFifth_Gutter","SectionOddPOIs_templateObject","SectionOddPOIs","interestingPOIs2","shuffle","interestingPOIs","SectionOddPOIs_SecondContainer","interestingPOI","components_InterestingPOIs","SectionTextContainer","SectionText_templateObject","SectionText","zIndex","components_TextVisualizationResponses","Home","introZoomLevelScale","timelineZoomLevelScale","worldMapZoomLevelScale","overflowY","loadData","scroller","scrollama","setup","step","offset","order","progress","onStepEnter","handleStepEnter","onStepProgress","throttle","handleStepProgress","onStepExit","handleStepExit","element","dataset","actionName","changeEmptyMap","changeChronicleMap","poi","iPoi","poiId","initWorldMap","direction","Home_Fragment","sections_Intro","sections_SectionFirst","sections_SectionSecond","sections_SectionOddPOIs","sections_SectionThird","sections_SectionFourth","sections_SectionText","sections_SectionFifth","components_TimelineScroller","components_TitleHeader","components_CholoplethLegend","components_TextVisualization","components_SelectedResponseViewer","components_MapContainer","App","addEventListener","resizeHandler","dimension","innerWidth","innerHeight","BrowserRouter","App_Fragment","Route","path","component","createStore","arguments","undefined","action","defineProperty","render","es","store","AppState","src_App","getElementById"],"mappings":"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","file":"static/js/main.030f7b36.chunk.js","sourcesContent":["\n\nexport const reset = () => {\n  return {\n    type: 'RESET',\n    payload: {}\n  }\n}\n\nexport const changeOsmUsersDataStats = (osmUsersDataStats) => {\n  return {\n    type: 'CHANGE_OSM_USERS_DATA_STATS',\n    payload: {\n      osmUsersDataStats: osmUsersDataStats\n    }\n  }\n}\n\nexport const removeAllTextCategories = () => {\n  return {\n    type: \"REMOVE_ALL_TEXT_CATEGORIES\",\n    payload: {\n      \n    }\n  }\n}\nexport const changeOsmUserHistories = (osmUserHistories) => {\n  return {\n    type: 'CHANGE_OSM_USER_HISTORIES',\n    payload: {\n      osmUserHistories: osmUserHistories\n    }\n  }\n}\n\nexport const changeOsmUserHistoriesIdx = (osmUserHistoriesIdx) => {\n  return {\n    type: 'CHANGE_OSM_USER_HISTORIES_IDX',\n    payload: {\n      osmUserHistoriesIdx: osmUserHistoriesIdx\n    }\n  }\n}\n\n\nexport const changeSelectedOsmUserResponse = (selectedOsmUserResponse) => {\n  return {\n    type: 'CHANGE_SELECTED_OSM_USER_RESPONSE',\n    payload: {\n      selectedOsmUserResponse: selectedOsmUserResponse\n    }\n  }\n}\n\n// export const \nexport const changeOsmUserReponseData = (osmUsers, responseCategories) => {\n  return {\n    type: 'CHANGE_OSM_USER_RESPONSE_DATA',\n    payload: {\n      osmUsers: osmUsers,\n      responseCategories: responseCategories\n    }\n  }\n}\n\n\nexport const addTextCategorySelected = (id, textCategoryInfo) => {\n  return {\n    type: 'ADD_TEXT_CATEGORY',\n    payload: {\n      id: id,\n      textCategoryInfo: textCategoryInfo\n    }\n  }\n}\nexport const removeTextCategorySelected = (id) => {\n  return {\n    type: 'REMOVE_TEXT_CATEGORY',\n    payload: {\n      id: id\n    }\n  }\n}\n\n\nexport const changeTextVisualization = (textVisualization) => {\n  return {\n    type: 'CHANGE_TEXT_VISUALIZATION',\n    payload: {\n      textVisualization: textVisualization\n    }\n  }\n}\n\n\nexport const changeIntro = (params) => {\n  return {\n    type: 'CHANGE_INTRO',\n    payload: {\n      nkTile: false,\n      zoom: params.zoom,\n      center: [127.09741740583831, 40.395224876339796],\n      timelineUI: false,\n      currentTimeStamp: 0,\n      legend: false,\n      titleHeader: false,\n      currentFeature: null\n    }\n  }\n}\n\nexport const changeEmptyMap = (params) => {\n  return {\n    type: 'CHANGE_EMPTY_MAP',\n    payload: {\n      nkTile: false,\n      zoom: params.zoom,\n      center: [127.09741740583831, 40.395224876339796],\n      timelineUI: false,\n      currentTimeStamp: 0,\n      legend: false,\n      titleHeader: true,\n      currentFeature: null\n    }\n  }\n};\n\nexport const wrapupChronicleMap = () => {\n  return {\n    type: 'WRAPUP_CHRONICLE_MAP',\n    payload: {\n      timelineUI: false,\n      currentTimeStamp : 1539016223,\n      legend: false,\n      titleHeader: true\n    }\n  }\n}\n\nexport const changeChronicleMap = (params) => {\n  return {\n    type: 'CHANGE_CHRONICLE_MAP',\n    payload: {\n      nkTile: true,\n      zoom: params.zoom,\n      center: [127.31301436214687, 40.48099092278639],\n      currentFeature: null,\n      timelineUI: true,\n      legend: true,\n      titleHeader: true\n    }\n  }\n};\n\nexport const changeInterestingPOIs = () => {\n  return {\n    type: 'CHANGE_INTERESTING_POIS',\n    payload: {\n      nkTile: true,\n      titleHeader: true\n    }\n  }\n}\n\nexport const initGraphScene = (params) => {\n  return {\n    type: 'INIT_GRAPH_SCENE',\n    payload: {\n      nkTile: true,\n      legend : false,\n      currentFeature : null,\n      timelineUI: false,\n      zoom: params.zoom,\n      center: [127.31301436214687, 40.48099092278639],\n      graphMode: \"all\",\n      titleHeader: true\n    }\n  }\n};\n\nexport const changeGraphKorean = (params) => {\n  return {\n    type: 'CHANGE_GRAPH_KOREAN',\n    payload: {\n      nkTile : true,\n      graphMode: \"korean\",\n      zoom: params.zoom,\n      center: [127.31301436214687, 40.48099092278639],\n      cholopleth: false,\n      choloplethMode: \"all\", //top20, top5, individual\n      currentIndividual: null,\n      currentFeature: null,\n      titleHeader: true\n    }\n  }\n};\n\nexport const initWorldMap = (params) => {\n  return {\n    type: 'INIT_WORLD_MAP',\n    payload: {\n      nkTile: false,\n      cholopleth: true,\n      choloplethMode: \"all\", //top20, top5, individual\n      currentIndividual: null,\n      currentFeature: null,\n      titleHeader: true,\n      legend: false,\n      zoom : params.zoom,\n      center: [152.4583090179674, 18.892423140497797]\n    }\n  }\n};\n\nexport const changeWorldMapHeavyContributor = () => {\n  return {\n    type: 'CHANGE_WORLD_MAP_HEAVY_CONTRIBUTOR',\n    payload: {\n      cholopleth: true,\n      choloplethMode: \"top20\", //top20, top5, individual\n      currentIndividual: null,\n      currentFeature: null,\n      legend: false,\n      textVisualization: false\n    }\n  }\n};\n\nexport const changeWorldMapHeaviestContributor = () => {\n  return {\n    type: 'CHANGE_WORLD_MAP_HEAVIEST_CONTRIBUTOR',\n    payload: {\n      cholopleth: true,\n      choloplethMode: \"top5\", //top20, top5, individual\n      currentIndividual: null,\n      currentFeature: null,\n      legend: false,\n      textVisualization: false\n    }\n  }\n};\n\nexport const changeWorldMapIndividual = (individual) => {\n  return {\n    type: 'CHANGE_WORLD_MAP_INDIVIDUAL',\n    payload: {\n      cholopleth: true,\n      currentIndividual: individual,\n      currentFeature: null,\n      legend: false,\n      textVisualization: false\n    }\n  }\n};\n\nexport const windowResize = (dimension) => {\n  return {\n    type: 'WINDOW_RESIZE',\n    payload: {\n      windowWidth: dimension.width,\n      windowHeight: dimension.height\n    }\n  }\n}\n\nexport const changeMapLoaded = (mapLoaded) => {\n  return {\n    type: 'CHANGE_MAP_LOADED',\n    payload: {\n      mapLoaded: mapLoaded\n    }\n  }\n}\n\nexport const changeCurrentSeq = (currentSeq) => {\n  return {\n    type: 'CHANGE_CURRENT_SEQ',\n    payload: {\n      currentSeq: currentSeq\n    }\n  }\n}\n\nexport const changeCurrentFeature = (currentFeature) => {\n  return {\n    type: 'CHANGE_CURRENT_FEATURE',\n    payload: {\n      currentFeature: currentFeature,\n      timelineUI: false,\n      currentTimeStamp: 1539016223,\n      legend: true,\n      titleHeader: true\n    }\n  }\n}\n\nexport const changeCurrentTimeStamp = (currentTimeStamp) => {\n  return {\n    type: 'CHANGE_CURRENT_TIMESTAMP',\n    payload: {\n      currentTimeStamp: currentTimeStamp\n    }\n  }\n}\n\nexport const changeDataLoaded = (dataLoaded) => {\n  return {\n    type: 'CHANGE_DATA_LOADED',\n    payload: {\n      dataLoaded: dataLoaded\n    }\n  }\n}","import _ from 'lodash';\n\n\nexport const constrain = (amt, low, high) => {\n  return (amt < low) ? low : ((amt > high) ? high : amt);\n}\n\n\n\n\nexport const numberWithDelimiter = (number, delimiter, separator) => {\n  try {\n    delimiter = delimiter || \",\";\n    separator = separator || \".\";\n    \n    var parts = number.toString().split('.');\n    parts[0] = parts[0].replace(/(\\d)(?=(\\d\\d\\d)+(?!\\d))/g, \"$1\" + delimiter);\n    return parts.join(separator);\n  } catch(e) {\n    return number\n  }\n};\n\nexport const getMetaContent = (name) => {\n  var metas = document.getElementsByTagName('meta');\n  let result = \"\"\n  _.each(metas, (meta) => {\n    if (meta.getAttribute(\"name\") === name) {\n      result = meta.getAttribute(\"content\");\n    }\n  });\n\n  return result;\n}\n\n\n\nexport const randomBetween = (low, high) => {\n  if (low >= high) return low;\n  var diff = high - low;\n  return Math.random() * diff + low;\n};\n\nexport const map = (value, start1,  stop1, start2,  stop2) => {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { changeMapLoaded, changeOsmUserHistoriesIdx } from '../actions';\nimport { toWgs84 }  from 'reproject';\nimport proj4 from 'proj4';\nimport turf from 'turf';\nimport { randomBetween } from '../utils';\nimport country_analysis_all from '../constants/country_analysis_all.json';\nimport country_analysis_top_20 from '../constants/country_analysis_top_20.json';\nimport country_analysis_top_5 from '../constants/country_analysis_top_5.json';\nimport * as d3 from 'd3';\nimport _ from 'lodash';\n\nclass MapContainer extends Component {\n\n  componentDidMount() {\n    window.mapboxgl.accessToken = 'pk.eyJ1Ijoic2Vuc2VhYmxlIiwiYSI6ImxSNC1wc28ifQ.hst-boAjFCngpjzrbXrShw';\n\n    this.map = new window.mapboxgl.Map({\n      container: this.refsMapContainer,\n      style: 'mapbox://styles/senseable/cjqd080el9i9y2rl7aarmzsbu',\n      zoom: 6.2,\n      // minZoom: 4,\n      center: [127.1205757172753, 38.76675314095931],\n      // interactive: false\n\n    });\n\n\n    window.map = this.map;\n    this.map.on('style.load', this.handleStyleLoad.bind(this));\n    this.map.on('moveend', this.handleMoveEnd.bind(this));\n    this.map.on('styledata', this.handleRender.bind(this));\n    \n    \n  }\n\n  handleRender(e){\n  }\n  \n  handleStyleLoad(e) {\n  \n    this.map.addSource('nk-line', {\n      type: 'vector',\n      tiles: ['https://tiles.wonyoung.so/services/vector-tiles/nk_osm_line/{z}/{x}/{y}.pbf']\n    })\n\n    this.map.addSource('nk-polygon', {\n      type: 'vector',\n      tiles: ['https://tiles.wonyoung.so/services/vector-tiles/nk_osm_polygon/{z}/{x}/{y}.pbf']\n    })\n  \n    this.map.addSource('nk-point', {\n      type: 'vector',\n      tiles: ['https://tiles.wonyoung.so/services/vector-tiles/nk_osm_point/{z}/{x}/{y}.pbf;']\n    })\n    \n    this.map.addLayer({\n      \"id\": \"nk-line-layer\",\n      \"source\": \"nk-line\",\n      \"source-layer\": \"nk_osm_line_4326\",\n      \"type\": \"line\",\n      \"layout\": {\n        'visibility': 'none'\n      },\n      \"paint\": {\n        'line-opacity': 0.25,\n        'line-color':  {\n          property: 't',\n          stops: [\n            [1184972887, \"#ffffcc\"],\n            [1346511620, \"#d6efc2\"],\n            [1360958163, \"#acdeb7\"],\n            [1378200802, \"#81ceba\"],\n            [1395305792, \"#56bec1\"],\n            [1438380051, \"#3caac2\"],\n            [1479834657, \"#3391bc\"],\n            [1502367226, \"#2b77b4\"],\n            [1510168743, \"#2855a4\"],\n            [1516131630, \"#253494\"]\n          ]\n        }\n      },\n      \"filter\": [\"<\", 't', 1384972887]\n    }, 'place-city-sm');\n\n    this.map.addLayer({\n      \"id\": \"nk-polygon-layer\",\n      \"source\": \"nk-polygon\",\n      \"source-layer\": \"nk_osm_polygon_4326\",\n      \"type\": \"fill\",\n      \"layout\": {\n        'visibility': 'none'\n      },\n      \"paint\": {\n        'fill-opacity': 0.5,\n        'fill-color':  {\n          property: 't',\n          stops: [\n            [1184972887, \"#ffffcc\"],\n            [1346511620, \"#d6efc2\"],\n            [1360958163, \"#acdeb7\"],\n            [1378200802, \"#81ceba\"],\n            [1395305792, \"#56bec1\"],\n            [1438380051, \"#3caac2\"],\n            [1479834657, \"#3391bc\"],\n            [1502367226, \"#2b77b4\"],\n            [1510168743, \"#2855a4\"],\n            [1516131630, \"#253494\"]\n          ]\n        }\n      },\n      \"filter\": [\"<\", 't', 1384972887]\n    }, 'place-city-sm');\n\n    this.map.addLayer({\n      \"id\": \"nk-point-layer\",\n      \"source\": \"nk-point\",\n      \"source-layer\": \"nk_osm_point_4326\",\n      \"type\": \"circle\",\n      \"layout\": {\n        'visibility': 'none'\n      },\n      \"paint\": {\n        'circle-radius': 2,\n        'circle-color':  {\n          property: 't',\n          stops: [\n            [1184972887, \"#ffffcc\"],\n            [1346511620, \"#d6efc2\"],\n            [1360958163, \"#acdeb7\"],\n            [1378200802, \"#81ceba\"],\n            [1395305792, \"#56bec1\"],\n            [1438380051, \"#3caac2\"],\n            [1479834657, \"#3391bc\"],\n            [1502367226, \"#2b77b4\"],\n            [1510168743, \"#2855a4\"],\n            [1516131630, \"#253494\"]\n          ]\n        }\n      },\n      \"filter\": [\"<\", 't', 1384972887]\n    }, 'place-city-sm');\n\n    this.addWorldMap();\n    this.map.resize();\n\n    this.props.dispatch(changeMapLoaded(true));\n  }\n\n  addWorldMap(){\n    this.map.addSource(\"world-map-source\", {\n      type: 'vector',\n      url: 'mapbox://senseable.8x6k6499'\n    });\n\n    this.map.addLayer({\n      \"id\": \"world-map-layer\",\n      \"source\": \"world-map-source\",\n      \"source-layer\": \"world_assoc-c3znvj\",\n      \"type\": \"fill\",\n      \"layout\": {\n        'visibility': 'none'\n      },\n      \"paint\": {\n        'fill-opacity': 0.7,\n        'fill-color': '#FFFFFF'\n      }\n    }, 'waterway-label');\n\n    this.map.addLayer({\n      \"id\": \"world-map-line-layer\",\n      \"source\": \"world-map-source\",\n      \"source-layer\": \"world_assoc-c3znvj\",\n      \"type\": \"line\",\n      \"layout\": {\n        'visibility': 'none'\n      },\n      \"paint\": {\n        'line-opacity': 0.2,\n        'line-color': '#BBB',\n        'line-width': 1\n      }\n    }, 'waterway-label');\n\n  }\n\n\n  componentDidUpdate(prevProps){\n    let { nkTile, cholopleth, currentFeature, zoom, center, currentTimeStamp, currentIndividual, choloplethMode, osmUserHistories, osmUserHistoriesIdx, mapLoaded } = this.props;\n\n\n    let nkTileVisibility = nkTile ? 'visible' : 'none';\n\n    if (mapLoaded){\n      this.map.resize();\n  \n      this.map.setLayoutProperty('nk-line-layer', 'visibility', nkTileVisibility);\n      this.map.setLayoutProperty('nk-polygon-layer', 'visibility', nkTileVisibility);\n      this.map.setLayoutProperty('nk-point-layer', 'visibility', nkTileVisibility);\n  \n      if (_.isNull(currentFeature)) {\n        this.map.stop();\n        this.map.flyTo({ center: center, zoom: zoom });\n        if (!_.isUndefined(this.map.getLayer(\"currentFeature-point\"))) {\n  \n          this.map.removeLayer(\"currentFeature-point\");\n          this.map.removeLayer(\"currentFeature-line\");\n          this.map.removeLayer(\"currentFeature-fill\");\n          this.map.removeSource(\"currentFeature\");\n        }\n      } else {\n        this.updateCurrentFeature(currentFeature);\n      }\n  \n      \n      this.updateCurrentCholopleth(cholopleth, choloplethMode, currentIndividual);\n  \n      this.map.setFilter('nk-line-layer', [\"<\", \"t\", currentTimeStamp]);\n      this.map.setFilter('nk-polygon-layer', [\"<\", \"t\", currentTimeStamp]);\n      this.map.setFilter('nk-point-layer', [\"<\", \"t\", currentTimeStamp]);  \n\n      if (_.isNull(prevProps.selectedOsmUserResponse) && !_.isNull(this.props.selectedOsmUserResponse)){\n        \n        this.map.stop();\n        this.map.flyTo({ center: [127.1205757172753, 38.76675314095931], zoom: 6.2 });\n      \n      } else if (!_.isNull(prevProps.selectedOsmUserResponse) && _.isNull(this.props.selectedOsmUserResponse)) {\n\n        this.map.stop();\n        this.map.flyTo({ center: center, zoom: zoom });\n      }\n\n\n      if (!_.isNull(osmUserHistories)) {\n        if (!_.isUndefined(osmUserHistories[osmUserHistoriesIdx])){\n          this.updateOsmUserHistory(osmUserHistories[osmUserHistoriesIdx]);\n        }\n      } else {\n        if (!_.isUndefined(this.map.getLayer('osm-user-history'))){\n          this.map.removeLayer('osm-user-history');\n          this.map.removeLayer('osm-user-history-circle');\n          this.map.removeSource('osm-user-history-source');\n\n          this.map.removeLayer('osm-user-history-bbox');\n          this.map.removeSource('osm-user-history-bbox-source');\n        }\n      }\n    }\n\n\n\n    \n  }\n\n  updateOsmUserHistory(osmUserHistory){\n\n    \n    let feature4326 = toWgs84(osmUserHistory.features[0], proj4('EPSG:3857'));\n\n    let bbox = turf.bbox(feature4326);\n    let buffered = turf.buffer(turf.bboxPolygon(bbox), 1, \"miles\");\n    let finalBbox = turf.bbox(buffered)\n\n\n    // if (window.map.isStyleLoaded()){\n\n      if (_.isUndefined(this.map.getLayer('osm-user-history'))){\n        // var bboxPolygon = turf.bboxPolygon(bbox);\n        // console.log(bboxPolygon);\n\n        this.map.addSource(\"osm-user-history-bbox-source\", {\n          type: 'geojson',\n          data: turf.bboxPolygon(finalBbox)\n        });\n\n        this.map.addLayer({\n          'id': 'osm-user-history-bbox',\n          'type': 'line',\n          'source': \"osm-user-history-bbox-source\",\n          'layout': {},\n          'paint': {\n            'line-color': '#FF0000',\n            'line-opacity': 0.8\n          }\n        });\n\n        this.map.addSource(\"osm-user-history-source\", {\n          type: 'geojson',\n          data: feature4326\n        });\n\n        this.map.addLayer({\n          'id': 'osm-user-history',\n          'type': 'line',\n          'source': \"osm-user-history-source\",\n          'layout': {},\n          'paint': {\n            'line-color': '#FF0000',\n            'line-opacity': 0.8\n          },\n          \"filter\": [\"in\", \"$type\", \"Polygon\", \"LineString\"]\n        });\n\n        this.map.addLayer({\n          'id': 'osm-user-history-circle',\n          'type': 'circle',\n          'source': \"osm-user-history-source\",\n          'layout': {},\n          'paint': {\n            'circle-color': '#FF0000',\n            'circle-opacity': 0.8\n          },\n          \"filter\": [\"==\", \"$type\", \"Point\"]\n        });\n\n      } else {\n\n        this.map.getSource('osm-user-history-source').setData(feature4326);\n        this.map.getSource('osm-user-history-bbox-source').setData(turf.bboxPolygon(finalBbox));\n        \n        \n      }\n\n    // }\n    \n\n    try {\n\n      this.map.stop();\n      this.map.fitBounds([[finalBbox[0], finalBbox[1]],\n      [finalBbox[2], finalBbox[3]]], {\n          padding: { top: 100, bottom: 100, left: 100, right: 100 }\n        }, { osmUserHistory: true });\n    } catch (e) {\n      this.handleMoveEnd({ osmUserHistory: true });\n    }\n  }\n\n  updateCurrentCholopleth(cholopleth, choloplethMode, currentIndividual) {\n\n    // turning on and off \n    let choloplethVisibility = cholopleth ? 'visible' : 'none';\n\n    this.map.setLayoutProperty(\"world-map-layer\", 'visibility', choloplethVisibility);\n    this.map.setLayoutProperty(\"world-map-line-layer\", 'visibility', choloplethVisibility);\n\n    let currentCountryJSON = null;\n\n    if (!_.isNull(currentIndividual)) {\n      // debugger;\n      currentCountryJSON = currentIndividual;\n\n    } else if (choloplethMode === \"all\") {\n\n      currentCountryJSON = { \n        country_counts: country_analysis_all \n      };\n\n    } else if (choloplethMode === \"top20\"){\n      \n      currentCountryJSON = {\n        country_counts: country_analysis_top_20\n      };\n\n    } else { // top5\n      \n      currentCountryJSON = {\n        country_counts: country_analysis_top_5\n      };\n\n    }\n\n    if (!_.isNull(currentCountryJSON) && cholopleth) {\n      this.updateCurrentCountryJSON(currentCountryJSON);\n    }\n\n  }\n\n  updateCurrentCountryJSON(currentCountryJSON) {\n    var expression = [\"match\", [\"get\", \"py_id\"]];\n\n    let colorScale = d3.scaleLinear()\n      .domain([1184972887,\n        1346511620,\n        1360958163,\n        1378200802,\n        1395305792,\n        1438380051,\n        1479834657,\n        1502367226,\n        1510168743,\n        1516131630])\n      .range([\"#ffffcc\",\n        \"#d6efc2\",\n        \"#acdeb7\",\n        \"#81ceba\",\n        \"#56bec1\",\n        \"#3caac2\",\n        \"#3391bc\",\n        \"#2b77b4\",\n        \"#2855a4\",\n        \"#253494\"])\n\n    var extent = [0, d3.max(currentCountryJSON.country_counts, cc => {\n      return cc.count;\n    })];\n\n\n    var finalDomain = [extent[0],\n    extent[0] + (extent[1] - extent[0]) / 9 * 1,\n    extent[0] + (extent[1] - extent[0]) / 9 * 2,\n    extent[0] + (extent[1] - extent[0]) / 9 * 3,\n    extent[0] + (extent[1] - extent[0]) / 9 * 4,\n    extent[0] + (extent[1] - extent[0]) / 9 * 5,\n    extent[0] + (extent[1] - extent[0]) / 9 * 6,\n    extent[0] + (extent[1] - extent[0]) / 9 * 7,\n    extent[0] + (extent[1] - extent[0]) / 9 * 8,\n    extent[0] + (extent[1] - extent[0]) / 9 * 9];\n\n\n    colorScale.domain(finalDomain);\n\n    _.each(currentCountryJSON.country_counts, cc => {\n\n      expression.push(cc.world_id, colorScale(cc.count));\n    });\n\n\n    expression.push(\"#ffffcc\");\n\n    this.map.setPaintProperty(\"world-map-layer\", \"fill-color\", expression);\n  }\n\n  updateCurrentFeature(currentFeature) {\n      console.log(\"======updateCurrentFeature======\", currentFeature);\n      let feature4326 = toWgs84(currentFeature.feature, proj4('EPSG:3857'));\n\n\n      if (_.isUndefined(this.map.getSource('currentFeature'))) {\n        this.map.addSource('currentFeature', {\n          type: 'geojson',\n          data: feature4326\n        });\n        this.map.addLayer({\n          \"id\": \"currentFeature-point\",\n          \"type\": \"circle\",\n          \"source\": \"currentFeature\",\n          \"paint\": {\n            \"circle-radius\": 10,\n            \"circle-opacity\": 0.7,\n            \"circle-color\": \"#FF0000\"\n          },\n          filter: [\"==\", \"$type\", \"Point\"]\n        }, 'place-city-sm');\n        this.map.addLayer({\n          \"id\": \"currentFeature-line\",\n          \"type\": \"line\",\n          \"source\": \"currentFeature\",\n          \"paint\": {\n            \"line-opacity\": 0.7,\n            \"line-width\": 1,\n            \"line-color\": \"#FF0000\"\n          },\n          filter: [\"in\", \"$type\", \"LineString\", \"Polygon\"]\n        }, 'place-city-sm');\n\n\n      } else {\n\n        this.map.getSource('currentFeature').setData(feature4326);\n      }\n      \n\n      if (feature4326.features[0].geometry.type === \"Point\") {\n        this.map.stop();\n        this.map.flyTo({\n          center: feature4326.features[0].geometry.coordinates,\n          zoom: randomBetween(12, 14)\n        }, { zoomInData: true });\n\n      } else {\n       \n        let bbox = turf.bbox(feature4326);\n        let buffered = turf.buffer(turf.bboxPolygon(bbox), 1, \"miles\");\n        let finalBbox = turf.bbox(buffered)\n\n        try {\n\n          this.map.stop();\n          this.map.fitBounds([[finalBbox[0], finalBbox[1]],\n          [finalBbox[2], finalBbox[3]]], {\n              padding: { top: 100, bottom: 100, left: 100, right: 100 }\n            }, { zoomInData: true });\n        } catch (e) {\n          this.handleMoveEnd({ zoomInData: true });\n        }\n      }\n\n  }\n\n  handleMoveEnd(e){\n    // console.log(e);\n    \n    if (e.osmUserHistory) {\n      _.delay(() => {\n        try {\n          let nextNum = (this.props.osmUserHistoriesIdx + 1) % this.props.osmUserHistories.length;\n          this.props.dispatch(changeOsmUserHistoriesIdx(nextNum));    \n        } catch(e){\n\n        }\n        \n      }, 4000);\n\n    }\n    \n  }\n\n\n  render() {\n    let { windowHeight } = this.props;\n    return (\n      <div ref={ c => { this.refsMapContainer = c; }} className=\"map-container\" style={{height: windowHeight}}>\n      </div>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n\n  return {\n    windowWidth: state.windowWidth,\n    windowHeight: state.windowHeight,\n    nkTile: state.nkTile,\n    cholopleth: state.cholopleth,\n    zoom: state.zoom,\n    mapLoaded: state.mapLoaded,\n    center: state.center,\n    currentSeq: state.currentSeq,\n    currentFeature: state.currentFeature,\n    currentTimeStamp: state.currentTimeStamp,\n    currentIndividual: state.currentIndividual,\n    choloplethMode: state.choloplethMode,\n    selectedOsmUserResponse: state.selectedOsmUserResponse,\n    osmUserHistories: state.osmUserHistories,\n    osmUserHistoriesIdx: state.osmUserHistoriesIdx\n  }\n}\n\nexport default connect(mapStateToProps)(MapContainer);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { changeMapLoaded } from '../actions';\nimport turf from 'turf';\nimport { toWgs84 }  from 'reproject';\nimport proj4 from 'proj4';\nimport _ from 'lodash';\n\nvar isFirstTransition = false;\nclass PageMapContainer extends Component {\n\n  componentDidMount() {\n    window.mapboxgl.accessToken = 'pk.eyJ1Ijoic2Vuc2VhYmxlIiwiYSI6ImxSNC1wc28ifQ.hst-boAjFCngpjzrbXrShw';\n\n    this.map = new window.mapboxgl.Map({\n      container: this.refsPageMapContainer,\n      style: 'mapbox://styles/senseable/cjnr299am1ljs2spk9a4t2sdz',\n      zoom: 7.133251225192166,\n      // minZoom: ,\n      center: [129.39850149741085, 40.36695472501947],\n      interactive: false\n    });\n\n\n    window.map = this.map;\n    this.map.on('style.load', this.handleStyleLoad.bind(this));\n  }\n  \n  handleStyleLoad(e){\n    this.props.dispatch(changeMapLoaded(true));\n\n    this.map.addSource('currentFeature-bbox', {\n      type: 'geojson',\n      data: {\n        type: 'Feature',\n        coordinates: [[[-67.13734351262877, 45.137451890638886],\n                       [-66.96466, 44.8097],\n                       [-67.13734351262877, 45.137451890638886]]]\n      }\n    });\n\n    this.map.addSource('nk-line', {\n      type: 'vector',\n      tiles: ['http://rc.libremaps.net:3005/services/vector-tiles/nk_osm_line/{z}/{x}/{y}.pbf']\n    })\n\n    this.map.addSource('nk-polygon', {\n      type: 'vector',\n      tiles: ['http://rc.libremaps.net:3005/services/vector-tiles/nk_osm_polygon/{z}/{x}/{y}.pbf']\n    })\n  \n    this.map.addSource('nk-point', {\n      type: 'vector',\n      tiles: ['http://rc.libremaps.net:3005/services/vector-tiles/nk_osm_point/{z}/{x}/{y}.pbf;']\n    })\n\n    this.map.addLayer({\n      id: 'currentFeature-bbox-layer',\n      source: 'currentFeature-bbox',\n      type: 'fill',\n      paint: {\n        'fill-color': '#FF0000',\n        'fill-opacity': 0.3\n      }\n    });\n\n    this.map.addLayer({\n      \"id\": \"nk-line-layer\",\n      \"source\": \"nk-line\",\n      \"source-layer\": \"nk_osm_line_4326\",\n      \"type\": \"line\",\n      \"paint\": {\n        'line-opacity': 0.25,\n        'line-color':  {\n          property: 't',\n          stops: [\n            [1184972887, \"#ffffcc\"],\n            [1346511620, \"#d6efc2\"],\n            [1360958163, \"#acdeb7\"],\n            [1378200802, \"#81ceba\"],\n            [1395305792, \"#56bec1\"],\n            [1438380051, \"#3caac2\"],\n            [1479834657, \"#3391bc\"],\n            [1502367226, \"#2b77b4\"],\n            [1510168743, \"#2855a4\"],\n            [1516131630, \"#253494\"]\n          ]\n        }\n      },\n      \"filter\": [\"<\", 't', 1384972887]\n    }, 'place-city-sm');\n\n    this.map.addLayer({\n      \"id\": \"nk-polygon-layer\",\n      \"source\": \"nk-polygon\",\n      \"source-layer\": \"nk_osm_polygon_4326\",\n      \"type\": \"fill\",\n      \"paint\": {\n        'fill-opacity': 0.5,\n        'fill-color':  {\n          property: 't',\n          stops: [\n            [1184972887, \"#ffffcc\"],\n            [1346511620, \"#d6efc2\"],\n            [1360958163, \"#acdeb7\"],\n            [1378200802, \"#81ceba\"],\n            [1395305792, \"#56bec1\"],\n            [1438380051, \"#3caac2\"],\n            [1479834657, \"#3391bc\"],\n            [1502367226, \"#2b77b4\"],\n            [1510168743, \"#2855a4\"],\n            [1516131630, \"#253494\"]\n          ]\n        }\n      },\n      \"filter\": [\"<\", 't', 1384972887]\n    }, 'place-city-sm');\n\n    this.map.addLayer({\n      \"id\": \"nk-point-layer\",\n      \"source\": \"nk-point\",\n      \"source-layer\": \"nk_osm_point_4326\",\n      \"type\": \"circle\",\n      \"paint\": {\n        'circle-radius': 2,\n        'circle-color':  {\n          property: 't',\n          stops: [\n            [1184972887, \"#ffffcc\"],\n            [1346511620, \"#d6efc2\"],\n            [1360958163, \"#acdeb7\"],\n            [1378200802, \"#81ceba\"],\n            [1395305792, \"#56bec1\"],\n            [1438380051, \"#3caac2\"],\n            [1479834657, \"#3391bc\"],\n            [1502367226, \"#2b77b4\"],\n            [1510168743, \"#2855a4\"],\n            [1516131630, \"#253494\"]\n          ]\n        }\n      },\n      \"filter\": [\"<\", 't', 1384972887]\n    }, 'place-city-sm');\n\n\n  }\n\n  componentWillReceiveProps(newProps) {\n\n\n\n    let { currentFeature, currentTimeStamp, currentSeq } = newProps;\n   \n    if (!_.isNull(currentFeature)){\n      \n      if (currentSeq !== this.props.currentSeq) {\n         console.log(currentFeature, \"newProps.currentseq: \", currentSeq, \"this.props.currentSeq:\", this.props.currentSeq);\n        console.log(\"will do transition\");\n        this.updateCurrentFeature(currentFeature);\n      } else if (isFirstTransition) {\n        isFirstTransition = false;\n         console.log(currentFeature, \"newProps.currentseq: \", currentSeq, \"this.props.currentSeq:\", this.props.currentSeq);\n\n        console.log(\"will do transition but it's first\");\n        this.updateCurrentFeature(currentFeature);\n      } else {\n        console.log(\"will not\");\n\n      }\n    } \n    if (currentTimeStamp !== this.props.currentTimeStamp) {\n      this.map.setFilter('nk-line-layer', [\"<\", \"t\", currentTimeStamp]);\n      this.map.setFilter('nk-polygon-layer', [\"<\", \"t\", currentTimeStamp]);\n      this.map.setFilter('nk-point-layer', [\"<\", \"t\", currentTimeStamp]);  \n    }\n  }\n\n  componentWillUnmount(){\n\n  }\n\n  componentDidUpdate(){\n    this.map.resize();\n\n  }\n\n  updateCurrentFeature(currentFeature) {\n\n    let feature4326 = toWgs84(currentFeature.feature, proj4('EPSG:3857'));\n\n    \n    let bbox = turf.bbox(feature4326);\n    let buffered = turf.buffer(turf.bboxPolygon(bbox), 25, \"miles\");\n\n    this.map.getSource('currentFeature-bbox').setData(buffered);\n\n  }\n  render() {\n    let { windowHeight } = this.props;\n    return (\n      <div ref={ c => { this.refsPageMapContainer = c; }} className=\"map-container\" style={{height: windowHeight }}>\n      </div>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    windowWidth: state.windowWidth,\n    windowHeight: state.windowHeight,\n    currentSeq: state.currentSeq,\n    currentFeature: state.currentFeature,\n    currentTimeStamp: state.currentTimeStamp\n  }\n}\n\nexport default connect(mapStateToProps)(PageMapContainer);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport moment from 'moment';\n\nconst Fragment = React.Fragment;\n\nclass ContributorInfo extends Component {\n  render() {\n    let { currentFeature } = this.props;\n\n    return (\n      <Fragment>\n        <div className=\"contributor-info left\">\n          <div className=\"name\">\n            { currentFeature.osm_user.osm_user }\n          </div>\n        </div>\n\n        <div className=\"contributor-info center\">\n          <div className=\"time\">\n            { //moment(currentFeature.osm_timestamp * 1000).format(\"YYYY MM DD\") }\n              moment.unix(currentFeature.osm_timestamp).format(\"MMMM DD, YYYY\")\n            }\n          </div>\n        </div>\n\n\n        <div className=\"contributor-info right\">\n          <div className=\"rank\">\n            { currentFeature.osm_user.rank } of 887\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    currentFeature: state.currentFeature\n  }\n}\n\n\n\nexport default connect(mapStateToProps)(ContributorInfo);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\nclass CenterMarker extends Component {\n  render() {\n    let { currentFeature } = this.props;\n\n    return (\n      <div className=\"center-marker\">\n        {\n          currentFeature.name\n        }\n      </div>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    currentFeature: state.currentFeature\n  }\n}\n\nexport default connect(mapStateToProps)(CenterMarker);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport _ from 'lodash';\nimport { numberWithDelimiter } from '../utils';\nimport { ContDistribution, ChoroplethMap } from './'\nimport worldData from '../constants/world_data.json';\n\n\nclass MessageContributorInfo extends Component {\n  getTopThreeCountries(countryCounts){\n    // countryCounts\n    let sortedCounts = _.sortBy(countryCounts, cc => { return cc.count }).reverse();\n    let splicedCounts = _.filter(sortedCounts, sc => { return sc.count > 0; }).splice(0, 5);\n\n    _.each(splicedCounts, (sp, i) => {\n      splicedCounts[i].nameKo = _.find(worldData, wd => { return wd.id === sp.world_id; }).name_ko;\n      splicedCounts[i].nameEn = _.find(worldData, wd => { return wd.id === sp.world_id; }).name_en;\n    })\n    return splicedCounts;\n\n  }\n  render() {\n\n\n    let { currentFeature } = this.props;\n    let countryCounts = currentFeature.osm_user.country_counts;\n    let topThreeCountries = this.getTopThreeCountries(countryCounts);\n\n    return (\n      <div className=\"msg-contributor-info\">\n        <div className=\"name-rank-area\">\n          <div className=\"lv\">\n            <div className=\"label\">\n              지도 기여자\n            </div>\n            <div className=\"value\">\n              { currentFeature.osm_user.osm_user }\n            </div>\n          </div>\n          <div className=\"lv\">\n            <div className=\"label\">\n              순위\n            </div>\n            <div className=\"value\">\n              { currentFeature.osm_user.rank } of 889\n            </div>\n          </div>\n        </div>\n\n        <div className=\"name-rank-area\">\n          <div className=\"lv\">\n            <ContDistribution width={250} height={200} allCount={currentFeature.osm_user.all_count} />\n          </div>\n          <div className=\"lv\">\n            <div className=\"label\">\n              오픈스트리트맵 총 기여셋 횟수*\n            </div>\n            <div className=\"value\">\n              { numberWithDelimiter(currentFeature.osm_user.total_contribution_count) }\n            </div>\n            <div className=\"l-apple-box\">\n            </div>\n            <div className=\"label\">\n              북한 지도 기여 횟수\n            </div>\n            <div className=\"value\">\n              { numberWithDelimiter(currentFeature.osm_user.all_count) }\n            </div>\n            <div className=\"disclaimer\">\n              * 오픈스트리트맵은 여러 개의 지물을 고쳐 하나의 체인지세트(changeset) 단위로 업로드하는데, 총 기여세트 횟수는 이 체인지세트의 개수를 나타냅니다. 실제로 북한 지도에 기여된 지물의 개수보다 적게 나오기도 하는 이유가 됩니다. \n            </div>\n\n          </div>\n        </div>\n\n        <div className=\"changeset-area\">\n          <div className=\"title-area\">\n            <div className=\"label\">\n              지도 기여자의 과거 기여셋 이력 비교\n            </div>\n            <div className=\"value\">\n              {\n                _.map(topThreeCountries, (c, i) => { \n                  return( \n                    <span key={i}>\n                      { `${c.nameKo}${i === topThreeCountries.length - 1 ? \"\" : \", \"}` } \n                    </span>\n                  );\n                })\n              }\n            </div>\n\n          </div>\n\n          <div className=\"choromap-container\">\n            <ChoroplethMap />\n          </div>\n\n        </div>\n\n      </div>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    currentFeature: state.currentFeature\n  }\n}\n\n\n\nexport default connect(mapStateToProps)(MessageContributorInfo);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport * as d3 from 'd3';\nimport { numberWithDelimiter } from '../utils';\nimport _ from 'lodash';\n\nconst HIST = [{\"key\":0,\"value\":0},{\"key\":756.82,\"value\":854.0},{\"key\":2268.46,\"value\":17.0},{\"key\":3780.1000000000004,\"value\":4.0},{\"key\":5291.740000000001,\"value\":4.0},{\"key\":6803.38,\"value\":0.0},{\"key\":8315.02,\"value\":1.0},{\"key\":9826.66,\"value\":1.0},{\"key\":11338.300000000001,\"value\":2.0},{\"key\":12849.94,\"value\":0.0},{\"key\":14361.580000000002,\"value\":1.0},{\"key\":15873.220000000001,\"value\":0.0},{\"key\":17384.86,\"value\":0.0},{\"key\":18896.5,\"value\":0.0},{\"key\":20408.140000000003,\"value\":0.0},{\"key\":21919.780000000002,\"value\":0.0},{\"key\":23431.420000000002,\"value\":0.0},{\"key\":24943.06,\"value\":1.0},{\"key\":26454.7,\"value\":0.0},{\"key\":27966.34,\"value\":0.0},{\"key\":29477.980000000003,\"value\":0.0},{\"key\":30989.620000000003,\"value\":0.0},{\"key\":32501.260000000002,\"value\":1.0},{\"key\":34012.9,\"value\":0.0},{\"key\":35524.54,\"value\":0.0},{\"key\":37036.18,\"value\":0.0},{\"key\":38547.82,\"value\":0.0},{\"key\":40059.46,\"value\":0.0},{\"key\":41571.100000000006,\"value\":0.0},{\"key\":43082.740000000005,\"value\":0.0},{\"key\":44594.380000000005,\"value\":0.0},{\"key\":46106.020000000004,\"value\":0.0},{\"key\":47617.66,\"value\":0.0},{\"key\":49129.3,\"value\":0.0},{\"key\":50640.94,\"value\":0.0},{\"key\":52152.58,\"value\":0.0},{\"key\":53664.22,\"value\":0.0},{\"key\":55175.86,\"value\":0.0},{\"key\":56687.50000000001,\"value\":0.0},{\"key\":58199.14000000001,\"value\":0.0},{\"key\":59710.780000000006,\"value\":0.0},{\"key\":61222.420000000006,\"value\":0.0},{\"key\":62734.060000000005,\"value\":0.0},{\"key\":64245.700000000004,\"value\":0.0},{\"key\":65757.34000000001,\"value\":0.0},{\"key\":67268.98000000001,\"value\":0.0},{\"key\":68780.62000000001,\"value\":0.0},{\"key\":70292.26000000001,\"value\":0.0},{\"key\":71803.90000000001,\"value\":0.0},{\"key\":73315.54000000001,\"value\":0.0},{\"key\":74827.18000000001,\"value\":1.0}];\n\n\nclass ContDistribution extends Component {\n  componentDidMount(){\n    this.d3Render(this.props);\n  }\n\n  componentWillReceiveProps(newProps){\n    this.d3Render(newProps);\n  }\n\n  d3Render(props){\n      // HIST.push({key: _.last(HIST).key + 0, value: 0});\n      \n      let xDomain = [_.first(HIST).key, _.last(HIST).key];\n      let yDomain = [0, d3.max(HIST, h => { return h.value })];\n      // HIST.unshift({key: 0, value: 0});\n\n      this.xScale = d3.scaleLinear()\n        .domain(xDomain)\n        .range([30, props.width - 30]);\n\n      this.yScale = d3.scaleLinear()\n        .domain(yDomain)\n        .clamp(true)\n        .range([props.height - 30, 50]);\n\n\n      var svg = d3.select(this.svgContainer);\n      svg.selectAll(\"*\").remove();\n\n      let lineDraw = d3.line()\n        // .curve(d3.curveCardinal)\n        .x(d => {\n          return this.xScale(d.key)\n        })\n        .y(d => {\n          return this.yScale(d.value)\n        });\n\n\n\n\n      svg.append(\"path\")\n        .data([HIST])\n        .attr(\"class\", \"line\")\n        .attr(\"fill\", \"#ECF7FA\")\n        .attr(\"stroke\", \"#727272\")\n        .attr(\"stroke-width\", 1)\n        .attr(\"d\", lineDraw);\n\n\n      var xAxis = svg.append(\"g\")\n        .attr(\"transform\", `translate(0, ${props.height - 10})`);\n\n      xAxis.append(\"line\")\n        .attr(\"stroke\", \"#727272\")\n        .attr(\"stroke-width\", 0.5)\n        .attr(\"x1\", 0)\n        .attr(\"y1\", -19)\n        .attr(\"x2\", props.width)\n        .attr(\"y2\", -19)\n\n      \n      xAxis.selectAll(\"text\")\n          .data([0, 10000, 30000, 50000, 70000])\n        .enter().append(\"text\")\n          .attr(\"fill\", \"#AAAAAA\")\n          .style(\"font-size\", \"0.6em\")\n          .attr(\"text-anchor\", d => { return d === 60 ? \"end\" : \"middle\" })\n          .attr(\"x\", d => { return this.xScale(d) })\n          .attr(\"y\", -2)\n          .text(d => { return d === 0.0 ? \"0\" : `${numberWithDelimiter(d / 1000)}K` });\n\n      xAxis.selectAll(\"text\")\n          .data(HIST)\n        .enter().append(\"text\")\n\n\n\n\n        svg.append(\"line\")\n          .attr(\"stroke\", \"black\")\n          .attr(\"stroke-width\", 2)\n          .attr(\"x1\", this.xScale(props.allCount))\n          .attr(\"y1\", 15)\n          .attr(\"x2\", this.xScale(props.allCount))\n          .attr(\"y2\", props.height - 25)\n\n    \n      \n      // svg.append(\"text\")\n      //     .attr(\"fill\", \"#AAAAAA\")\n      //     .attr(\"x\", 0)\n      //     .attr(\"y\", this.yScale(yDomain[0]) - 5)\n      //     .text(yDomain[0]);\n\n      // svg.append(\"text\")\n      //     .attr(\"fill\", \"#AAAAAA\")\n      //     .attr(\"x\", 0)\n      //     .attr(\"y\", this.yScale(yDomain[1]) + 5)\n      //     .text( numberWithDelimiter(yDomain[1]) );\n\n\n\n    \n  }\n\n  render() {\n    return (\n      <svg className={`distribution-index${this.props.className}`} style={{ width: this.props.width, height: this.props.height }}>\n        <g ref={ c => { this.svgContainer = c; } }>\n        </g>\n        { this.props.children }\n      </svg>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n\n  }\n};\n\nexport default connect(mapStateToProps)(ContDistribution);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { numberWithDelimiter } from '../utils';\nimport * as d3 from 'd3';\nimport _ from 'lodash';\n\nconst Fragment = React.Fragment;\nclass MapContainer extends Component {\n\n  componentDidMount() {\n    window.mapboxgl.accessToken = 'pk.eyJ1Ijoic2Vuc2VhYmxlIiwiYSI6ImxSNC1wc28ifQ.hst-boAjFCngpjzrbXrShw';\n\n    this.map = new window.mapboxgl.Map({\n      container: this.refsMapContainer,\n      style: 'mapbox://styles/senseable/cjnr299am1ljs2spk9a4t2sdz',\n      zoom: 0.3431335719213704,\n      center: [9.629819343809345, 30.34808136525487],\n      interactive: false\n    });\n    // window.map = this.map;\n    this.map.on('style.load', this.handleStyleLoad.bind(this));\n    this.map.on('moveend', this.handleMoveEnd.bind(this));\n  }\n  \n  handleStyleLoad(e){\n    this.map.addSource(\"world-map-source\", {\n      type: 'vector',\n      url: 'mapbox://senseable.8x6k6499'\n    });\n\n   this.map.addLayer({\n      \"id\": \"world-map-layer\",\n      \"source\": \"world-map-source\",\n      \"source-layer\": \"world_assoc-c3znvj\",\n      \"type\": \"fill\",\n      \"paint\": {\n        'fill-opacity': 0.7,\n        'fill-color': '#FFFFFF'\n      }\n    }, 'waterway-label');\n\n   this.map.addLayer({\n      \"id\": \"world-map-line-layer\",\n      \"source\": \"world-map-source\",\n      \"source-layer\": \"world_assoc-c3znvj\",\n      \"type\": \"line\",\n      \"paint\": {\n        'line-opacity': 0.2,\n        'line-color': '#BBB',\n        'line-width': 1\n      }\n    }, 'waterway-label');\n\n\n  }\n\n  componentWillReceiveProps(newProps) {\n    let { currentFeature } = newProps;\n\n    if (!_.isNull(currentFeature)){\n\n      if (_.isNull(this.props.currentFeature)) {\n        this.updateCurrentFeature(currentFeature);\n      } else if (currentFeature.osm_id !== this.props.currentFeature.osm_id) {\n        this.updateCurrentFeature(currentFeature);\n      }\n    }\n    \n  }\n\n  updateCurrentFeature(currentFeature){\n\n    var expression = [\"match\", [\"get\", \"py_id\"]];\n\n    // Calculate color for each state based on the unemployment rate\n    \n    let colorScale = d3.scaleLinear()\n      .domain([1184972887, \n               1346511620, \n               1360958163, \n               1378200802, \n               1395305792, \n               1438380051, \n               1479834657, \n               1502367226, \n               1510168743, \n               1516131630])\n      .range([\"#ffffcc\",\n              \"#d6efc2\",\n              \"#acdeb7\",\n              \"#81ceba\",\n              \"#56bec1\",\n              \"#3caac2\",\n              \"#3391bc\",\n              \"#2b77b4\",\n              \"#2855a4\",\n              \"#253494\"])\n\n    var extent = d3.extent(currentFeature.osm_user.country_counts, cc => {\n      return cc.count;\n    })\n\n\n    var finalDomain = [extent[0], \n                       extent[0] + (extent[1] - extent[0]) / 9 * 1,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 2,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 3,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 4,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 5,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 6,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 7,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 8,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 9];\n\n\n    colorScale.domain(finalDomain);\n\n    _.each(currentFeature.osm_user.country_counts, cc => {\n\n      expression.push(cc.world_id, colorScale(cc.count));\n    });\n\n\n    expression.push(\"rgba(0,0,0,0)\");\n\n    this.map.setPaintProperty(\"world-map-layer\", \"fill-color\", expression);\n\n  }\n\n  componentDidUpdate(){\n    this.map.resize();\n  }\n\n\n  handleMoveEnd(e){\n\n    \n  }\n\n\n  render() {\n    let { currentFeature } = this.props;\n    let colorScale = d3.scaleLinear()\n      .range([\"#ffffcc\",\n              \"#d6efc2\",\n              \"#acdeb7\",\n              \"#81ceba\",\n              \"#56bec1\",\n              \"#3caac2\",\n              \"#3391bc\",\n              \"#2b77b4\",\n              \"#2855a4\",\n              \"#253494\"])\n\n    var extent = d3.extent(currentFeature.osm_user.country_counts, cc => {\n      return cc.count;\n    })\n\n    var finalDomain = [extent[0], \n                       extent[0] + (extent[1] - extent[0]) / 9 * 1,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 2,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 3,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 4,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 5,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 6,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 7,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 8,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 9];\n\n\n    colorScale.domain(finalDomain);\n\n    return (\n      <Fragment>\n        <div ref={ c => { this.refsMapContainer = c; }} className=\"map-container-choropleth\" style={{width: \"100%\", height: 500}}>\n        </div>\n        \n        <div className=\"sub-legend\">\n          <div className=\"title\">\n            기여 횟수\n          </div>\n          {\n            _.map(finalDomain, (val, i) => {\n              if (_.isUndefined(val)) {\n                return null;\n              } else {\n                return (\n                  <div key={i} className=\"legend-sub-area\">\n                    <div className=\"color-box\" style={{ backgroundColor: colorScale(val) }}>\n                    </div>\n                    <div className=\"value\">\n                      { numberWithDelimiter(Number(val.toFixed(0))) }\n                    </div>\n                  </div>\n                ); \n              }\n\n              \n            })\n          }\n        </div>\n\n      </Fragment>\n\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    currentSeq: state.currentSeq,\n    currentFeature: state.currentFeature,\n    currentTimeStamp: state.currentTimeStamp\n  }\n}\n\nexport default connect(mapStateToProps)(MapContainer);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport moment from 'moment';\nimport * as d3 from 'd3';\nimport _ from 'lodash';\n\nclass YearLegend extends Component {\n\n  render() {\n    let { legend } = this.props;\n    let domain = [1184972887, \n              1346511620, \n              1360958163, \n              1378200802, \n              1395305792, \n              1438380051, \n              1479834657, \n              1502367226, \n              1510168743, \n              1516131630]\n    let yearScale = d3.scaleLinear()\n      .domain(domain)\n      .range([\"#ffffcc\",\n                \"#d6efc2\",\n                \"#acdeb7\",\n                \"#81ceba\",\n                \"#56bec1\",\n                \"#3caac2\",\n                \"#3391bc\",\n                \"#2b77b4\",\n                \"#2855a4\",\n                \"#253494\"]);\n\n    return (\n      <div className=\"year-legend\" style={{ opacity: legend ? 1 : 0 }}>\n        <div className=\"title\">\n          Date of Contribution\n        </div>\n        {\n          _.map(domain, (val, i) => {\n            if (_.isUndefined(val)) {\n              return null;\n            } else {\n              return (\n                <div key={i} className=\"legend-sub-area\">\n                  <div className=\"color-box\" style={{ backgroundColor: yearScale(val) }}>\n                  </div>\n                  <div className=\"value\">\n                    { moment.unix(val).format(\"YYYY MMM\") }\n                    {\n                      !(i + 1 > domain.length - 1) ? \n                      `-${moment.unix(domain[i + 1]).format(\"YYYY MMM\")}` :\n                      \"-\"\n                    }\n                  </div>\n                </div>\n              ); \n            }\n\n            \n          })\n        }\n      </div>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    legend: state.legend\n  }\n}\n\n\nexport default connect(mapStateToProps)(YearLegend);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport moment from 'moment';\n\nconst Fragment = React.Fragment;\n\nclass MessageTopInfo extends Component {\n  render() {\n    let { currentFeature } = this.props;\n    return (\n      <Fragment>\n        <div className=\"contributor-info center\">\n          <div className=\"time\">\n            { //moment(currentFeature.osm_timestamp * 1000).format(\"YYYY MM DD\") }\n              moment.unix(currentFeature.osm_timestamp).format(\"MMMM DD, YYYY\")\n            }\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    currentFeature: state.currentFeature\n  }\n}\n\n\n\nexport default connect(mapStateToProps)(MessageTopInfo);\n","const TITLE_TYPE = `\n  font-family: 'Alfa Slab One', cursive;\n  font-size: 1em;\n  line-height: 1.2em;\n  font-style: normal;\n  font-weight: 400;\n  text-rendering: optimizeLegibility;\n`;\n\nconst REGULAR_TYPE = `\n  font-family: 'Caponi Text', 'Noto Serif KR', serif;\n  font-size: 1em;\n  line-height: 1.6em;\n  font-style: normal;\n  font-weight: 400;\n  text-rendering: optimizeLegibility;\n`;\n\nconst BOLD_TYPE = `\n  font-family: 'Caponi Text', 'Noto Serif KR', serif;\n  font-size: 1em;\n  line-height: 1.6em;\n  font-style: normal;\n  font-weight: 400;\n  text-rendering: optimizeLegibility;\n`;\n\nconst LABEL_BOLD_TYPE = `\n  font-family: 'Roboto', sans-serif;\n  font-size: 1em;\n  line-height: 1.6em;\n  font-style: normal;\n  font-weight: 700;\n  text-rendering: optimizeLegibility;\n`;\n\nconst LABEL_REGULAR_TYPE = `\n  font-family: 'Roboto', sans-serif;\n  font-size: 1em;\n  line-height: 1.6em;\n  font-style: normal;\n  font-weight: 400;\n  text-rendering: optimizeLegibility;\n`;\n\nconst LABEL_ITALIC_TYPE = `\n  font-family: 'Roboto', sans-serif;\n  font-size: 1em;\n  line-height: 1.6em;\n  font-style: normal;\n  font-weight: 400;\n  text-rendering: optimizeLegibility;\n`;\n\nconst ABSOLUTE_MIDDLE = `\n  transform: translate(0, -50%);\n`;\n\nconst ABSOLUTE_CENTER = `\n  transform: translate(-50%, 0);\n`;\n\nconst ABSOLUTE_CENTER_MIDDLE = `\n  transform: translate(-50%, -50%);\n`;\n\nexport default {\n  REGULAR_TYPE,\n  TITLE_TYPE,\n  BOLD_TYPE,\n  LABEL_BOLD_TYPE,\n  LABEL_REGULAR_TYPE,\n  LABEL_ITALIC_TYPE,\n  ABSOLUTE_CENTER,\n  ABSOLUTE_CENTER_MIDDLE,\n  ABSOLUTE_MIDDLE\n};","import styled from 'styled-components';\nimport mixins from './mixins';\n\nconst SectionContainer = styled.section`\n  width: 100%;\n  position: relative;\n`;\n\nconst Gutter = styled.div`\n  height: ${props => props.h}px;\n`;\n\nconst Sticky = styled.div`\n  position:sticky;\n  top: 10px;\n  height:auto;\n`;\n\nconst NonSticky = styled.div`\n  width: 400px;\n  position:relative;\n  margin: 0 auto;\n  z-index:5;\n  ${mixins.BOLD_TYPE}\n  font-size:1.2em;\n  line-height:1.4;\n  border: 1px solid #BBB;\n  padding: 10px 15px;\n  background: #E7F7FB;\n  color: black;\n`;\n\n\nconst Box = styled.div`\n  /* ${mixins.ABSOLUTE_CENTER} */\n  /* position: absolute; */\n  /* left: 50%; */\n  /* top: 0; */\n  width: 450px;\n  margin: 0 auto;\n  height: auto;\n  \n  ${mixins.BOLD_TYPE}\n  font-size:1.2em;\n  border: 1px solid #BBB;\n  padding: 10px 15px;\n  background: #E7F7FB;\n  color: black;\n`;\n\nexport {\n  SectionContainer,\n  Box,\n  Sticky,\n  NonSticky,\n  Gutter\n};","import React, { Component } from 'react'\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport mixins from '../stylesheets/mixins';\nimport {SectionContainer } from '../stylesheets/components';\nimport moment from 'moment';\nimport _ from 'lodash';\n\nconst InterestingPOIsContainer = styled(SectionContainer)`\n  margin:0;\n`;\n\nconst POIBox = styled.div`\n  position: absolute;\n  left: 50%;\n  ${mixins.ABSOLUTE_CENTER}\n  top: 20px;\n  ${mixins.BOLD_TYPE}\n  font-size:1.2em;\n  border: 1px solid #BBB;\n  padding: 10px 15px;\n  background: white;\n  color: black;\n  display:flex;\n  justify-content: space-between;\n  width: 400px;\n`;\n\nconst TitleArea = styled.div`\n  width:200px;\n`;\n\nconst Label = styled.h4`\n  ${mixins.LABEL_BOLD_TYPE}\n  font-size:0.65em;\n  color:#777;\n  margin-bottom: 5px;\n`;\n\nconst Value = styled.div`\n  font-size: 0.9em;\n  color: black;\n  padding-right: 10px;\n`;\n\nconst Date = styled.div `\n  ${mixins.LABEL_REGULAR_TYPE}\n  font-size:0.6em;\n  color: #AAA;\n`;\n\nconst Disclaimer = styled.div `\n  ${mixins.LABEL_ITALIC_TYPE}\n  font-size:0.5em;\n  color: #AAA;\n`;\n\nclass InterestingPOIs extends Component {\n\n\n  render() {\n    let name = _.isUndefined(this.props.name_en) ? this.props.name : this.props.name_en;\n    \n    return (\n      <InterestingPOIsContainer className=\"trigger\" data-action-name=\"changeInterestingPOIs\" data-poi-id={this.props.op} style={{ height: this.props.windowHeight}}>\n        <POIBox>\n          <TitleArea>\n            <Label>\n              Name\n            </Label>\n            <Value>\n              {name }\n            </Value>\n          </TitleArea>\n          <TitleArea>\n            <Label>\n              Contributor\n            </Label>\n            <Value>\n              P{this.props.osm_user.id}*\n            </Value>\n            <Date>\n              {moment.unix(this.props.osm_timestamp).format(\"MMMM DD, YYYY\")}\n            </Date>\n            <Disclaimer>\n              * Names have been anonymized for privacy\n            </Disclaimer>\n          </TitleArea>\n        </POIBox>\n      </InterestingPOIsContainer>\n    )\n  }\n}\n\nlet mapStateToProps = state => {\n    return state;\n};\n\nexport default connect(mapStateToProps)(InterestingPOIs);","import React, { Component } from 'react'\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport mixins from '../stylesheets/mixins';\n\nconst HeaderContainer = styled.div`\n  position: fixed;\n  left: 10px;\n  top: 10px;\n  z-index: 5;\n  opacity: ${props => props.titleHeader ? 1 : 0};\n  ${mixins.TITLE_TYPE}\n  transition: 0.4s opacity;\n  border: 1px solid #CCCCCC;\n  padding: 7px;\n  background-color: white;\n  font-size: 0.8em;\n  color: black;\n\n  .ko {\n    ${mixins.BOLD_TYPE}\n    color: black;\n    font-size: 0.9em;\n  }\n`;\n\n\nclass TitleHeader extends Component {\n  render() {\n    return (\n      <HeaderContainer titleHeader={this.props.titleHeader}>    \n        Cartographers of North Korea &nbsp;<span className=\"ko\">북한의 지도 제작자</span>\n      </HeaderContainer>\n    )\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    titleHeader: state.titleHeader\n  }\n}\nexport default connect(mapStateToProps)(TitleHeader);","import React, { Component } from 'react'\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport mixins from '../stylesheets/mixins';\nimport {changeWorldMapIndividual } from '../actions';\nimport {KoreanLegend, IndividualInfo, NumberContributionLegend} from './';\n// import {SectionContainer, Box, Sticky} from '../stylesheets/components';\n// import osm_stats from '../constants/osm_users.json';\nimport * as d3 from 'd3';\nimport { numberWithDelimiter } from '../utils';\nimport _ from 'lodash';\nimport axios from 'axios';\n\nconst ContributorsGraphBox = styled.div`\n  background-color: white;\n  border: 1px solid #ccc;\n  width: 80%;\n  margin: 0 auto;\n  position: relative;\n`;\n\nconst Title = styled.div`\n  position: absolute;\n  left: 50%;\n  transform: translate(-50%, 0);\n  top: 20px;\n  color: black;\n  font-size: 0.9em;\n\n  div.disclaimer {\n    ${mixins.LABEL_ITALIC_TYPE}\n    margin-top:5px;\n    font-size:0.7em;\n    text-align: center;\n    color:#AAA;\n  }\n`;\n\nconst Tooltip = styled.div`\n  position:absolute;\n  line-height: 1;\n  padding: 10px;\n  background: #E7F7FB;\n  color: black;\n  z-index:6;\n  ${mixins.LABEL_BOLD_TYPE}\n  font-size:0.8em;\n  transition: 0.4s opacity;\n\n  width: calc(200px - 24px);\n  &:after {\n    content: \" \";\n    position: absolute;\n    top: 100%; /* At the bottom of the tooltip */\n    left: 50%;\n    margin-left: -5px;\n    border-width: 5px;\n    border-style: solid;\n    border-color: #E7F7FB transparent transparent transparent;\n  }\n\n  hr {\n    border:none;\n    margin: 0;\n    margin-bottom: 10px;\n    padding: 0;\n    border-bottom: 1px solid black;\n  }\n`;\nconst ToolTipLabelArea = styled.div`  \n  display: flex;\n  align-items:center;\n  justify-content: space-between;\n  /* padding-bottom:5px; */\n  margin-bottom:5px;\n`;\n\n const ToolTipLabel = styled.div`\n  ${mixins.LABEL_REGULAR_TYPE}\n  font-size:0.9em;\n`;\n\nconst ToolTipValue = styled.div`\n  ${mixins.LABEL_BOLD_TYPE}\n  font-size: 0.9em;\n`;\n\n\n\nclass ContributorsGraph extends Component {\n  constructor(props){\n    super(props);\n    // this.osmUsersData = osm_stats.stats.osm_users;\n\n\n    this.margin = {\n      top: 30, \n      right: 60,\n      bottom: 30,\n      left: 60\n    };\n\n    this.refGraph = React.createRef();   \n    this.colorScale = d3.scaleLog()\n      .domain([1, 2, 3, 10, 100, 1000, 5000, 10000, 100000])\n      .range([\"#ffffcc\",\n        \"#d6efc2\",\n        \"#acdeb7\",\n        \"#81ceba\",\n        \"#56bec1\",\n        \"#3caac2\",\n        \"#3391bc\",\n        \"#2b77b4\",\n        \"#2855a4\",\n        \"#253494\"]);\n\n    this.state = {\n      currentHover: null\n    }\n  \n  }\n\n  initSimulation(props){\n\n    var simulation = d3.forceSimulation(this.props.osmUsersDataStats.stats.osm_users)\n      .force(\"x\", d3.forceX(d => { return this.xScale(d.all_count); }).strength(1))\n      .force(\"y\", d3.forceY(props.height / 2 - 20))\n      .force(\"collide\", d3.forceCollide(props.padding))\n      .stop();\n\n    for (var i = 0; i < 200; ++i) simulation.tick();\n  }\n  \n  d3Init(){\n    let { width, height } = this.props;    \n    const svg = d3.select(this.refGraph.current);\n    this.xScale.range([this.margin.left, width - this.margin.right]);\n\n    this.initSimulation(this.props);\n\n    this.xAxisFunction = g => g\n      .attr(\"transform\", `translate(0,${height - this.margin.bottom})`)\n      .call(d3.axisBottom(this.xScale)\n        .ticks(width / 80)\n        .tickFormat(d => {\n          var log = Math.log(d) / Math.LN10;\n          return Math.abs(Math.round(log) - log) < 1e-6 ? numberWithDelimiter(d) : '';\n        })\n        .tickSizeOuter(0));\n    \n    this.xAxis = svg.append(\"g\")\n      .call(this.xAxisFunction);\n\n    var _this = this;\n    this.circleGraph = svg.append(\"g\")\n      .selectAll(\"circle\")\n      .data(this.props.osmUsersDataStats.stats.osm_users)\n      .enter().append(\"circle\")\n      .attr(\"fill\", d => { return this.colorScale(d.all_count) })\n      .attr(\"stroke\", \"#eee\")\n      .style('cursor', 'pointer')\n      .attr(\"cx\", d => d.x)\n      .attr(\"cy\", d => d.y)\n      .attr(\"r\", this.props.radius)\n      .on('mouseover touchend', function (d) {\n        _this.setState({\n          currentHover: {\n            ...d,\n            cx: d3.select(this).attr('cx'),\n            cy: d3.select(this).attr('cy')\n          }\n        });\n\n        d3.select(this)\n          .transition()\n          .attr('r', _this.props.radius + 2)\n          .attr('fill', '#ff0000');\n      })\n      .on('mouseout', function (d) {\n        _this.setState({\n          currentHover: null\n        });\n\n        let circleColor = _this.setCircleColor(_this.props, d);\n        d3.select(this)\n          .transition()\n          .attr('r', _this.props.radius)\n          .attr('fill', circleColor);\n      })\n      .on('click', d => {\n        if (this.props.cholopleth) {\n          this.setState({\n            currentHover: d\n          });\n          this.props.dispatch(changeWorldMapIndividual(d));\n          d3.select(this)\n            .transition()\n            .attr('r', _this.props.radius + 2)\n            .attr('fill', '#ff0000');\n        }\n      });\n\n  }\n\n  d3Update() {\n    let { width, height } = this.props;\n    this.xScale.range([this.margin.left, width - this.margin.right]);\n    \n    this.initSimulation(this.props);\n\n    this.xAxisFunction = g => g\n      .attr(\"transform\", `translate(0,${height - this.margin.bottom})`)\n      .call(d3.axisBottom(this.xScale)\n        .ticks(width / 80)\n        .tickFormat(d => {\n          var log = Math.log(d) / Math.LN10;\n          return Math.abs(Math.round(log) - log) < 1e-6 ? numberWithDelimiter(d) : '';\n        })\n        .tickSizeOuter(0))\n\n    this.xAxis\n      .transition()\n      .call(this.xAxisFunction);\n\n    this.circleGraph\n      .transition()\n      .attr(\"cx\", d => d.x)\n      .attr(\"cy\", d => d.y)\n  }\n\n  setCircleColor(props, d) {\n    let { graphMode, choloplethMode, cholopleth, currentIndividual } = props;\n\n    if (cholopleth) {\n      graphMode = choloplethMode;\n      // console.log(\"final graphmode is:\", graphMode);\n    }\n    //top20, top5\n    if (!_.isNull(currentIndividual) && !_.isUndefined(currentIndividual)) {\n\n      return d.id === currentIndividual.id ? \"#FF0000\" : \"#DDD\";\n\n    } else {\n      if (graphMode === \"korean\") {\n        return d.korean ? \"#FF0000\" : \"#DDD\";\n\n      } else if (graphMode === \"all\") {\n\n        return this.colorScale(d.all_count);\n\n      } else if (graphMode === \"top20\") {\n\n        return d.rank > 0 && d.rank <= 20 ? \"#253494\" : \"#DDD\";\n\n      } else if (graphMode === \"top5\") {\n\n        return d.rank > 0 && d.rank <= 5 ? \"#253494\" : \"#DDD\";\n\n      }\n    }\n\n  }\n\n  componentDidUpdate(prevProps, prevState){\n    let { graphMode, choloplethMode, cholopleth, currentIndividual } = this.props;\n   \n    if (prevProps.osmUsersDataStats !== this.props.osmUsersDataStats) {\n\n      if (!_.isNull(this.props.osmUsersDataStats)) {\n        this.xScale = d3.scaleLog()\n          .domain(d3.extent(this.props.osmUsersDataStats.stats.osm_users, d => d.all_count));\n        this.d3Init();\n\n      }\n      \n    }\n   \n    if (!_.isNull(this.props.osmUsersDataStats)){\n\n      if (prevProps.width !== this.props.width || prevProps.height !== this.props.height) {\n        this.d3Update();\n        console.log(\"d3update called\");\n      }\n      \n      if (cholopleth) {\n        graphMode = choloplethMode;\n      }\n      \n      if (!_.isUndefined(this.circleGraph)) {\n\n        if (!_.isNull(currentIndividual) && !_.isUndefined(currentIndividual)) {\n  \n          this.circleGraph.transition().attr(\"fill\", d => {\n    \n            if (d.id === currentIndividual.id) {\n            \n              return \"#FF0000\";\n            \n            } else {\n    \n              return \"#DDD\";\n            \n            }\n    \n          })\n    \n        } else {\n          //top20, top5\n          if (graphMode === \"korean\") {\n    \n            this.circleGraph.transition().attr(\"fill\", d => {\n              return d.korean ? \"#FF0000\" : \"#DDD\";\n            })\n    \n          } else if (graphMode === \"all\") {\n            this.circleGraph.transition().attr(\"fill\", d => {\n              return this.colorScale(d.all_count)\n            });\n    \n          } else if (graphMode === \"top20\") {\n            \n            this.circleGraph.transition().attr(\"fill\", d => {\n              return d.rank > 0 && d.rank <= 20 ? \"#253494\" : \"#DDD\"; // this.colorScale(d.all_count)\n            })\n    \n          } else if (graphMode === \"top5\") {\n            this.circleGraph.transition().attr(\"fill\", d => {\n              return d.rank > 0 && d.rank <= 5 ? \"#253494\" : \"#DDD\";\n            }) //this.colorScale(d.all_count)\n          }\n        }\n      }\n      \n    }\n    \n  }\n\n  render() {\n    let { currentHover } = this.state;\n    let { graphMode, choloplethMode, cholopleth, currentIndividual } = this.props;\n\n    if (cholopleth) {\n      graphMode = choloplethMode;\n      // console.log(\"final graphmode is:\", graphMode);\n    }\n\n    if (!_.isNull(currentHover)) {\n      console.log(currentHover.cx, currentHover.cy);\n\n    }\n    \n    return (\n\n        <ContributorsGraphBox style={{ height: this.props.height }}>\n          <Title>\n            Distribution of Contributors by # of Contribution\n\n            <div className=\"disclaimer\">\n              * Names have been anonymized for privacy\n            </div>\n          </Title>\n          <svg ref={this.refGraph} width={this.props.width} height={this.props.height}>\n          </svg>\n\n          {\n            _.isNull(currentHover) ? \n            null : \n            <Tooltip style={{ left: currentHover.cx - 100, top: Number(currentHover.cy) - 140 }}>\n              P{ currentHover.id }*\n              <hr />\n              <ToolTipLabelArea>\n                <ToolTipLabel>\n                  Total Contribution\n                </ToolTipLabel>\n                <ToolTipValue>\n                  { numberWithDelimiter(currentHover.all_count) }\n                </ToolTipValue>\n              </ToolTipLabelArea>\n              <ToolTipLabelArea>\n                <ToolTipLabel>\n                  # of Changesets \n                </ToolTipLabel>\n                <ToolTipValue>\n                  { numberWithDelimiter(currentHover.total_contribution_count) }\n                </ToolTipValue>\n              </ToolTipLabelArea>\n              <ToolTipLabelArea>\n                <ToolTipLabel>\n                  % of Contribution in Korean\n                </ToolTipLabel>\n                <ToolTipValue>\n                  {numberWithDelimiter(Math.floor(currentHover.korean_pct * 100))}% \n                </ToolTipValue>\n              </ToolTipLabelArea>\n            </Tooltip>\n          }\n          <KoreanLegend show={graphMode === \"korean\"} />\n          <NumberContributionLegend scale={this.colorScale} show={!cholopleth && graphMode !== \"korean\"} />\n          {\n            _.isNull(currentIndividual) || _.isUndefined(currentIndividual) ? \n            null : <IndividualInfo />\n          }\n          \n        </ContributorsGraphBox>\n    )\n  }\n}\n\nlet mapStateToProps = state => {\n    return {\n      graphMode: state.graphMode,\n      choloplethMode: state.choloplethMode,\n      osmUsersDataStats: state.osmUsersDataStats,\n      cholopleth: state.cholopleth,\n      currentIndividual: state.currentIndividual\n    }\n};\n\nexport default connect(mapStateToProps)(ContributorsGraph);","import React, { Component } from 'react'\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport mixins from '../stylesheets/mixins';\nimport { Gutter } from '../stylesheets/components';\nimport { scaleLinear } from 'd3';\nimport moment from 'moment';\nimport { YearLegend } from './';\n\nconst Fragment = React.Fragment;\n\nconst Container = styled.div`\n  position: fixed;\n  right: 10px;\n  top: 10px;\n  z-index:4;\n  opacity: ${props => props.show ? 1 : 0};\n  transition: 0.4s opacity;\n`;\n\nconst RightStat = styled.div`\n \n  border: 1px solid #ccc;\n  padding:10px;\n  background-color: white;\n`;\n\nconst Label = styled.h4`\n  ${mixins.LABEL_BOLD_TYPE}\n  text-align: right;\n  font-size: 0.7em;\n  color: #777;\n`;\n\nconst Value = styled.p`\n  ${mixins.TITLE_TYPE}\n  font-size:1.5em;\n  color:black;\n  text-align: right;\n`;\n\n\nconst Timeline = styled.div`\n\n  border: 1px solid #ccc;\n  padding:15px 10px;\n  background-color: white;\n  height: 300px;\n  width: 15px;\n  position: relative;\n  float: right;\n`;\n\nconst Line = styled.div`\n  position: absolute;\n  left: 50%;\n  width: 3px;\n  transform: translate(-50%, 0);\n  background-color: ${ props => props.color };\n  height: calc(${ props => props.height }% - 30px);\n  transition: 0.2s height;\n`;\n\nconst Date = styled.div`\n  position: absolute;\n  right: 27px;\n  z-index: 6;\n  width: max-content;\n  ${mixins.LABEL_REGULAR_TYPE}\n  font-size:0.7em;\n  top: calc(${ props => props.top }% - 30px);\n  border: 1px solid #ccc;\n  padding:10px;\n  background-color: white;\n  transition: 0.2s top;\n`;\n\nclass TimelineScroller extends Component {\n  render() {\n    let timeScale = scaleLinear().domain([1184971551, 1539016223]).clamp(true).range([0, 100]);\n    let { timelineUI, currentTimeStamp } = this.props;\n    return (\n      <Fragment>\n        <Container show={timelineUI}>\n          <RightStat>\n            <Label>\n              Total Contributors\n            </Label>\n            <Value>\n              889\n            </Value>\n            <Gutter></Gutter>\n            <Label>\n              Total Contributions\n            </Label>\n            <Value>\n              324,415\n            </Value>\n          </RightStat>\n          <Gutter h={15}></Gutter>\n          <Timeline>\n            <Date top={timeScale(currentTimeStamp)}>\n              {moment.unix(currentTimeStamp).format(\"MMMM DD, YYYY\")}\n            </Date>\n            <Line color=\"#ddd\" height={100} />\n            <Line color=\"#000\" height={timeScale(currentTimeStamp)} />\n          </Timeline>\n        </Container>\n        <YearLegend />\n      </Fragment>\n    )\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    timelineUI: state.timelineUI,\n    currentTimeStamp: state.currentTimeStamp\n  }\n}\n\nexport default connect(mapStateToProps)(TimelineScroller);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport {  numberWithDelimiter } from '../utils';\nimport * as d3 from 'd3';\nimport country_analysis_all from '../constants/country_analysis_all.json';\nimport country_analysis_top_20 from '../constants/country_analysis_top_20.json';\nimport country_analysis_top_5 from '../constants/country_analysis_top_5.json';\nimport _ from 'lodash';\n\nclass CholoplethLegend extends Component {\n  constructor(props) {\n    super(props);\n    this.colorScale = d3.scaleLinear()\n      .range([\"#ffffcc\",\n        \"#d6efc2\",\n        \"#acdeb7\",\n        \"#81ceba\",\n        \"#56bec1\",\n        \"#3caac2\",\n        \"#3391bc\",\n        \"#2b77b4\",\n        \"#2855a4\",\n        \"#253494\"])\n\n  }\n\n  componentDidMount() {\n  }\n  updateCurrentCholopleth(cholopleth, choloplethMode, currentIndividual) {\n\n    let currentCountryJSON = null;\n\n    if (!_.isNull(currentIndividual)) {\n\n      currentCountryJSON = currentIndividual;\n\n    } else if (choloplethMode === \"all\") {\n\n      currentCountryJSON = {\n        country_counts: country_analysis_all\n      };\n\n    } else if (choloplethMode === \"top20\") {\n\n      currentCountryJSON = {\n        country_counts: country_analysis_top_20\n      };\n\n    } else { // top5\n\n      currentCountryJSON = {\n        country_counts: country_analysis_top_5\n      };\n\n    }\n\n    if (!_.isNull(currentCountryJSON) && cholopleth) {\n\n      var extent = [0, d3.max(currentCountryJSON.country_counts, cc => {\n        return cc.count;\n      })]\n\n      var finalDomain = [extent[0],\n      extent[0] + (extent[1] - extent[0]) / 9 * 1,\n      extent[0] + (extent[1] - extent[0]) / 9 * 2,\n      extent[0] + (extent[1] - extent[0]) / 9 * 3,\n      extent[0] + (extent[1] - extent[0]) / 9 * 4,\n      extent[0] + (extent[1] - extent[0]) / 9 * 5,\n      extent[0] + (extent[1] - extent[0]) / 9 * 6,\n      extent[0] + (extent[1] - extent[0]) / 9 * 7,\n      extent[0] + (extent[1] - extent[0]) / 9 * 8,\n      extent[0] + (extent[1] - extent[0]) / 9 * 9];\n      return {\n        opacity: 1,\n        finalDomain: finalDomain\n      }\n    } else {\n      return {\n        opacity: 0,\n        finalDomain: [0, 1]\n      }\n    }\n  }\n\n  render() {\n    let { cholopleth, choloplethMode, currentIndividual } = this.props;\n    console.log(\"cholopleth\", cholopleth, \"choroplethMode\", choloplethMode, \"currentIndividual\", currentIndividual);\n    let result = this.updateCurrentCholopleth(cholopleth, choloplethMode, currentIndividual);\n\n    this.colorScale.domain(result.finalDomain);\n\n    return (\n      <div className=\"sub-legend\" style={{ opacity: result.opacity }}>\n        <div className=\"title\">\n          # of Contribution\n        </div>\n        {\n          result.opacity === 1 ? \n          _.map(result.finalDomain, (val, i) => {\n            if (_.isUndefined(val)) {\n              return null;\n            } else {\n              return (\n                <div key={i} className=\"legend-sub-area\">\n                  <div className=\"color-box\" style={{ backgroundColor: this.colorScale(val) }}>\n                  </div>\n                  <div className=\"value\">\n                    {numberWithDelimiter(Number(val.toFixed(0)))}\n                  </div>\n                </div>\n              );\n            }\n\n\n          }) : null\n        }\n      </div>\n\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n\n    choloplethMode: state.choloplethMode,\n    currentIndividual: state.currentIndividual,\n    cholopleth: state.cholopleth\n    // currentSeq: state.currentSeq,\n    // currentFeature: state.currentFeature,\n    // currentTimeStamp: state.currentTimeStamp\n  }\n}\n\nexport default connect(mapStateToProps)(CholoplethLegend);","import React, { Component } from 'react'\nimport styled from 'styled-components';\nimport mixins from '../stylesheets/mixins';\n\nconst LegendBox = styled.div`\n  background-color: white;\n  border: 1px solid #ccc;\n  padding: 10px;\n  position: absolute;\n  right: 10px;\n  top: 10px;\n  transition: 0.4s opacity;\n  opacity: 0;\n  display: flex;\n`;\n\nconst RedCircle = styled.div`\n  width: 12px;\n  height: 12px;\n  border-radius: 20px;\n  background-color: red;\n  margin-top: 3px;\n`;\n\nconst Label = styled.div `\n  margin-left: 7px;\n  ${mixins.LABEL_REGULAR_TYPE}\n  font-size:0.7em;\n  color:#999;\n`;\n\nclass KoreanLegend extends Component {\n  render() {\n    return (\n      <LegendBox style={{ opacity: this.props.show ? 1 : 0 }}>\n        <RedCircle />\n        <Label>\n          Contributed in Korean\n        </Label>\n      </LegendBox>\n    )\n  }\n}\n\nexport default KoreanLegend;","import React, { Component } from 'react'\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport mixins from '../stylesheets/mixins';\nimport world_data from '../constants/world_data.json';\nimport { numberWithDelimiter } from '../utils';\nimport {changeWorldMapIndividual} from '../actions';\nimport _ from 'lodash';\n\nconst Box = styled.div`\n  position: absolute;\n  left: 50%;\n  background-color: white;\n  border: 1px solid #ccc;\n  padding: 10px 5px;\n  font-size:1.1em;\n  top: 50px;\n  transform: translate(-50%, -100%);\n  display: flex;\n  width: 300px;\n\tjustify-content: space-between;\n`;\n\nconst Area = styled.div`\n  width: 50%;\n  padding: 0 5px;\n`;\n\nconst Label = styled.h4`\n  ${mixins.LABEL_BOLD_TYPE}\n  font-size:0.65em;\n  color:#777;\n`;\n\nconst Value = styled.div `\n  font-size: 0.9em;\n  color: black;\n  padding-right: 10px;\n`;\n\nconst SmallSize = styled.span`\n  ${mixins.LABEL_BOLD_TYPE}\n  font-size: 0.7em;   \n  position: relative;\n  top: -1px;\n`;\n\nconst CloseButton = styled.a`\n  position: absolute;\n  right: 8px;\n  top: 1px;\n  ${mixins.LABEL_BOLD_TYPE}\n\n`;\n\n\nclass IndividualInfo extends Component {\n  componentDidMount(){\n    \n  }\n\n  getTop5Countries(currentIndividual) {\n\n    let worldIds = _.map(_.filter(_.sortBy(currentIndividual.country_counts, country => country.count).reverse().splice(0, 5), c => c.count > 0), country => {\n      return {\n        id: country.world_id,\n        count: country.count\n      };\n    });\n\n    let labels = _.map(worldIds, worldId => {\n      let label = _.find(world_data, w => {\n        return w.id === worldId.id\n      });\n\n      label.count = worldId.count;\n\n      return label;\n    });\n\n    return labels;\n  }\n\n  handleClick(e){\n    this.props.dispatch(changeWorldMapIndividual(null));\n  }\n\n  render() {\n    let { currentIndividual } = this.props;\n    let top5Countries = this.getTop5Countries(currentIndividual);\n\n    return (\n      <Box>\n        \n        <CloseButton onClick={this.handleClick.bind(this)} href=\"javascript:void(0);\">\n          ⨯\n        </CloseButton>\n        <Area>\n          <Label>\n            Name\n          </Label>\n          <Value>\n            P{currentIndividual.id}\n          </Value>\n        </Area>\n        <Area>\n          <Label>\n            Top {top5Countries.length} Countries\n          </Label>\n          <Value>\n            {\n              _.map(top5Countries, (c, i) => {\n                return (\n                  <div key={i}>\n                    {c.name_en} <SmallSize>{ numberWithDelimiter(c.count) }</SmallSize>\n                  </div>\n                )\n              })\n            }\n          </Value>\n        </Area>\n      </Box>\n    )\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    currentIndividual: state.currentIndividual\n  }\n};\n\nexport default connect(mapStateToProps)(IndividualInfo);","export const DEFAULT_STATE = {\n  windowWidth: 1024,\n  windowHeight: 768,\n  titleHeader: false,\n  mapLoaded: false,\n  nkTile: false,\n  cholopleth: false,\n  timelineUI: false,\n  textVisualization: false,\n  legend: false,\n  currentSeq: 0,\n  currentFeature: null,\n  currentTimeStamp: 1167609600,\n  zoom: 6,\n  graphMode: \"all\", // all, korean\n  choloplethMode: \"all\", //top20, top5, individual\n  currentIndividual: null,\n  osmUsers: [],\n  osmUsersDataStats: null,\n  responseCategories: [],\n  osmUserHistories: null,\n  osmUserHistoriesIdx: 0,\n  center: [125.75432, 39.03385],\n  selectedTextCategory: {},\n  selectedOsmUserResponse: null\n};\n\nexport const CATEGORIES_COLORS = [\n  \"#9bd1c7\",\n  \"#d8d754\",\n  \"#6258da\",\n  \"#ec8677\",\n  \"#8ab0d0\",\n  \"#f3b670\",\n  \"#bbdb79\",\n  \"#e8a4c8\",\n  \"#ada6a6\",\n  \"#b484b9\",\n  \"#99d182\",\n  \"#8ce2fc\",\n  \"#5f6687\",\n  \"#ce6586\",\n  \"#2e307d\"\n]\n\nexport const INTERESTING_NAMES = [\n  {dataPoint: \"p=4109493330\", id: 4109493330, title: \"위대한 수령 김일성동지 기념비\"},\n  {dataPoint: \"p=3090640091\", id: 3090640091, title: \"평양려관 5층 차집\"},\n  {dataPoint: \"p=5485334795\", id: 5485334795, title: \"사진꽃방 (1층)\"},\n  {dataPoint: \"pg=500783829\", id: 500783829,  title: \"Missile Launchpad\"},\n  {dataPoint: \"pg=408248450\", id: 408248450,  title: \"위대한 수령 김일성동지의 개선연설 자필기념비\"},\n  {dataPoint: \"pg=554071936\", id: 554071936,  title: \"Prison Workers Unit 3 Village\"}\n]\n\nexport const SUBCATEGORY_SELECT = {\n  1: ['Why?', '1'],\n  2: ['How?', '2'],\n  3: ['Comments', '3']\n}\n\n// 1448928000\n// 1448928052","import React, { Component } from 'react'\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport axios from 'axios';\nimport { addTextCategorySelected, removeTextCategorySelected, changeOsmUserReponseData } from '../actions';\nimport _ from 'lodash';\nimport { SUBCATEGORY_SELECT, CATEGORIES_COLORS } from '../constants/defaults';\nimport * as d3 from 'd3';\nimport {TextVisualizationResponses } from './';\n\nconst Fragment = React.Fragment;\nconst Bar = styled.div`\n  position: fixed;\n  z-index: 8;\n  top: 0;\n  opacity: 0;\n  transition: 0.4s opacity;\n  width: 170px;\n\n  section {\n    padding: 10px;\n    margin-bottom: 20px;\n  }\n\n  h3 {\n    font-size: 1.0em;\n    line-height: 1.1;\n    color: black;\n    margin-bottom: 7px;\n    font-weight: 700;\n    text-indent: -4px;\n  }\n\n  p {\n    color: #888;\n    line-height: 1.2;\n    font-family: \"Roboto\", sans-serif;\n    font-size:0.8em;\n  }\n\n  \n`;\n\nconst CategoryLink = styled.a`\n  font-size: 0.7em;\n  display: inline-block;\n  margin-bottom: 6px;\n  margin-left: -5px;\n  padding: 4px;\n  line-height: 1.2;\n  cursor: pointer;\n  background:white;\n  font-family: \"Roboto\", sans-serif;\n  font-weight: 400;\n  color:black;\n`\n\nconst UnCategoryLink = styled.a`\n  font-size: 0.7em;\n  display: inline-block;\n  margin-bottom: 6px;\n  margin-left: -5px;\n  line-height: 1.2;\n  padding: 4px;\n  cursor: pointer;\n  font-family: \"Roboto\", sans-serif;\n  font-weight: 700;\n  color:white;\n  position:relative;\n  padding-right:20px;\n\n  \n  .close-btn {\n    font-size:1.2em;\n\n    top: 1px;\n    right: 6px;\n    position: absolute;\n  }\n`\nconst ArrowArea = styled.div`\n  position: fixed;\n  z-index: 9;\n  opacity: 1;\n  transition: 0.4s opacity;\n  left: 180px;\n  height: 32px;\n  width: calc(100% - 190px);\n  bottom: 20px;\n  display: flex;\n  justify-content: space-between;\n  \n  hr {\n    border:none;\n    position:absolute;\n    top:20px;\n    border:1px solid #888;\n    width:100%;\n  }\n`;\n\n\nclass TextVisualization extends Component {\n  \n  componentDidMount(){\n    axios.all([axios.get('https://nkosm.wonyoung.so/api/osm_users.json')])\n    .then(axios.spread((response) => {\n      if (response.data.success) {\n        this.props.dispatch(changeOsmUserReponseData(response.data.osm_users, response.data.response_categories));\n      }\n    }));\n\n  }\n  \n  handleAddTextCategory(c) {\n    let { selectedTextCategory } = this.props;\n    \n    if ( !_.isUndefined(selectedTextCategory[c.id]) ) {\n\n      this.props.dispatch(removeTextCategorySelected(c.id));\n    } else {\n    \n      this.props.dispatch(addTextCategorySelected(c.id, {id: c.id }));\n    \n    }\n  }\n\n  render() {\n    let { textVisualization, selectedTextCategory, responseCategories } = this.props;\n    let subCategories = _.groupBy(responseCategories, c => { return c.subcategory_id; });\n    let colorScale = d3.scaleOrdinal().domain(_.map(responseCategories, rc => { return rc.id})).range(CATEGORIES_COLORS);\n    \n    return (\n      <Fragment>\n        <Bar style={{left: 0, opacity: textVisualization ? 1 : 0}}>\n          {\n            _.map(subCategories, (categories, key) => {\n              return (\n                <section key={key}>\n                  <h3>\n                    { SUBCATEGORY_SELECT[Number(key)][0] }\n                  </h3>\n                  {\n                    _.map(categories, c => {\n                \n                      let selected = _.isUndefined(selectedTextCategory[c.id]);\n                      return selected ? \n                        <CategoryLink onClick={this.handleAddTextCategory.bind(this, c)} key={c.id}>{c.category_name}</CategoryLink> : \n                        <UnCategoryLink style={{backgroundColor: colorScale(c.id)}} onClick={this.handleAddTextCategory.bind(this, c)} key={c.id}>\n                          {c.category_name} <span className=\"close-btn\">⨯</span>\n                        </UnCategoryLink>;\n                    })\n                  }\n                </section>\n                \n              );\n            })\n          }\n        </Bar>\n        \n       \n\n        <ArrowArea style={{opacity: textVisualization ? 1 : 0}}>\n          <img src={`${process.env.PUBLIC_URL}/assets/more_data_arrow.svg`} alt=\"more data contributed\" />\n          <img src={`${process.env.PUBLIC_URL}/assets/less_data_arrow.svg`} alt=\"less data contributed\" />\n        </ArrowArea>\n\n        {/* <Bar style={{right: 0, opacity: textVisualization ? 1 : 0}}>\n          <section>\n            <h3>\n              Responses<br />\n              211\n            </h3>\n            <p>\n              from 889<br />\n              contributors\n            </p>\n          </section>\n        </Bar> */}\n      </Fragment>\n    )\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    textVisualization: state.textVisualization,\n    selectedTextCategory: state.selectedTextCategory,\n    responseCategories: state.responseCategories\n\n  }\n}\nexport default connect(mapStateToProps)(TextVisualization);","import React, { Component } from 'react'\nimport styled from 'styled-components';\nimport { UserResponse } from './';\nimport { connect } from 'react-redux';\nimport * as d3 from 'd3';\nimport _ from 'lodash';\nimport { CATEGORIES_COLORS } from '../constants/defaults';\n\nconst GridBox = styled.div`\n  column-count: 15;\n  column-gap: 5px;\n  /* height: 2000px; */\n  width: calc(100% - 10px);\n`;\n\nconst Main = styled.div`\n  /* left: 180px; */\n  position: sticky;\n  z-index: 8;\n  margin-left: 180px;\n  top: 10px;\n  transition: 0.4s opacity;\n  width: calc(100% - 180px);\n  /* top: 20px; */\n  /* padding-top: 9px; */\n`;\n\nclass TextVisualizationResponses extends Component {\n\n  constructor(props){\n    super(props);\n\n    this.fontSizeScale = d3.scaleLinear().domain([1024, 1280, 1440, 2560]).clamp(true).range([2.2, 2.4, 3.2, 5]);\n    this.lineHeightScale = d3.scaleLinear().domain([1024, 1280, 1440, 2560]).clamp(true).range([1.7, 1.7, 1.5, 1.4]);\n  }\n  \n  render() {\n\n    let { osmUsers, responseCategories, textVisualization, windowWidth } = this.props;\n    let colorScale = d3.scaleOrdinal().domain(_.map(responseCategories, rc => { return rc.id})).range(CATEGORIES_COLORS);\n\n    return (\n      <Main style={{opacity: textVisualization ? 1 : 0 }}>\n        <GridBox>\n          {\n            _.map(osmUsers, (ou, i) => {\n              return (\n                <UserResponse {...ou} fontSize={this.fontSizeScale(windowWidth)} lineHeight={Math.ceil(this.lineHeightScale(windowWidth) * 10)/10} key={i} colorScale={colorScale} />\n              )\n            })\n          }\n        </GridBox>\n      </Main>\n    )\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    osmUsers: state.osmUsers,\n    windowWidth: state.windowWidth,\n    textVisualization: state.textVisualization,\n    responseCategories: state.responseCategories,\n    selectedTextCategory: state.selectedTextCategory\n  }\n}\n\nexport default connect(mapStateToProps)(TextVisualizationResponses);","import React, { Component } from 'react'\nimport _ from 'lodash';\nimport styled from 'styled-components';\nimport { changeSelectedOsmUserResponse } from '../actions';\nimport { connect } from 'react-redux';\nimport chroma from 'chroma-js';\nimport * as d3 from 'd3';\n\nconst TextSpan = styled.span`\n  word-break: break-word;\n\n  transition: 0.4s all;\n\n`;\n\nconst RespArea = styled.div`\n  margin-bottom: 5px;\n  font-size: 4px;\n  line-height: 1.5;\n  cursor:pointer;\n  transition: 0.4s all;\n  -webkit-column-break-inside: avoid;\n  page-break-inside: avoid;\n  break-inside: avoid;\n\n  &:hover {\n    background-color: white;\n  }\n`;\n\nclass UserResponse extends Component {\n  handleClick(response){\n    this.props.dispatch(changeSelectedOsmUserResponse({\n      ...this.props\n    })) \n  }\n\n  render() {\n    let { selectedTextCategory, fontSize, lineHeight } = this.props;\n    return (\n      <RespArea style={{ fontSize: `${fontSize}px`, lineHeight: lineHeight }} onClick={this.handleClick.bind(this)}>\n        {\n          _.map(this.props.responses, response => {\n            let selected = !_.isUndefined(selectedTextCategory[response.category_id]);\n            \n            return (\n              <TextSpan key={response.id} style={{\n                color: selected ? this.props.colorScale(response.category_id) : \"#999\",\n                backgroundColor: selected ? this.props.colorScale(response.category_id) : \"transparent\"\n              }}>\n                { response.resp }\n              </TextSpan> \n            );\n          })\n        }\n      </RespArea>\n    )\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    windowWidth: state.windowWidth,\n    selectedTextCategory: state.selectedTextCategory\n  }\n};\n\nexport default connect(mapStateToProps)(UserResponse);","import React, { Component } from 'react'\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport _ from 'lodash';\nimport mixins from '../stylesheets/mixins';\nimport { Gutter } from '../stylesheets/components';\nimport { changeSelectedOsmUserResponse, changeOsmUserHistories, changeOsmUserHistoriesIdx } from '../actions';\nimport axios from 'axios';\nimport * as d3 from 'd3';\nimport moment from 'moment';\nimport { CATEGORIES_COLORS } from '../constants/defaults';\nimport { numberWithDelimiter } from '../utils';\nimport chroma from 'chroma-js';\n\nconst Fragment = React.Fragment;\nconst RespContainer = styled.div`\n\n  position: fixed;\n  bottom: 10px;\n  left: 10px;\n  z-index:20;\n  background-color: white;\n  padding: 10px;\n  width: 50%;\n  border: 1px solid #ccc;\n  line-height: 1.6;\n  word-break: break-word;\n\n  .rela-cont {\n    position:relative;\n  }\n\n  .resp-content {\n    \n    max-height: 300px;\n    overflow-y: scroll;\n    line-height: 1.8;\n    padding-bottom: 50px;\n\n  }\n  span {\n    padding: 3px 5px;\n  }\n\n  .close-btn {\n    position:absolute;\n    right: 10px;\n    top: 2px;\n  }\n`;\n\nconst DataInfoContainer = styled.div`\n  position: fixed;\n  bottom: 10px;\n  right: 10px;\n  z-index:20;\n  background-color: white;\n  border: 1px solid #ccc;\n  padding: 10px;\n`;\n\n\nconst POIBox = styled.div`\n  color: black;\n  display:flex;\n  justify-content: space-between;\n  width: 250px;\n`;\n\nconst TitleArea = styled.div`\n  width:125px;\n`;\n\nconst Label = styled.h4`\n  ${mixins.LABEL_BOLD_TYPE}\n  font-size:0.7em;\n  color:#777; \n  margin-bottom: 5px;\n`;\n\nconst Value = styled.div`\n  font-size: 0.9em;\n  color: black;\n  padding-right: 10px;\n`;\n\nconst Date = styled.div`\n  ${mixins.LABEL_REGULAR_TYPE}\n  font-size:0.8em;\n  margin-top: -3px;\n  color: #AAA;\n`;\n\nconst CategorySpan = styled.span`\n  font-size: 0.8em;\n  font-family: \"Roboto\", sans-serif;\n  font-weight: 400;\n  padding: 2px 5px;\n  line-height: 1.7;\n  margin-right: 5px;\n  hyphens: auto;\n  word-break: break-all;\n`\n\nconst RespInfoArea = styled.div`\n  display: flex;\n  justify-content: space-between;\n  position: absolute;\n  padding-top: 10px;\n  border-top: 1px solid #ccc;\n  bottom: 0px;\n  background: white;\n  width: 100%;\n\n\n  div.left-inner {\n    width: calc(100% - 150px);\n  }\n\n   div.right-inner {\n     width: 120px;\n   }\n\n  div.left-inner {\n    line-height: 1.6;\n  }\n\n  div.right-inner {\n    text-align:right;\n    font-size:0.9em;\n    color:#777;\n  }\n\n  i {\n    font-style: italic;\n  }\n`;\n\nclass SelectedResponseViewer extends Component {\n  constructor(props){\n    super(props);\n    \n    this.intervalId = null;\n  }\n  componentDidMount(){\n    document.body.style.overflow = 'hidden';\n\n    this.loadOsmUserSampleData();\n  }\n\n  loadOsmUserSampleData(){\n\n    let { selectedOsmUserResponse } = this.props;\n    axios.get(`https://nkosm.wonyoung.so/api/osm_users/${selectedOsmUserResponse.id}.json`)\n      .then((response) => {\n        this.props.dispatch(changeOsmUserHistories(response.data.osm_user.histories));\n\n        // response.data.osm_user.histories\n\n      })\n      .catch(function (error) {\n        console.log(error);\n      })\n  }\n\n  componentWillUnmount(){\n    document.body.style.overflow = 'auto';\n    // clearInterval(this.intervalId);\n  }\n\n  handleClose(e){\n    this.props.dispatch(changeSelectedOsmUserResponse(null));\n    this.props.dispatch(changeOsmUserHistories(null));\n  }\n\n  getSelectedColorCategories(selectedOsmUserResponse, responseCategories, colorScale){\n    let respCategories = _.uniq(_.compact(_.map(selectedOsmUserResponse.responses, response => {\n      return response.category_id === 12 ? null : response.category_id\n    })));\n\n    let result = [];\n    _.each(respCategories, respCategory => {\n      let c = _.find(responseCategories, rc => { return rc.id === respCategory });\n      result.push({\n        ...c,\n        color: colorScale(c.id)\n      });\n    })\n\n    return result;\n  }\n  \n  componentDidUpdate(prevProps){\n   \n  }\n\n  render() {\n    let { selectedOsmUserResponse, responseCategories, osmUserHistories, osmUserHistoriesIdx } = this.props;\n    // debugger;\n    let colorScale = d3.scaleOrdinal().domain(_.map(responseCategories, rc => { return rc.id})).range(CATEGORIES_COLORS);\n    let selectedColorCategories = this.getSelectedColorCategories(selectedOsmUserResponse, responseCategories, colorScale);\n    let osmHistory;\n\n    if (!_.isNull(osmUserHistories)) {\n      if (!_.isUndefined(osmUserHistories[osmUserHistoriesIdx])){\n        osmHistory = osmUserHistories[osmUserHistoriesIdx].features[0];\n\n      }\n    }\n    \n    return (\n      <Fragment>\n\n        <RespContainer>\n          <div className='rela-cont'>\n            <button className=\"close-btn\" onClick={this.handleClose.bind(this)}><img src=\"./assets/close_btn.svg\" alt=\"close_btn\" /></button>\n\n            <div className=\"resp-content\">\n              \n              <div>\n                -\n              </div>\n\n              {\n                _.map(selectedOsmUserResponse.responses, (r, i) => {\n                  \n                  let bgColor = r.category_id === 12 ? \"transparent\": colorScale(r.category_id);\n                  let color = bgColor === \"transparent\" ? \"black\" : \"white\";\n                  return (\n                    <span key={i} style={{backgroundColor: bgColor, color: color }}>\n                      {r.resp}\n                    </span>\n                  )\n                })\n              }\n\n              <Gutter h={70}></Gutter>\n            \n\n            </div>\n\n            <RespInfoArea>\n\n              <div className=\"left-inner\">\n                {\n                  _.map(selectedColorCategories, scc => {\n                    return (\n                      <CategorySpan key={scc.id} style={{ backgroundColor: scc.color, color: \"white\" }}>\n                        {scc.category_name}\n                      </CategorySpan>\n                    )\n                  })\n                }\n              </div>\n              <div className=\"right-inner\">\n                P{ selectedOsmUserResponse.id }<br/>\n                <i>{ numberWithDelimiter(selectedOsmUserResponse.all_count) } Contribution</i>\n              </div>\n            </RespInfoArea>\n          </div>\n          \n          \n        \n        </RespContainer>\n        {\n          !_.isUndefined(osmHistory) ?\n          <DataInfoContainer>\n            <POIBox>\n              <TitleArea>\n                <Label>\n                  Name\n              </Label>\n                <Value>\n                    {_.isNull(osmHistory.properties.name_en) ? (_.isNull(osmHistory.properties.name) ? \"–\" : osmHistory.properties.name) : osmHistory.properties.name_en }\n                </Value>\n              </TitleArea>\n              <TitleArea>\n                <Label>\n                  Contributed Date\n                </Label>\n                <Date>\n                  {moment.unix(osmHistory.properties.osm_timestamp).format(\"MMMM DD, YYYY\")}\n                </Date>\n              </TitleArea>\n            </POIBox>\n          </DataInfoContainer> : null\n        }\n        \n      </Fragment>\n    )\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    selectedOsmUserResponse: state.selectedOsmUserResponse,\n    responseCategories: state.responseCategories,\n    osmUserHistories: state.osmUserHistories,\n    osmUserHistoriesIdx: state.osmUserHistoriesIdx\n  }\n};\n\nexport default connect(mapStateToProps)(SelectedResponseViewer);","import React, { Component } from 'react'\nimport styled from 'styled-components';\nimport mixins from '../stylesheets/mixins';\nimport _ from 'lodash';\nimport { numberWithDelimiter } from '../utils';\n\nconst LegendBox = styled.div`\n  background-color: white;\n  border: 1px solid #ccc;\n  padding: 10px;\n  position: absolute;\n  right: 10px;\n  top: 10px;\n  transition: 0.4s opacity;\n  opacity: 0;\n\n  h4 {\n    ${mixins.LABEL_BOLD_TYPE}\n    font-size:0.7em;\n    color:#999;\n  }\n\n  div.legend-inner { \n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    justify-content: flex-start;\n    align-items: center;\n    align-content: stretch;    \n    width: 200px;\n\n  }\n  div.legend {\n    width: 65px;\n    display: flex;\n  }\n`;\n\nconst Circle = styled.div`\n  width: 12px;\n  height: 12px;\n  border-radius: 20px;\n  margin-top: 3px;\n`;\n\nconst Label = styled.div `\n  margin-left: 7px;\n  ${mixins.LABEL_REGULAR_TYPE}\n  font-size:0.7em;\n  color:#999;\n`;\n\nclass NumberContributionLegend extends Component {\n  render() {\n    \n    return (\n      <LegendBox style={{ opacity: this.props.show ? 1 : 0 }}>\n        <h4>\n          # of Contribution \n        </h4>\n        \n        <div className=\"legend-inner\">\n          \n          {\n            _.map(this.props.scale.domain(), (d, i) => {\n              return (\n                <div className=\"legend\" key={i}>\n                  <Circle style={{ backgroundColor: this.props.scale(d) }} />\n                  <Label>\n                    { numberWithDelimiter(d) }\n                  </Label>\n                </div>\n              )\n            })\n          }\n\n        </div>\n      </LegendBox>\n    )\n  }\n}\n\nexport default NumberContributionLegend;","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport mixins from '../../stylesheets/mixins';\nimport { SectionContainer } from '../../stylesheets/components';\n\nconst SubtitleKo = styled.div`\n  ${mixins.BOLD_TYPE}\n  font-size: 0.85em;\n  text-align: center;\n`;\n\nconst IntroContainer = styled(SectionContainer)`\n  background-image: linear-gradient(-180deg, rgba(231, 247, 251, 0.83) 22%, rgba(231, 247, 251, 0.00) 81%);\n`;\n\nconst TitleContainer = styled.div`\n  width: 600px;\n  margin: 0 auto;\n  padding-top: 120px;\n`;\n\nconst H1 = styled.h1`\n  ${mixins.TITLE_TYPE}\n  text-align: center;\n  font-size:2.5em;\n  line-height: 1.2;\n  margin: 10px 0;\n`;\n\nconst SubParagraph = styled.p`\n  ${mixins.BOLD_TYPE}\n  text-align: center;\n  font-size:1.5em;\n  line-height: 1.35;\n  margin-top: 10px;\n`;\n\nconst DateBox = styled.div`\n  ${mixins.LABEL_REGULAR_TYPE}\n  border: 1px solid #CCCCCC;\n  padding: 5px;\n  text-align: center;\n  background-color: white;\n  display: block;\n  font-size:0.8em;\n  line-height:1.5;\n  color: #888;\n\n  text-align: center;\n  margin: 20px auto;\n  width: 105px;\n\n`;\n\nconst Prompt = styled.div`\n  position: absolute;\n  width: 48px;\n  height: 26px;\n  bottom: 3rem;\n  left: 50%;\n  margin-left: -24px;\n  animation: bounce 2s infinite;\n  opacity: ${props => props.titleHeader ? 0 : 1};\n  transition: .5s opacity;\n`;\n\nclass Intro extends Component {\n  render() {\n    let { titleHeader } = this.props;\n    return (\n      <IntroContainer className=\"trigger\" data-action-name=\"changeIntro\" style={{ height: this.props.windowHeight}}>\n      \n        <TitleContainer>\n          <SubtitleKo>\n            북한의 지도 제작자\n          </SubtitleKo>\n\n          <H1>\n            Cartographers <br/>\n            of North Korea\n          </H1>\n\n          <SubParagraph>\n            An analysis of the OpenStreetMap data in North Korea: <br/>\n            Who are the contributors? How and Why did they contribute to North Korea?\n          </SubParagraph>\n\n          <DateBox>\n            May 12th<br/>Wonyoung So\n          </DateBox>\n        </TitleContainer>\n\n        <Prompt titleHeader={titleHeader}>\n          <svg x=\"0px\" y=\"0px\" width=\"48px\" height=\"26px\" viewBox=\"0 0 48 26\" enableBackground=\"new 0 0 48 26\">\n            <g>\n              <path fill=\"#222\" d=\"M24.146,26c-0.53,0-1.039-0.284-1.414-0.659L0.586,3.158c-0.781-0.781-0.781-2.066,0-2.846\n                c0.78-0.781,2.048-0.791,2.828-0.009L24.137,21.02L44.576,0.305c0.776-0.787,2.042-0.796,2.829-0.021\n                c0.786,0.776,0.794,2.042,0.019,2.828L25.57,25.332C25.196,25.711,24.686,26,24.153,26C24.151,26,24.149,26,24.146,26z\"></path>\n            </g>\n          </svg>\n        </Prompt>\n\n      </IntroContainer>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    windowHeight: state.windowHeight,\n    titleHeader: state.titleHeader\n  }\n}\n\nexport default connect(mapStateToProps)(Intro);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport {SectionContainer, NonSticky} from '../../stylesheets/components';\n\nconst IntroContainer = styled(SectionContainer)``;\n\nclass SectionFirst extends Component {\n  render() {\n    return (\n      <IntroContainer style={{ \n        height: this.props.windowHeight * 0.7\n      }} className=\"trigger\" data-action-name=\"changeEmptyMap\">\n        <NonSticky>\n          The population of North Korea only has extremely limited internet access; while a select group of people can access the internet for research purposes, almost everybody else can only access a countrywide intranet called Kwangmyong.\n        </NonSticky>\n\n      </IntroContainer>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    windowHeight: state.windowHeight\n  }\n}\n\nexport default connect(mapStateToProps)(SectionFirst);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport {SectionContainer, Box, Sticky } from '../../stylesheets/components';\n\nconst SecondContainer = styled(SectionContainer)`\n  padding: 200px 0;\n`;\n\nclass SectionSecond extends Component {\n  componentDidMount(){\n\n  }\n  \n  render() {\n    return (\n      <SecondContainer className=\"trigger\" data-action-name=\"changeChronicleMap\">\n        <Sticky>\n          <Box>\n            For a country that is closed to the internet, however, the quality of OSM data in North Korea is extraordinary: 324,415 data points drawn by 889 contributors since 2007.\n          </Box>\n        </Sticky>\n\n        \n        <div style={{ height: this.props.windowHeight * 1.5}}>\n        </div>\n      </SecondContainer>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    windowHeight: state.windowHeight\n  }\n}\n\nexport default connect(mapStateToProps)(SectionSecond);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { ContributorsGraph } from '../';\nimport styled from 'styled-components';\nimport mixins from '../../stylesheets/mixins';\nimport {SectionContainer,} from '../../stylesheets/components';\n\nconst SectionThirdContainer = styled(SectionContainer)`\n`;\n\nconst GradientSticky = styled.div`\n  position: sticky;\n  background-image: linear-gradient(-180deg, rgba(231, 247, 251, 0.83) 22%, rgba(231, 247, 251, 0.00) 81%);\n  top: 0;\n  width: 100%;\n  z-index:2;\n  height: ${props => props.height }px;\n`;\n\nconst NonSticky = styled.div`\n  width: 400px;\n  position:relative;\n  margin: 0 auto;\n  z-index:5;\n  ${mixins.BOLD_TYPE}\n  font-size:1.2em;\n  border: 1px solid #BBB;\n  padding: 10px 15px;\n  background: #E7F7FB;\n  color: black;\n`;\n\nconst StickyGraphArea = styled.div`\n  position:sticky;\n  z-index:4;\n  top: 50%;\n  transform: translate(0, -50%);\n`;\n\nclass SectionThird extends Component {\n  render() {\n    let { windowHeight } = this.props;\n\n    let graphHeight = windowHeight * 0.4 < 400 ? 400 : windowHeight * 0.4;\n\n\n    return (\n      <SectionThirdContainer>\n        <GradientSticky height={this.props.windowHeight} />\n        <NonSticky className=\"trigger\" data-action-name=\"initGraphScene\">\n          Although it is hard to know about the contributors only by the OSM data, but the data shows some characteristics about them. First, the plot shows that the top 10 contributors drew 61 percent of the map, thus forming a power-law graph.\n        </NonSticky>\n\n        <div style={{\n          height: this.props.windowHeight * 0.2\n        }}>\n        </div>\n\n\n        <StickyGraphArea>\n          <ContributorsGraph \n            radius={4}\n            padding={6}\n            width={this.props.windowWidth * 0.8} \n            height={graphHeight} /> \n        </StickyGraphArea>\n        \n        <div style={{\n          height: this.props.windowHeight * 0.8\n        }}>\n        </div>\n        \n        <NonSticky className=\"trigger\" data-action-name=\"changeGraphKorean\">\n          Second, 62% of the contributors labeled map objects in Korean, including the top five contributors.\n        </NonSticky>\n        \n\n        <div style={{\n          height: this.props.windowHeight * 1.5\n        }}>\n        </div>\n\n      </SectionThirdContainer>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    windowWidth: state.windowWidth,\n    windowHeight: state.windowHeight\n  }\n}\n\nexport default connect(mapStateToProps)(SectionThird);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport { ContributorsGraph } from '../';\nimport {SectionContainer,  NonSticky} from '../../stylesheets/components';\n\nconst SectionFourthContainer = styled(SectionContainer)`\n`;\n\nconst Gutter = styled.div`\n  height: ${props => props.height }px;\n`;\n\nconst StickyBottomGraphContainer = styled.div`\n  position: sticky;\n  top: calc(100% - ${props => props.height * 0.3 + 20}px);\n`;\n\n\nclass SectionFourth extends Component {\n  render() {\n    return (\n      <SectionFourthContainer style={{ height: this.props.windowHeight * 3.5}}>\n        <NonSticky className=\"trigger\" data-action-name=\"initWorldMap\">\n          Contributors' activity can also be estimated by means of OSM changesets, which are a history of each user’s past contributions. Using these changesets, one can see which regions other than North Korea contributors have also worked on. \n        </NonSticky>\n        \n\n        <Gutter height={150} />\n\n        <StickyBottomGraphContainer height={this.props.windowHeight} style={{ height: this.props.windowHeight * 0.3 }}>\n          <ContributorsGraph \n            radius={2.5}\n            padding={3.5}\n            width={this.props.windowWidth * 0.8} \n            height={this.props.windowHeight * 0.3} />\n        </StickyBottomGraphContainer>\n        \n        <Gutter height={this.props.windowHeight * 0.5} />\n\n        <NonSticky className=\"trigger\" data-action-name=\"changeWorldMapHeavyContributor\">\n          For instance, the top 20 contributors who used Korean to label map objects also contributed to the OSM dataset for China, Germany, India, the United States, and South Korea.\n        </NonSticky>  \n        \n\n        <Gutter height={ this.props.windowHeight } />\n\n\n        <NonSticky className=\"trigger\" data-action-name=\"changeWorldMapHeaviestContributor\">\n          For the top five contributors, this list changes slightly: India, Germany, Ukraine, Russia, and Japan.\n        </NonSticky>\n      </SectionFourthContainer>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    windowHeight: state.windowHeight,\n    windowWidth: state.windowWidth\n  }\n}\n\nexport default connect(mapStateToProps)(SectionFourth);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport {SectionContainer, NonSticky} from '../../stylesheets/components';\n\n\nconst SectionFifthContainer = styled(SectionContainer)`\n  background-image: linear-gradient(-180deg, rgba(231, 247, 251, 0.83) 22%, rgba(231, 247, 251, 0.00) 81%);\n`;\n\n\nconst Gutter = styled.div`\n  height: ${props => props.height }px;\n`;\n\nconst NonStickyFinal = styled(NonSticky)`\n  width: 800px;\n`;\n\nconst MethodologyTitle = styled.h4`\n  font-size:0.7em;\n  color: #777;\n  line-height:1.2;\n`;\n\nconst MethodologyPG = styled.p`\n  font-size:0.7em;\n  color: #777;\n  width: 60%;\n`;\n\nclass SectionFifth extends Component {\n  render() {\n    return (\n      <SectionFifthContainer style={{height: this.props.windowHeight}}>\n        <Gutter height={100}></Gutter>\n        <NonStickyFinal className=\"trigger\" data-action-name=\"final\">\n          Although most cartographers of North Korea do not live in the country, they are motivated by issues there. Like data analysts and investigative journalists, they combine information obtained from different sources by a variety of methods to produce place-level knowledge remotely. However, because of the inherent limitations of remotely contributed data, it is questionable whether these strategies can be applied to other crowdsourced projects. We should also consider who ultimately benefits from the OSM process. As mapping is a combination of technical, political, and social capabilities and intentions and open data can be accessed not only by citizens but also by institutions, unexpected outcomes are frequently observed.\n          \n          <Gutter height={50}></Gutter>\n          <MethodologyTitle>\n            * Methodology\n          </MethodologyTitle>\n          <MethodologyPG>\n            OpenStreetMap data is used for the research. The OSM data is under the Open Database License (ODbL) version 1.0 share-alike license. For aggregating the changeset data, I used the centroid point of each changeset boundary. All contributors' screen name is anonymized for protecting the individual privacy.\n          </MethodologyPG>\n        </NonStickyFinal>\n      </SectionFifthContainer>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    windowHeight: state.windowHeight\n  }\n}\n\nexport default connect(mapStateToProps)(SectionFifth);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { InterestingPOIs } from '../';\nimport styled from 'styled-components';\nimport mixins from '../../stylesheets/mixins';\nimport { SectionContainer, Box, Sticky } from '../../stylesheets/components';\nimport interestingPOIs from '../../constants/interesting_pois.json';\nimport _ from 'lodash';\n\nconst SecondContainer = styled(SectionContainer)`\n  margin: 200px 0;\n`;\n\nclass SectionOddPOIs extends Component {\n  render() {\n    var interestingPOIs2 = _.shuffle(interestingPOIs).splice(0, 5);\n\n    return (\n      <SecondContainer>\n        <Sticky className=\"trigger\" data-action-name=\"wrapupChronicleMap\">\n          <Box>\n            It is particularly interesting to note that there are a number of street-level points of interests (POIs).\n          </Box>\n        </Sticky>\n        \n        <div style={{ height: this.props.windowHeight}}>\n        </div>\n\n        {\n          _.map(interestingPOIs2, (interestingPOI, i) => {\n            return (\n              <InterestingPOIs {...interestingPOI} key={i}  />\n            )\n          })\n        }\n      </SecondContainer>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    windowHeight: state.windowHeight\n  }\n}\n\nexport default connect(mapStateToProps)(SectionOddPOIs);","import React, { Component } from 'react'\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport { TextVisualizationResponses } from '../';\nimport {SectionContainer,  NonSticky, Gutter } from '../../stylesheets/components';\nimport _ from 'lodash';\n\nconst SectionTextContainer = styled(SectionContainer)`\n  transition: 0.4s all;\n  background: rgba(231, 247, 251);\n  opacity: 1;\n\n  &.hide {\n    opacity: 0;\n    pointer-events: none;\n  }\n`;\n\n\n\nclass SectionText extends Component {\n  render() {\n    let { selectedOsmUserResponse } = this.props;\n    return (\n      <SectionTextContainer className={selectedOsmUserResponse ? \"hide\" : \"\" } style={{ height: 8000}}>\n        <div style={{ height: this.props.windowHeight }}></div>\n    \n\n        <NonSticky className=\"trigger\" data-action-name=\"initTextVisualization\" style={{ zIndex: 11 }}>\n          To know more about their motivations and mapping strategies, we sent a letter to all of the contributors; here are the responses from 211 contributors.\n        </NonSticky>\n        <Gutter h={200} />\n        <TextVisualizationResponses />\n        <Gutter h={500} />\n        <NonSticky className=\"trigger\" data-action-name=\"changeTextVisualizationWhy\" style={{ zIndex: 11 }}>\n          First, although the contributors' motivation is mostly for fun and pure curiosity—such as searching for empty space in OSM—, they were motivated by diverse reasons; in particular, with the respect of advocating open mapping, they wanted North Koreans to use the map in the near future, such as for escaping their territory. \n        </NonSticky>\n        <Gutter h={1500} />\n        <NonSticky className=\"trigger\" data-action-name=\"changeTextVisualizationHow\" style={{ zIndex: 11 }}>\n          Contributors mostly use satellite imagery to contribute data to North Korea, as OpenStreetMap provides Microsoft Bing satellite images. However, some contributors have first-hand knowledge as they have been to Pyeongyang. Moreover, they often combine resources on the internet to contribute street-level information to the OSM.\n        </NonSticky>\n         <Gutter h={1500} />\n        <NonSticky className=\"trigger\" data-action-name=\"changeTextVisualizationStory\" style={{ zIndex: 11 }}>\n          Some contributors have been interested in North Korea because of similar national history (German citizens) or personal history, and they have followed media outlets. They have thought about the reunification of the Korean peninsula. You can toggle and click to see individual responses.\n        </NonSticky>\n\n      </SectionTextContainer>\n    )\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    windowHeight: state.windowHeight,\n    selectedOsmUserResponse: !_.isNull(state.selectedOsmUserResponse)\n  }\n}\n\nexport default connect(mapStateToProps)(SectionText);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { MapContainer, TextVisualization, SelectedResponseViewer, TitleHeader, TimelineScroller, CholoplethLegend } from '../components';\nimport { changeGraphKorean, changeIntro,  wrapupChronicleMap, changeEmptyMap, changeChronicleMap, initGraphScene, changeCurrentFeature, changeCurrentTimeStamp, initWorldMap, changeWorldMapHeaviestContributor, changeWorldMapHeavyContributor, addTextCategorySelected, changeTextVisualization, removeAllTextCategories, changeOsmUsersDataStats } from '../actions';\nimport 'intersection-observer';\nimport scrollama from 'scrollama';\nimport { Intro, SectionFirst, SectionSecond, SectionThird, SectionFourth, SectionFifth, SectionOddPOIs, SectionText } from '../components/sections';\nimport _ from 'lodash';\nimport interestingPOIs from '../constants/interesting_pois.json';\nimport { scaleLinear } from 'd3';\nimport axios from 'axios';\n\nconst Fragment = React.Fragment;\n\nclass Home extends Component {\n  constructor(props){\n    super(props);\n\n    this.timeScale = scaleLinear().domain([0, 1]).clamp(true).range([1184971551, 1539016223]);\n    this.introZoomLevelScale = scaleLinear()\n      .domain([\n        375, \n        667, \n        750, \n        800, \n        1440\n      ])\n      .range ([\n        5.129678844315936 - 0.1,\n        5.95692370701329 - 0.1,\n        6.169505942965738 - 0.1,\n        6.285137881074422 - 0.1,\n        7.083247699254196 - 0.1\n      ]);\n\n    this.timelineZoomLevelScale = scaleLinear()\n      .domain([\n        375, \n        667, \n        750, \n        800, \n        1440\n      ])\n      .range ([\n        5.129678844315936,\n        5.95692370701329,\n        6.169505942965738,\n        6.285137881074422,\n        7.083247699254196\n      ]);\n\n    this.worldMapZoomLevelScale = scaleLinear()\n      .domain([\n        375,\n        667,\n        750,\n        800,\n        1440\n      ])\n      .range([\n        0.8913299194094557,\n        0.8913299194094557,\n        1.04073926761343,\n        1.234294902868799,\n        1.234294902868799\n      ]);\n\n  }\n  componentDidMount(){\n    document.body.style.overflowY = \"hidden\";\n  }\n\n  loadData(){\n    axios.all([axios.get('https://nkosm.wonyoung.so/summaries.json')])\n    .then(axios.spread((response) => {\n      if (response.data.success) {\n        this.props.dispatch(changeOsmUsersDataStats(response.data));\n      }\n    }));\n  }\n\n  componentDidUpdate(prevProps, prevState){\n    if (prevProps.mapLoaded !== this.props.mapLoaded && this.props.mapLoaded) {\n\n    this.loadData();\n\n    this.scroller = scrollama();\n    this.scroller.setup({\n      step: '.trigger',\n      container: '.scroll-container',\n      offset: 0.8,\n      order: true,\n      progress: true\n    })\n      .onStepEnter(this.handleStepEnter.bind(this))\n      .onStepProgress(_.throttle(this.handleStepProgress.bind(this), 250))\n      .onStepExit(this.handleStepExit.bind(this));\n\n      \n\n      document.body.style.overflowY = \"auto\";\n    }\n\n    if (prevProps.windowHeight !== this.props.windowHeight && !_.isUndefined(this.scroller)) {\n      this.scroller.resize();\n    }\n  }\n  checkActive(){\n    // for (var key in this.activeStepByIndex) {\n    //   if (activeStepByIndex[key]) {\n    //     console.log('index ' + key + ' is active');\n        \n    //   }\n    // }\n  }\n\n  handleStepProgress(e){\n    let actionName = e.element.dataset.actionName;\n    if (actionName === \"changeChronicleMap\") {\n      \n      this.props.dispatch(changeCurrentTimeStamp(this.timeScale(e.progress)));\n\n    }\n  }\n\n  handleStepEnter(e){\n    // console.log(e.index);\n    // console.log(e);\n    // console.log(e.index);\n    let { windowHeight } = this.props;\n    let actionName = e.element.dataset.actionName;\n    console.log(actionName, \"enter\");\n    \n    if (!_.isUndefined(actionName)){\n\n      switch(actionName) {\n        case \"changeIntro\": \n          this.props.dispatch(changeIntro({\n            zoom: this.introZoomLevelScale(windowHeight)\n          }));\n          break;\n        case \"changeEmptyMap\":\n          this.props.dispatch(changeEmptyMap({\n            zoom: this.introZoomLevelScale(windowHeight)\n          }));\n          break;\n        case \"changeChronicleMap\":\n          this.props.dispatch(changeChronicleMap({\n            zoom: this.timelineZoomLevelScale(windowHeight)\n          }));\n          break;\n        case \"wrapupChronicleMap\":\n          this.props.dispatch(wrapupChronicleMap());\n          break;\n        case \"changeInterestingPOIs\":\n          \n          let poi = _.find(interestingPOIs, iPoi => {\n            return iPoi.op === e.element.dataset.poiId;\n          });\n          \n          this.props.dispatch(changeCurrentFeature(poi));\n          break;\n        case \"initGraphScene\":\n          this.props.dispatch(initGraphScene({\n            zoom: this.timelineZoomLevelScale(windowHeight)\n          }));\n          break;\n        case \"changeGraphKorean\":\n          this.props.dispatch(changeGraphKorean({\n            zoom: this.timelineZoomLevelScale(windowHeight)\n          }));\n          break;\n        case 'initWorldMap':\n          this.props.dispatch(initWorldMap({\n            zoom: this.worldMapZoomLevelScale(windowHeight)\n          }));\n          break;\n        case 'changeWorldMapHeavyContributor':\n          this.props.dispatch(changeWorldMapHeavyContributor());\n          break;\n        case 'changeWorldMapHeaviestContributor':\n          this.props.dispatch(changeWorldMapHeaviestContributor());\n          break;\n        case 'initTextVisualization':\n          this.props.dispatch(changeTextVisualization(true));\n          this.props.dispatch(removeAllTextCategories());\n          break;\n        case 'changeTextVisualizationWhy':\n          // this.props.dispatch(change)\n          this.props.dispatch(removeAllTextCategories());\n          this.props.dispatch(addTextCategorySelected(1, {id: 1 }));\n          this.props.dispatch(addTextCategorySelected(3, {id: 3 }));\n          this.props.dispatch(addTextCategorySelected(13, {id: 13 }));\n          break;\n        case 'changeTextVisualizationHow':\n          this.props.dispatch(removeAllTextCategories());\n          this.props.dispatch(addTextCategorySelected(7, {id: 7 }));\n          this.props.dispatch(addTextCategorySelected(8, {id: 8 }));\n          this.props.dispatch(addTextCategorySelected(9, {id: 9 }));\n          \n          break;\n        \n        case 'changeTextVisualizationStory':\n\n          this.props.dispatch(removeAllTextCategories());\n          this.props.dispatch(addTextCategorySelected(4, {id: 4 }));\n          this.props.dispatch(addTextCategorySelected(11, {id: 11 }));\n          this.props.dispatch(addTextCategorySelected(15, {id: 15 }));\n\n          break;\n\n        case 'final':\n          this.props.dispatch(changeTextVisualization(false));\n          break;\n        default: \n          break;\n      }\n\n      \n    }\n    \n  }\n\n  handleStepExit(e){\n    // console.log(e.index);\n// console.log(e);\n    let {windowHeight} = this.props;\n\n    let actionName = e.element.dataset.actionName;\n    // console.log(actionName, \"exit\", e.direction);\n    console.log(actionName, \"exit\");\n    if (!_.isUndefined(actionName)) {\n\n      switch (actionName) {\n     \n        case \"changeGraphKorean\":\n          if (e.direction === \"up\") {\n            this.props.dispatch(initGraphScene({\n              zoom: this.timelineZoomLevelScale(windowHeight)\n            }));\n          }\n          break;\n        case 'initWorldMap': \n          if (e.direction === \"up\") {\n            this.props.dispatch(changeGraphKorean({\n              zoom: this.timelineZoomLevelScale(windowHeight)\n            }));\n          }\n          break;\n        case 'initTextVisualization':\n          if (e.direction === \"up\") {\n\n            this.props.dispatch(changeTextVisualization(false));\n          }\n          \n          break;\n         case 'changeTextVisualizationWhy':\n          if (e.direction === \"up\") {\n            this.props.dispatch(changeTextVisualization(true));\n            this.props.dispatch(removeAllTextCategories());\n          }\n          \n          break;\n        case 'changeTextVisualizationHow':\n          if (e.direction === \"up\") {\n            this.props.dispatch(changeTextVisualization(true));\n\n            this.props.dispatch(removeAllTextCategories());\n            this.props.dispatch(addTextCategorySelected(1, {id: 1 }));\n            this.props.dispatch(addTextCategorySelected(3, {id: 3 }));\n            this.props.dispatch(addTextCategorySelected(13, {id: 13 }));\n          }\n          \n          break;\n        case 'changeTextVisualizationStory':\n          if (e.direction === \"up\") {\n            \n          this.props.dispatch(removeAllTextCategories());\n          this.props.dispatch(addTextCategorySelected(7, {id: 7 }));\n          this.props.dispatch(addTextCategorySelected(8, {id: 8 }));\n          this.props.dispatch(addTextCategorySelected(9, {id: 9 }));\n          }\n          \n          break;\n        case 'final':\n          if (e.direction === \"up\") {\n            this.props.dispatch(changeTextVisualization(true));\n\n            this.props.dispatch(removeAllTextCategories());\n            this.props.dispatch(addTextCategorySelected(4, {id: 4 }));\n            this.props.dispatch(addTextCategorySelected(11, {id: 11 }));\n            this.props.dispatch(addTextCategorySelected(15, {id: 15 }));\n          }\n          \n          break;\n        default: \n          break;\n      }\n\n\n    }\n  }\n\n  render() {\n    let {  selectedOsmUserResponse } = this.props;\n\n    return (\n      <Fragment>\n        <div className=\"scroll-container\">\n          <Intro />\n          <SectionFirst />\n          <SectionSecond />\n          <SectionOddPOIs />\n          <SectionThird />\n          <SectionFourth />\n          <SectionText /> \n          <SectionFifth />\n        </div>\n        <TimelineScroller />\n        <TitleHeader />\n        <CholoplethLegend />\n        {\n          !selectedOsmUserResponse ?\n          <TextVisualization /> : null\n        }\n        {\n          selectedOsmUserResponse ? \n          <SelectedResponseViewer /> : null\n        }\n        <MapContainer />\n      </Fragment>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    mapLoaded: state.mapLoaded,\n    windowWidth: state.windowWidth,\n    windowHeight: state.windowHeight,\n    selectedOsmUserResponse: !_.isNull(state.selectedOsmUserResponse)\n  }\n}\n\nexport default connect(mapStateToProps)(Home);","import React, { Component } from 'react';\nimport { windowResize } from './actions';\nimport { connect } from 'react-redux';\nimport { BrowserRouter, Route } from 'react-router-dom';\nimport Home from './pages/Home';\n\nconst Fragment = React.Fragment;\n\nclass App extends Component {\n  componentWillMount(){\n\n  }\n\n  componentDidMount(){\n\n    window.addEventListener('resize', this.resizeHandler.bind(this));\n    this.resizeHandler();\n  }\n\n\n\n\n  resizeHandler(e){\n    this.props.dispatch(windowResize({\n      width: window.innerWidth,\n      height: window.innerHeight\n    }));\n    \n  }\n\n\n  render() {\n\n    return (\n      <BrowserRouter>\n        <Fragment>\n          <Route path={process.env.PUBLIC_URL + '/'} component={Home} />\n        </Fragment>\n      </BrowserRouter>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    width: state.windowWidth,\n    height: state.windowHeight\n  }\n};\n\nexport default connect(mapStateToProps)(App);","import { createStore } from 'redux';\nimport mainReducer from './main';\n\nexport default createStore(mainReducer);\n","import { DEFAULT_STATE } from '../constants/defaults';\nimport _ from 'lodash';\n\nexport default function screenReducer(state = DEFAULT_STATE, action){\n  switch(action.type) {\n    case \"WINDOW_RESIZE\":\n      return {\n        ...state,\n        windowWidth: action.payload.windowWidth,\n        windowHeight: action.payload.windowHeight\n      }\n\n    case 'CHANGE_OSM_USERS_DATA_STATS':\n      return {\n        ...state,\n        osmUsersDataStats: action.payload.osmUsersDataStats\n      }\n    case 'CHANGE_OSM_USER_HISTORIES_IDX':\n      return {\n        ...state,\n        osmUserHistoriesIdx: action.payload.osmUserHistoriesIdx\n      };  \n    case 'CHANGE_OSM_USER_HISTORIES':\n      return {\n        ...state,\n        osmUserHistories: action.payload.osmUserHistories\n      };    \n    case 'CHANGE_OSM_USER_RESPONSE_DATA':\n      return {\n        ...state,\n        osmUsers: action.payload.osmUsers,\n        responseCategories: action.payload.responseCategories\n      }\n    case 'ADD_TEXT_CATEGORY':\n      return {\n        ...state,\n        selectedTextCategory: {\n          ...state.selectedTextCategory,\n          [action.payload.id]: action.payload.textCategoryInfo\n        }\n      }\n    case \"REMOVE_ALL_TEXT_CATEGORIES\":\n      return {\n        ...state,\n        selectedTextCategory: {}\n      }\n    case 'REMOVE_TEXT_CATEGORY':\n      let selectedTextCategory = { ...state.selectedTextCategory };\n\n      delete selectedTextCategory[action.payload.id]\n      return {\n        ...state,\n        selectedTextCategory: selectedTextCategory\n      }\n    case 'CHANGE_TEXT_VISUALIZATION':\n      return {\n        ...state,\n        textVisualization: action.payload.textVisualization\n      }\n    case \"CHANGE_MAP_LOADED\":\n      return {\n        ...state,\n        mapLoaded: action.payload.mapLoaded\n      }\n    case 'CHANGE_INTRO': \n      return {\n        ...state,\n        nkTile: action.payload.nkTile,\n        titleHeader: action.payload.titleHeader,\n        zoom: action.payload.zoom,\n        center: action.payload.center,\n        currentFeature: action.payload.currentFeature\n      }\n    case 'CHANGE_EMPTY_MAP':\n      return {\n        ...state,\n        nkTile: action.payload.nkTile,\n        zoom: action.payload.zoom,\n        center: action.payload.center,\n        timelineUI: action.payload.timelineUI,\n        currentTimeStamp : action.payload.currentTimeStamp,\n        legend : action.payload.legend,\n        titleHeader: action.payload.titleHeader,\n        currentFeature: action.payload.currentFeature\n      };\n    case 'CHANGE_CHRONICLE_MAP':\n      return {\n        ...state,\n        nkTile: action.payload.nkTile,\n        zoom: action.payload.zoom,\n        center: action.payload.center,\n        currentFeature: action.payload.currentFeature,\n        timelineUI: action.payload.timelineUI,\n        legend: action.payload.legend,\n        titleHeader: action.payload.titleHeader\n      };\n    case 'CHANGE_SELECTED_OSM_USER_RESPONSE':\n      return {\n        ...state,\n        selectedOsmUserResponse: action.payload.selectedOsmUserResponse,\n        cholopleth: _.isNull(action.payload.selectedOsmUserResponse),\n        nkTile: !_.isNull(action.payload.selectedOsmUserResponse),\n        osmUserHistoriesIdx: _.isNull(action.payload.selectedOsmUserResponse) ? 0 : state.osmUserHistoriesIdx\n      };\n    case 'WRAPUP_CHRONICLE_MAP':\n      return {\n        ...state,\n        timelineUI: action.payload.timelineUI,\n        currentTimeStamp: action.payload.currentTimeStamp,\n        legend: action.payload.legend,\n        titleHeader: action.payload.titleHeader\n      }\n\n    case 'CHANGE_INTERESTING_POIS':\n      return {\n        ...state\n      };\n    case 'INIT_GRAPH_SCENE':\n      return {\n        ...state,\n        nkTile: action.payload.nkTile,\n        legend: action.payload.legend,\n        timelineUI: action.payload.timelineUI,\n        currentFeature: action.payload.currentFeature,\n        zoom: action.payload.zoom,\n        center: action.payload.center,\n        graphMode: action.payload.graphMode,\n        titleHeader: action.payload.titleHeader\n      };\n    case 'CHANGE_GRAPH_KOREAN':\n      return {\n        ...state,\n        nkTile: action.payload.nkTile,\n        graphMode: action.payload.graphMode,\n        zoom: action.payload.zoom,\n        center: action.payload.center,\n        cholopleth: action.payload.cholopleth,\n        titleHeader: action.payload.titleHeader\n      };\n    case 'INIT_WORLD_MAP':\n      return {\n        ...state,\n        nkTile: action.payload.nkTile,\n        zoom: action.payload.zoom,\n        center: action.payload.center,\n        currentFeature: action.payload.currentFeature,\n        cholopleth: action.payload.cholopleth,\n        choloplethMode: action.payload.choloplethMode, //top20, top5, individual\n        currentIndividual: action.payload.currentIndividual,\n        legend: action.payload.legend,\n        titleHeader: action.payload.titleHeader\n      };\n    case 'CHANGE_WORLD_MAP_HEAVY_CONTRIBUTOR':\n      return {\n        ...state,\n        nkTile: action.payload.nkTile,\n        cholopleth: action.payload.cholopleth,\n        currentFeature: action.payload.currentFeature,\n        choloplethMode: action.payload.choloplethMode, //top20, top5, individual\n        currentIndividual: action.payload.currentIndividual,\n        legend: action.payload.legend\n      };\n    case 'CHANGE_WORLD_MAP_HEAVIEST_CONTRIBUTOR':\n      return {\n        ...state,\n        nkTile: action.payload.nkTile,\n        cholopleth: action.payload.cholopleth,\n        currentFeature: action.payload.currentFeature,\n        choloplethMode: action.payload.choloplethMode, //top20, top5, individual\n        currentIndividual: action.payload.currentIndividual,\n        legend: action.payload.legend,\n        textVisualization: false\n      };\n    case 'CHANGE_WORLD_MAP_INDIVIDUAL':\n      return {\n        ...state,\n        nkTile: action.payload.nkTile,\n        currentFeature: action.payload.currentFeature,\n        currentIndividual: action.payload.currentIndividual        \n      }\n    case \"RESET\":\n      return {\n        ...state\n      }\n    case \"CHANGE_CURRENT_SEQ\":\n      return {\n        ...state,\n        currentSeq: action.payload.currentSeq\n      }\n    case \"CHANGE_CURRENT_TIMESTAMP\":\n      return {\n        ...state,\n        currentTimeStamp: action.payload.currentTimeStamp\n      }\n    case \"CHANGE_CURRENT_FEATURE\":\n      return {\n        ...state,\n        nkTile: true,\n        currentFeature: action.payload.currentFeature,\n        legend: true\n      }\n    default:\n      break;\n  }\n\n  return state;\n};","import React from 'react';\nimport { render } from 'react-dom';\nimport { Provider } from 'react-redux';\nimport App from './App';\nimport AppState from './reducers';\nimport \"./stylesheets/style.scss\";\n\nrender(\n  <Provider store={AppState}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);"],"sourceRoot":""}