{"version":3,"sources":["actions/index.js","utils/index.js","components/MapContainer.js","components/PageMapContainer.js","components/ContributorInfo.js","components/CenterMarker.js","components/MessageContributorInfo.js","components/ContDistribution.js","components/ChoroplethMap.js","components/YearLegend.js","components/MessageTopInfo.js","stylesheets/mixins.js","stylesheets/components.js","components/InterestingPOIs.js","components/TitleHeader.js","components/ContributorsGraph.js","components/TimelineScroller.js","components/CholoplethLegend.js","components/KoreanLegend.js","components/IndividualInfo.js","constants/defaults.js","components/TextVisualization.js","components/TextVisualizationResponses.js","components/UserResponse.js","components/SelectedResponseViewer.js","components/NumberContributionLegend.js","components/sections/Intro.js","components/sections/SectionFirst.js","components/sections/SectionSecond.js","components/sections/SectionThird.js","components/sections/SectionFourth.js","components/sections/SectionFifth.js","components/sections/SectionOddPOIs.js","components/sections/SectionText.js","pages/Home.js","App.js","reducers/index.js","reducers/main.js","index.js"],"names":["changeOsmUserHistories","osmUserHistories","type","payload","changeSelectedOsmUserResponse","selectedOsmUserResponse","addTextCategorySelected","id","textCategoryInfo","changeTextVisualization","textVisualization","initGraphScene","params","nkTile","legend","currentFeature","timelineUI","zoom","center","graphMode","titleHeader","changeGraphKorean","cholopleth","choloplethMode","currentIndividual","changeWorldMapIndividual","individual","changeMapLoaded","mapLoaded","numberWithDelimiter","number","delimiter","separator","parts","toString","split","replace","join","e","randomBetween","low","high","diff","Math","random","MapContainer","window","mapboxgl","accessToken","this","map","Map","container","refsMapContainer","style","on","handleStyleLoad","bind","handleMoveEnd","handleRender","props","dispatch","addSource","tiles","addLayer","source","source-layer","layout","visibility","paint","line-opacity","line-color","property","stops","filter","fill-opacity","fill-color","circle-radius","circle-color","addWorldMap","resize","url","line-width","prevProps","_this$props","currentTimeStamp","osmUserHistoriesIdx","nkTileVisibility","isStyleLoaded","setLayoutProperty","_","isNull","stop","flyTo","isUndefined","getLayer","removeLayer","removeSource","updateCurrentFeature","updateCurrentCholopleth","setFilter","updateOsmUserHistory","osmUserHistory","feature4326","toWgs84","features","proj4","bbox","turf","buffered","buffer","bboxPolygon","finalBbox","data","circle-opacity","getSource","setData","fitBounds","padding","top","bottom","left","right","choloplethVisibility","currentCountryJSON","country_counts","country_analysis_all","country_analysis_top_20","country_analysis_top_5","updateCurrentCountryJSON","expression","colorScale","d3","domain","range","extent","cc","count","finalDomain","each","push","world_id","setPaintProperty","feature","geometry","coordinates","zoomInData","_this","delay","nextNum","length","_this2","windowHeight","react_default","a","createElement","ref","c","className","height","Component","connect","state","windowWidth","currentSeq","isFirstTransition","PageMapContainer","refsPageMapContainer","interactive","newProps","console","log","Fragment","React","ContributorInfo","osm_user","moment","unix","osm_timestamp","format","rank","CenterMarker","name","MessageContributorInfo","countryCounts","sortedCounts","sortBy","reverse","splicedCounts","sc","splice","sp","i","nameKo","find","worldData","wd","name_ko","nameEn","name_en","topThreeCountries","getTopThreeCountries","components_ContDistribution","width","allCount","all_count","total_contribution_count","key","concat","ChoroplethMap","HIST","value","ContDistribution","d3Render","xDomain","first","last","yDomain","h","xScale","yScale","clamp","svg","svgContainer","selectAll","remove","lineDraw","x","d","y","append","attr","xAxis","enter","text","children","osm_id","ChoroplethMap_Fragment","val","backgroundColor","Number","toFixed","YearLegend","yearScale","opacity","MessageTopInfo","MessageTopInfo_Fragment","mixins","SectionContainer","styled","section","_templateObject","Gutter","div","_templateObject2","Sticky","_templateObject3","NonSticky","_templateObject4","Box","_templateObject5","InterestingPOIsContainer","InterestingPOIs_templateObject","POIBox","InterestingPOIs_templateObject2","TitleArea","InterestingPOIs_templateObject3","Label","h4","InterestingPOIs_templateObject4","Value","InterestingPOIs_templateObject5","Date","_templateObject6","Disclaimer","_templateObject7","InterestingPOIs","data-action-name","data-poi-id","op","InterestingPOIs_Date","HeaderContainer","TitleHeader_templateObject","TitleHeader","ContributorsGraphBox","ContributorsGraph_templateObject","Title","ContributorsGraph_templateObject2","Tooltip","ContributorsGraph_templateObject3","ToolTipLabelArea","ContributorsGraph_templateObject4","ToolTipLabel","ContributorsGraph_templateObject5","ToolTipValue","ContributorsGraph_templateObject6","ContributorsGraph","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","margin","refGraph","createRef","currentHover","simulation","osmUsersDataStats","stats","osm_users","force","strength","tick","_this3","current","initSimulation","xAxisFunction","g","ticks","tickFormat","LN10","abs","round","tickSizeOuter","circleGraph","radius","setState","objectSpread","cx","cy","transition","circleColor","setCircleColor","_this4","_this$props2","korean","prevState","_this5","_this$props3","d3Init","d3Update","_this$props4","floor","korean_pct","components_KoreanLegend","show","components_NumberContributionLegend","scale","components_IndividualInfo","Container","TimelineScroller_templateObject","RightStat","TimelineScroller_templateObject2","TimelineScroller_templateObject3","p","TimelineScroller_templateObject4","Timeline","TimelineScroller_templateObject5","Line","TimelineScroller_templateObject6","color","TimelineScroller_templateObject7","TimelineScroller","timeScale","scaleLinear","TimelineScroller_Fragment","TimelineScroller_Label","TimelineScroller_Value","TimelineScroller_Date","components_YearLegend","CholoplethLegend","result","LegendBox","KoreanLegend_templateObject","RedCircle","KoreanLegend_templateObject2","KoreanLegend_templateObject3","KoreanLegend","KoreanLegend_Label","IndividualInfo_templateObject","Area","IndividualInfo_templateObject2","IndividualInfo_templateObject3","IndividualInfo_templateObject4","SmallSize","span","IndividualInfo_templateObject5","CloseButton","IndividualInfo_templateObject6","IndividualInfo","worldIds","country","worldId","label","world_data","w","top5Countries","getTop5Countries","IndividualInfo_Box","onClick","handleClick","href","IndividualInfo_Label","IndividualInfo_Value","DEFAULT_STATE","osmUsers","responseCategories","selectedTextCategory","CATEGORIES_COLORS","SUBCATEGORY_SELECT","1","2","3","Bar","TextVisualization_templateObject","CategoryLink","TextVisualization_templateObject2","UnCategoryLink","TextVisualization_templateObject3","ArrowArea","TextVisualization_templateObject4","TextVisualization","axios","all","get","then","spread","response","success","response_categories","subCategories","groupBy","subcategory_id","rc","TextVisualization_Fragment","categories","handleAddTextCategory","category_name","src","process","GridBox","TextVisualizationResponses_templateObject","Main","TextVisualizationResponses_templateObject2","TextVisualizationResponses","fontSizeScale","lineHeightScale","ou","components_UserResponse","assign","fontSize","lineHeight","ceil","TextSpan","UserResponse_templateObject","RespArea","UserResponse_templateObject2","UserResponse","responses","selected","category_id","resp","RespContainer","SelectedResponseViewer_templateObject","DataInfoContainer","SelectedResponseViewer_templateObject2","SelectedResponseViewer_templateObject3","SelectedResponseViewer_templateObject4","SelectedResponseViewer_templateObject5","SelectedResponseViewer_templateObject6","SelectedResponseViewer_templateObject7","CategorySpan","_templateObject8","RespInfoArea","_templateObject9","SelectedResponseViewer","intervalId","document","body","overflow","loadOsmUserSampleData","histories","catch","error","respCategories","uniq","compact","respCategory","osmHistory","selectedColorCategories","getSelectedColorCategories","SelectedResponseViewer_Fragment","handleClose","alt","r","bgColor","scc","SelectedResponseViewer_POIBox","SelectedResponseViewer_TitleArea","SelectedResponseViewer_Label","SelectedResponseViewer_Value","properties","SelectedResponseViewer_Date","NumberContributionLegend_templateObject","Circle","NumberContributionLegend_templateObject2","NumberContributionLegend_templateObject3","NumberContributionLegend","NumberContributionLegend_LegendBox","NumberContributionLegend_Label","SubtitleKo","Intro_templateObject","IntroContainer","Intro_templateObject2","TitleContainer","Intro_templateObject3","H1","h1","Intro_templateObject4","SubParagraph","Intro_templateObject5","DateBox","Intro_templateObject6","Prompt","Intro_templateObject7","Intro","viewBox","enableBackground","fill","SectionFirst_templateObject","SectionFirst","SectionFirst_IntroContainer","SecondContainer","SectionSecond_templateObject","SectionSecond","SectionThirdContainer","SectionThird_templateObject","GradientSticky","SectionThird_templateObject2","SectionThird_templateObject3","StickyGraphArea","SectionThird_templateObject4","SectionThird","graphHeight","SectionThird_NonSticky","components_ContributorsGraph","SectionFourthContainer","SectionFourth_templateObject","SectionFourth_templateObject2","StickyBottomGraphContainer","SectionFourth_templateObject3","SectionFourth","SectionFourth_Gutter","SectionFifthContainer","SectionFifth_templateObject","SectionFifth_templateObject2","NonStickyFinal","SectionFifth_templateObject3","MethodologyTitle","SectionFifth_templateObject4","MethodologyPG","SectionFifth_templateObject5","SectionFifth","SectionFifth_Gutter","SectionOddPOIs_templateObject","SectionOddPOIs","interestingPOIs2","shuffle","interestingPOIs","SectionOddPOIs_SecondContainer","interestingPOI","components_InterestingPOIs","SectionTextContainer","SectionText_templateObject","SectionText","zIndex","components_TextVisualizationResponses","Home","introZoomLevelScale","timelineZoomLevelScale","worldMapZoomLevelScale","overflowY","loadData","scroller","scrollama","setup","step","offset","order","progress","onStepEnter","handleStepEnter","onStepProgress","throttle","handleStepProgress","onStepExit","handleStepExit","scroll","element","dataset","actionName","changeEmptyMap","changeChronicleMap","poi","iPoi","poiId","initWorldMap","direction","Home_Fragment","sections_Intro","sections_SectionFirst","sections_SectionSecond","sections_SectionOddPOIs","sections_SectionThird","sections_SectionFourth","sections_SectionText","sections_SectionFifth","components_TimelineScroller","components_TitleHeader","components_CholoplethLegend","components_TextVisualization","components_SelectedResponseViewer","components_MapContainer","App","addEventListener","resizeHandler","dimension","innerWidth","innerHeight","BrowserRouter","App_Fragment","Route","path","component","createStore","arguments","undefined","action","defineProperty","render","es","store","AppState","src_App","getElementById"],"mappings":"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","file":"static/js/main.49a5ac8c.chunk.js","sourcesContent":["\n\nexport const reset = () => {\n  return {\n    type: 'RESET',\n    payload: {}\n  }\n}\n\nexport const changeOsmUsersDataStats = (osmUsersDataStats) => {\n  return {\n    type: 'CHANGE_OSM_USERS_DATA_STATS',\n    payload: {\n      osmUsersDataStats: osmUsersDataStats\n    }\n  }\n}\n\nexport const removeAllTextCategories = () => {\n  return {\n    type: \"REMOVE_ALL_TEXT_CATEGORIES\",\n    payload: {\n      \n    }\n  }\n}\nexport const changeOsmUserHistories = (osmUserHistories) => {\n  return {\n    type: 'CHANGE_OSM_USER_HISTORIES',\n    payload: {\n      osmUserHistories: osmUserHistories\n    }\n  }\n}\n\nexport const changeOsmUserHistoriesIdx = (osmUserHistoriesIdx) => {\n  return {\n    type: 'CHANGE_OSM_USER_HISTORIES_IDX',\n    payload: {\n      osmUserHistoriesIdx: osmUserHistoriesIdx\n    }\n  }\n}\n\n\nexport const changeSelectedOsmUserResponse = (selectedOsmUserResponse) => {\n  return {\n    type: 'CHANGE_SELECTED_OSM_USER_RESPONSE',\n    payload: {\n      selectedOsmUserResponse: selectedOsmUserResponse\n    }\n  }\n}\n\n// export const \nexport const changeOsmUserReponseData = (osmUsers, responseCategories) => {\n  return {\n    type: 'CHANGE_OSM_USER_RESPONSE_DATA',\n    payload: {\n      osmUsers: osmUsers,\n      responseCategories: responseCategories\n    }\n  }\n}\n\n\nexport const addTextCategorySelected = (id, textCategoryInfo) => {\n  return {\n    type: 'ADD_TEXT_CATEGORY',\n    payload: {\n      id: id,\n      textCategoryInfo: textCategoryInfo\n    }\n  }\n}\nexport const removeTextCategorySelected = (id) => {\n  return {\n    type: 'REMOVE_TEXT_CATEGORY',\n    payload: {\n      id: id\n    }\n  }\n}\n\n\nexport const changeTextVisualization = (textVisualization) => {\n  return {\n    type: 'CHANGE_TEXT_VISUALIZATION',\n    payload: {\n      textVisualization: textVisualization\n    }\n  }\n}\n\n\nexport const changeIntro = (params) => {\n  return {\n    type: 'CHANGE_INTRO',\n    payload: {\n      nkTile: false,\n      zoom: params.zoom,\n      center: [127.09741740583831, 40.395224876339796],\n      timelineUI: false,\n      currentTimeStamp: 0,\n      legend: false,\n      titleHeader: false,\n      currentFeature: null\n    }\n  }\n}\n\nexport const changeEmptyMap = (params) => {\n  return {\n    type: 'CHANGE_EMPTY_MAP',\n    payload: {\n      nkTile: false,\n      zoom: params.zoom,\n      center: [127.09741740583831, 40.395224876339796],\n      timelineUI: false,\n      currentTimeStamp: 0,\n      legend: false,\n      titleHeader: true,\n      currentFeature: null\n    }\n  }\n};\n\nexport const wrapupChronicleMap = () => {\n  return {\n    type: 'WRAPUP_CHRONICLE_MAP',\n    payload: {\n      timelineUI: false,\n      currentTimeStamp : 1539016223,\n      legend: false,\n      titleHeader: true\n    }\n  }\n}\n\nexport const changeChronicleMap = (params) => {\n  return {\n    type: 'CHANGE_CHRONICLE_MAP',\n    payload: {\n      nkTile: true,\n      zoom: params.zoom,\n      center: [127.31301436214687, 40.48099092278639],\n      currentFeature: null,\n      timelineUI: true,\n      legend: true,\n      titleHeader: true\n    }\n  }\n};\n\nexport const changeInterestingPOIs = () => {\n  return {\n    type: 'CHANGE_INTERESTING_POIS',\n    payload: {\n      nkTile: true,\n      titleHeader: true\n    }\n  }\n}\n\nexport const initGraphScene = (params) => {\n  return {\n    type: 'INIT_GRAPH_SCENE',\n    payload: {\n      nkTile: true,\n      legend : false,\n      currentFeature : null,\n      timelineUI: false,\n      zoom: params.zoom,\n      center: [127.31301436214687, 40.48099092278639],\n      graphMode: \"all\",\n      titleHeader: true\n    }\n  }\n};\n\nexport const changeGraphKorean = (params) => {\n  return {\n    type: 'CHANGE_GRAPH_KOREAN',\n    payload: {\n      nkTile : true,\n      graphMode: \"korean\",\n      zoom: params.zoom,\n      center: [127.31301436214687, 40.48099092278639],\n      cholopleth: false,\n      choloplethMode: \"all\", //top20, top5, individual\n      currentIndividual: null,\n      currentFeature: null,\n      titleHeader: true\n    }\n  }\n};\n\nexport const initWorldMap = (params) => {\n  return {\n    type: 'INIT_WORLD_MAP',\n    payload: {\n      nkTile: false,\n      cholopleth: true,\n      choloplethMode: \"all\", //top20, top5, individual\n      currentIndividual: null,\n      currentFeature: null,\n      titleHeader: true,\n      legend: false,\n      zoom : params.zoom,\n      center: [152.4583090179674, 18.892423140497797]\n    }\n  }\n};\n\nexport const changeWorldMapHeavyContributor = () => {\n  return {\n    type: 'CHANGE_WORLD_MAP_HEAVY_CONTRIBUTOR',\n    payload: {\n      cholopleth: true,\n      choloplethMode: \"top20\", //top20, top5, individual\n      currentIndividual: null,\n      currentFeature: null,\n      legend: false,\n      textVisualization: false\n    }\n  }\n};\n\nexport const changeWorldMapHeaviestContributor = () => {\n  return {\n    type: 'CHANGE_WORLD_MAP_HEAVIEST_CONTRIBUTOR',\n    payload: {\n      cholopleth: true,\n      choloplethMode: \"top5\", //top20, top5, individual\n      currentIndividual: null,\n      currentFeature: null,\n      legend: false,\n      textVisualization: false\n    }\n  }\n};\n\nexport const changeWorldMapIndividual = (individual) => {\n  return {\n    type: 'CHANGE_WORLD_MAP_INDIVIDUAL',\n    payload: {\n      cholopleth: true,\n      currentIndividual: individual,\n      currentFeature: null,\n      legend: false,\n      textVisualization: false\n    }\n  }\n};\n\nexport const windowResize = (dimension) => {\n  return {\n    type: 'WINDOW_RESIZE',\n    payload: {\n      windowWidth: dimension.width,\n      windowHeight: dimension.height\n    }\n  }\n}\n\nexport const changeMapLoaded = (mapLoaded) => {\n  return {\n    type: 'CHANGE_MAP_LOADED',\n    payload: {\n      mapLoaded: mapLoaded\n    }\n  }\n}\n\nexport const changeCurrentSeq = (currentSeq) => {\n  return {\n    type: 'CHANGE_CURRENT_SEQ',\n    payload: {\n      currentSeq: currentSeq\n    }\n  }\n}\n\nexport const changeCurrentFeature = (currentFeature) => {\n  return {\n    type: 'CHANGE_CURRENT_FEATURE',\n    payload: {\n      currentFeature: currentFeature,\n      timelineUI: false,\n      currentTimeStamp: 1539016223,\n      legend: true,\n      titleHeader: true\n    }\n  }\n}\n\nexport const changeCurrentTimeStamp = (currentTimeStamp) => {\n  return {\n    type: 'CHANGE_CURRENT_TIMESTAMP',\n    payload: {\n      currentTimeStamp: currentTimeStamp\n    }\n  }\n}\n\nexport const changeDataLoaded = (dataLoaded) => {\n  return {\n    type: 'CHANGE_DATA_LOADED',\n    payload: {\n      dataLoaded: dataLoaded\n    }\n  }\n}","import _ from 'lodash';\n\n\nexport const constrain = (amt, low, high) => {\n  return (amt < low) ? low : ((amt > high) ? high : amt);\n}\n\n\n\n\nexport const numberWithDelimiter = (number, delimiter, separator) => {\n  try {\n    delimiter = delimiter || \",\";\n    separator = separator || \".\";\n    \n    var parts = number.toString().split('.');\n    parts[0] = parts[0].replace(/(\\d)(?=(\\d\\d\\d)+(?!\\d))/g, \"$1\" + delimiter);\n    return parts.join(separator);\n  } catch(e) {\n    return number\n  }\n};\n\nexport const getMetaContent = (name) => {\n  var metas = document.getElementsByTagName('meta');\n  let result = \"\"\n  _.each(metas, (meta) => {\n    if (meta.getAttribute(\"name\") === name) {\n      result = meta.getAttribute(\"content\");\n    }\n  });\n\n  return result;\n}\n\n\n\nexport const randomBetween = (low, high) => {\n  if (low >= high) return low;\n  var diff = high - low;\n  return Math.random() * diff + low;\n};\n\nexport const map = (value, start1,  stop1, start2,  stop2) => {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { changeMapLoaded, changeOsmUserHistoriesIdx } from '../actions';\nimport { toWgs84 }  from 'reproject';\nimport proj4 from 'proj4';\nimport turf from 'turf';\nimport { randomBetween } from '../utils';\nimport country_analysis_all from '../constants/country_analysis_all.json';\nimport country_analysis_top_20 from '../constants/country_analysis_top_20.json';\nimport country_analysis_top_5 from '../constants/country_analysis_top_5.json';\nimport * as d3 from 'd3';\nimport _ from 'lodash';\n\nclass MapContainer extends Component {\n\n  componentDidMount() {\n    window.mapboxgl.accessToken = 'pk.eyJ1Ijoic2Vuc2VhYmxlIiwiYSI6ImxSNC1wc28ifQ.hst-boAjFCngpjzrbXrShw';\n\n    this.map = new window.mapboxgl.Map({\n      container: this.refsMapContainer,\n      style: 'mapbox://styles/senseable/cjqd080el9i9y2rl7aarmzsbu',\n      zoom: 6.2,\n      // minZoom: 4,\n      center: [127.1205757172753, 38.76675314095931],\n      // interactive: false\n\n    });\n\n\n    window.map = this.map;\n    this.map.on('style.load', this.handleStyleLoad.bind(this));\n    this.map.on('moveend', this.handleMoveEnd.bind(this));\n    this.map.on('styledata', this.handleRender.bind(this));\n    \n    \n  }\n\n  handleRender(e){\n  }\n  \n  handleStyleLoad(e) {\n    this.props.dispatch(changeMapLoaded(true));\n  \n    this.map.addSource('nk-line', {\n      type: 'vector',\n      tiles: ['https://tiles.wonyoung.so/services/vector-tiles/nk_osm_line/{z}/{x}/{y}.pbf']\n    })\n\n    this.map.addSource('nk-polygon', {\n      type: 'vector',\n      tiles: ['https://tiles.wonyoung.so/services/vector-tiles/nk_osm_polygon/{z}/{x}/{y}.pbf']\n    })\n  \n    this.map.addSource('nk-point', {\n      type: 'vector',\n      tiles: ['https://tiles.wonyoung.so/services/vector-tiles/nk_osm_point/{z}/{x}/{y}.pbf;']\n    })\n    \n    this.map.addLayer({\n      \"id\": \"nk-line-layer\",\n      \"source\": \"nk-line\",\n      \"source-layer\": \"nk_osm_line_4326\",\n      \"type\": \"line\",\n      \"layout\": {\n        'visibility': 'none'\n      },\n      \"paint\": {\n        'line-opacity': 0.25,\n        'line-color':  {\n          property: 't',\n          stops: [\n            [1184972887, \"#ffffcc\"],\n            [1346511620, \"#d6efc2\"],\n            [1360958163, \"#acdeb7\"],\n            [1378200802, \"#81ceba\"],\n            [1395305792, \"#56bec1\"],\n            [1438380051, \"#3caac2\"],\n            [1479834657, \"#3391bc\"],\n            [1502367226, \"#2b77b4\"],\n            [1510168743, \"#2855a4\"],\n            [1516131630, \"#253494\"]\n          ]\n        }\n      },\n      \"filter\": [\"<\", 't', 1384972887]\n    }, 'place-city-sm');\n\n    this.map.addLayer({\n      \"id\": \"nk-polygon-layer\",\n      \"source\": \"nk-polygon\",\n      \"source-layer\": \"nk_osm_polygon_4326\",\n      \"type\": \"fill\",\n      \"layout\": {\n        'visibility': 'none'\n      },\n      \"paint\": {\n        'fill-opacity': 0.5,\n        'fill-color':  {\n          property: 't',\n          stops: [\n            [1184972887, \"#ffffcc\"],\n            [1346511620, \"#d6efc2\"],\n            [1360958163, \"#acdeb7\"],\n            [1378200802, \"#81ceba\"],\n            [1395305792, \"#56bec1\"],\n            [1438380051, \"#3caac2\"],\n            [1479834657, \"#3391bc\"],\n            [1502367226, \"#2b77b4\"],\n            [1510168743, \"#2855a4\"],\n            [1516131630, \"#253494\"]\n          ]\n        }\n      },\n      \"filter\": [\"<\", 't', 1384972887]\n    }, 'place-city-sm');\n\n    this.map.addLayer({\n      \"id\": \"nk-point-layer\",\n      \"source\": \"nk-point\",\n      \"source-layer\": \"nk_osm_point_4326\",\n      \"type\": \"circle\",\n      \"layout\": {\n        'visibility': 'none'\n      },\n      \"paint\": {\n        'circle-radius': 2,\n        'circle-color':  {\n          property: 't',\n          stops: [\n            [1184972887, \"#ffffcc\"],\n            [1346511620, \"#d6efc2\"],\n            [1360958163, \"#acdeb7\"],\n            [1378200802, \"#81ceba\"],\n            [1395305792, \"#56bec1\"],\n            [1438380051, \"#3caac2\"],\n            [1479834657, \"#3391bc\"],\n            [1502367226, \"#2b77b4\"],\n            [1510168743, \"#2855a4\"],\n            [1516131630, \"#253494\"]\n          ]\n        }\n      },\n      \"filter\": [\"<\", 't', 1384972887]\n    }, 'place-city-sm');\n\n    this.addWorldMap();\n    this.map.resize();\n  }\n\n  addWorldMap(){\n    this.map.addSource(\"world-map-source\", {\n      type: 'vector',\n      url: 'mapbox://senseable.8x6k6499'\n    });\n\n    this.map.addLayer({\n      \"id\": \"world-map-layer\",\n      \"source\": \"world-map-source\",\n      \"source-layer\": \"world_assoc-c3znvj\",\n      \"type\": \"fill\",\n      \"layout\": {\n        'visibility': 'none'\n      },\n      \"paint\": {\n        'fill-opacity': 0.7,\n        'fill-color': '#FFFFFF'\n      }\n    }, 'waterway-label');\n\n    this.map.addLayer({\n      \"id\": \"world-map-line-layer\",\n      \"source\": \"world-map-source\",\n      \"source-layer\": \"world_assoc-c3znvj\",\n      \"type\": \"line\",\n      \"layout\": {\n        'visibility': 'none'\n      },\n      \"paint\": {\n        'line-opacity': 0.2,\n        'line-color': '#BBB',\n        'line-width': 1\n      }\n    }, 'waterway-label');\n\n  }\n\n\n  componentDidUpdate(prevProps){\n    let { nkTile, cholopleth, currentFeature, zoom, center, currentTimeStamp, currentIndividual, choloplethMode, osmUserHistories, osmUserHistoriesIdx } = this.props;\n\n\n    let nkTileVisibility = nkTile ? 'visible' : 'none';\n\n    if (window.map.isStyleLoaded()){\n      this.map.resize();\n  \n      this.map.setLayoutProperty('nk-line-layer', 'visibility', nkTileVisibility);\n      this.map.setLayoutProperty('nk-polygon-layer', 'visibility', nkTileVisibility);\n      this.map.setLayoutProperty('nk-point-layer', 'visibility', nkTileVisibility);\n  \n      // console.log(\"currentFeature\", currentFeature);\n      if (_.isNull(currentFeature)) {\n        this.map.stop();\n        this.map.flyTo({ center: center, zoom: zoom });\n        if (!_.isUndefined(this.map.getLayer(\"currentFeature-point\"))) {\n  \n          this.map.removeLayer(\"currentFeature-point\");\n          this.map.removeLayer(\"currentFeature-line\");\n          this.map.removeLayer(\"currentFeature-fill\");\n          this.map.removeSource(\"currentFeature\");\n        }\n      } else {\n        this.updateCurrentFeature(currentFeature);\n      }\n  \n      \n      this.updateCurrentCholopleth(cholopleth, choloplethMode, currentIndividual);\n  \n      this.map.setFilter('nk-line-layer', [\"<\", \"t\", currentTimeStamp]);\n      this.map.setFilter('nk-polygon-layer', [\"<\", \"t\", currentTimeStamp]);\n      this.map.setFilter('nk-point-layer', [\"<\", \"t\", currentTimeStamp]);  \n\n      if (_.isNull(prevProps.selectedOsmUserResponse) && !_.isNull(this.props.selectedOsmUserResponse)){\n        \n        this.map.stop();\n        this.map.flyTo({ center: [127.1205757172753, 38.76675314095931], zoom: 6.2 });\n      \n      } else if (!_.isNull(prevProps.selectedOsmUserResponse) && _.isNull(this.props.selectedOsmUserResponse)) {\n\n        this.map.stop();\n        this.map.flyTo({ center: center, zoom: zoom });\n      }\n\n    }\n\n\n    if (!_.isNull(osmUserHistories)) {\n      if (!_.isUndefined(osmUserHistories[osmUserHistoriesIdx])){\n        this.updateOsmUserHistory(osmUserHistories[osmUserHistoriesIdx]);\n      }\n    } else {\n      if (!_.isUndefined(this.map.getLayer('osm-user-history'))){\n        this.map.removeLayer('osm-user-history');\n        this.map.removeLayer('osm-user-history-circle');\n        this.map.removeSource('osm-user-history-source');\n\n        this.map.removeLayer('osm-user-history-bbox');\n        this.map.removeSource('osm-user-history-bbox-source');\n      }\n    }\n\n    \n  }\n\n  updateOsmUserHistory(osmUserHistory){\n\n    \n    let feature4326 = toWgs84(osmUserHistory.features[0], proj4('EPSG:3857'));\n\n    let bbox = turf.bbox(feature4326);\n    let buffered = turf.buffer(turf.bboxPolygon(bbox), 1, \"miles\");\n    let finalBbox = turf.bbox(buffered)\n\n\n    // if (window.map.isStyleLoaded()){\n\n      if (_.isUndefined(this.map.getLayer('osm-user-history'))){\n        // var bboxPolygon = turf.bboxPolygon(bbox);\n        // console.log(bboxPolygon);\n\n        this.map.addSource(\"osm-user-history-bbox-source\", {\n          type: 'geojson',\n          data: turf.bboxPolygon(finalBbox)\n        });\n\n        this.map.addLayer({\n          'id': 'osm-user-history-bbox',\n          'type': 'line',\n          'source': \"osm-user-history-bbox-source\",\n          'layout': {},\n          'paint': {\n            'line-color': '#FF0000',\n            'line-opacity': 0.8\n          }\n        });\n\n        this.map.addSource(\"osm-user-history-source\", {\n          type: 'geojson',\n          data: feature4326\n        });\n\n        this.map.addLayer({\n          'id': 'osm-user-history',\n          'type': 'line',\n          'source': \"osm-user-history-source\",\n          'layout': {},\n          'paint': {\n            'line-color': '#FF0000',\n            'line-opacity': 0.8\n          },\n          \"filter\": [\"in\", \"$type\", \"Polygon\", \"LineString\"]\n        });\n\n        this.map.addLayer({\n          'id': 'osm-user-history-circle',\n          'type': 'circle',\n          'source': \"osm-user-history-source\",\n          'layout': {},\n          'paint': {\n            'circle-color': '#FF0000',\n            'circle-opacity': 0.8\n          },\n          \"filter\": [\"==\", \"$type\", \"Point\"]\n        });\n\n      } else {\n\n        this.map.getSource('osm-user-history-source').setData(feature4326);\n        this.map.getSource('osm-user-history-bbox-source').setData(turf.bboxPolygon(finalBbox));\n        \n        \n      }\n\n    // }\n    \n\n    try {\n\n      this.map.fitBounds([[finalBbox[0], finalBbox[1]],\n      [finalBbox[2], finalBbox[3]]], {\n          padding: { top: 100, bottom: 100, left: 100, right: 100 }\n        }, { osmUserHistory: true });\n    } catch (e) {\n      this.handleMoveEnd({ osmUserHistory: true });\n    }\n  }\n\n  updateCurrentCholopleth(cholopleth, choloplethMode, currentIndividual) {\n\n    // turning on and off \n    let choloplethVisibility = cholopleth ? 'visible' : 'none';\n\n    this.map.setLayoutProperty(\"world-map-layer\", 'visibility', choloplethVisibility);\n    this.map.setLayoutProperty(\"world-map-line-layer\", 'visibility', choloplethVisibility);\n\n    let currentCountryJSON = null;\n\n    if (!_.isNull(currentIndividual)) {\n      // debugger;\n      currentCountryJSON = currentIndividual;\n\n    } else if (choloplethMode === \"all\") {\n\n      currentCountryJSON = { \n        country_counts: country_analysis_all \n      };\n\n    } else if (choloplethMode === \"top20\"){\n      \n      currentCountryJSON = {\n        country_counts: country_analysis_top_20\n      };\n\n    } else { // top5\n      \n      currentCountryJSON = {\n        country_counts: country_analysis_top_5\n      };\n\n    }\n\n    if (!_.isNull(currentCountryJSON) && cholopleth) {\n      this.updateCurrentCountryJSON(currentCountryJSON);\n    }\n\n  }\n\n  updateCurrentCountryJSON(currentCountryJSON) {\n    var expression = [\"match\", [\"get\", \"py_id\"]];\n\n    let colorScale = d3.scaleLinear()\n      .domain([1184972887,\n        1346511620,\n        1360958163,\n        1378200802,\n        1395305792,\n        1438380051,\n        1479834657,\n        1502367226,\n        1510168743,\n        1516131630])\n      .range([\"#ffffcc\",\n        \"#d6efc2\",\n        \"#acdeb7\",\n        \"#81ceba\",\n        \"#56bec1\",\n        \"#3caac2\",\n        \"#3391bc\",\n        \"#2b77b4\",\n        \"#2855a4\",\n        \"#253494\"])\n\n    var extent = [0, d3.max(currentCountryJSON.country_counts, cc => {\n      return cc.count;\n    })];\n\n\n    var finalDomain = [extent[0],\n    extent[0] + (extent[1] - extent[0]) / 9 * 1,\n    extent[0] + (extent[1] - extent[0]) / 9 * 2,\n    extent[0] + (extent[1] - extent[0]) / 9 * 3,\n    extent[0] + (extent[1] - extent[0]) / 9 * 4,\n    extent[0] + (extent[1] - extent[0]) / 9 * 5,\n    extent[0] + (extent[1] - extent[0]) / 9 * 6,\n    extent[0] + (extent[1] - extent[0]) / 9 * 7,\n    extent[0] + (extent[1] - extent[0]) / 9 * 8,\n    extent[0] + (extent[1] - extent[0]) / 9 * 9];\n\n\n    colorScale.domain(finalDomain);\n\n    _.each(currentCountryJSON.country_counts, cc => {\n\n      expression.push(cc.world_id, colorScale(cc.count));\n    });\n\n\n    expression.push(\"#ffffcc\");\n\n    this.map.setPaintProperty(\"world-map-layer\", \"fill-color\", expression);\n  }\n\n  updateCurrentFeature(currentFeature) {\n\n      let feature4326 = toWgs84(currentFeature.feature, proj4('EPSG:3857'));\n\n\n      if (_.isUndefined(this.map.getSource('currentFeature'))) {\n        this.map.addSource('currentFeature', {\n          type: 'geojson',\n          data: feature4326\n        });\n        this.map.addLayer({\n          \"id\": \"currentFeature-point\",\n          \"type\": \"circle\",\n          \"source\": \"currentFeature\",\n          \"paint\": {\n            \"circle-radius\": 10,\n            \"circle-opacity\": 0.7,\n            \"circle-color\": \"#FF0000\"\n          },\n          filter: [\"==\", \"$type\", \"Point\"]\n        }, 'place-city-sm');\n        this.map.addLayer({\n          \"id\": \"currentFeature-line\",\n          \"type\": \"line\",\n          \"source\": \"currentFeature\",\n          \"paint\": {\n            \"line-opacity\": 0.7,\n            \"line-width\": 1,\n            \"line-color\": \"#FF0000\"\n          },\n          filter: [\"in\", \"$type\", \"LineString\", \"Polygon\"]\n        }, 'place-city-sm');\n\n\n      } else {\n\n        this.map.getSource('currentFeature').setData(feature4326);\n      }\n      \n\n      if (feature4326.features[0].geometry.type === \"Point\") {\n        this.map.flyTo({\n          center: feature4326.features[0].geometry.coordinates,\n          zoom: randomBetween(12, 14)\n        }, { zoomInData: true });\n\n      } else {\n       \n        let bbox = turf.bbox(feature4326);\n        let buffered = turf.buffer(turf.bboxPolygon(bbox), 1, \"miles\");\n        let finalBbox = turf.bbox(buffered)\n\n        try {\n\n          this.map.fitBounds([[finalBbox[0], finalBbox[1]],\n          [finalBbox[2], finalBbox[3]]], {\n              padding: { top: 100, bottom: 100, left: 100, right: 100 }\n            }, { zoomInData: true });\n        } catch (e) {\n          this.handleMoveEnd({ zoomInData: true });\n        }\n      }\n\n  }\n\n  handleMoveEnd(e){\n    // console.log(e);\n    \n    if (e.osmUserHistory) {\n      _.delay(() => {\n        try {\n          let nextNum = (this.props.osmUserHistoriesIdx + 1) % this.props.osmUserHistories.length;\n          this.props.dispatch(changeOsmUserHistoriesIdx(nextNum));    \n        } catch(e){\n\n        }\n        \n      }, 4000);\n\n    }\n    \n  }\n\n\n  render() {\n    let { windowHeight } = this.props;\n    return (\n      <div ref={ c => { this.refsMapContainer = c; }} className=\"map-container\" style={{height: windowHeight}}>\n      </div>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n\n  return {\n    windowWidth: state.windowWidth,\n    windowHeight: state.windowHeight,\n    nkTile: state.nkTile,\n    cholopleth: state.cholopleth,\n    zoom: state.zoom,\n    center: state.center,\n    currentSeq: state.currentSeq,\n    currentFeature: state.currentFeature,\n    currentTimeStamp: state.currentTimeStamp,\n    currentIndividual: state.currentIndividual,\n    choloplethMode: state.choloplethMode,\n    selectedOsmUserResponse: state.selectedOsmUserResponse,\n    osmUserHistories: state.osmUserHistories,\n    osmUserHistoriesIdx: state.osmUserHistoriesIdx\n  }\n}\n\nexport default connect(mapStateToProps)(MapContainer);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { changeMapLoaded } from '../actions';\nimport turf from 'turf';\nimport { toWgs84 }  from 'reproject';\nimport proj4 from 'proj4';\nimport _ from 'lodash';\n\nvar isFirstTransition = false;\nclass PageMapContainer extends Component {\n\n  componentDidMount() {\n    window.mapboxgl.accessToken = 'pk.eyJ1Ijoic2Vuc2VhYmxlIiwiYSI6ImxSNC1wc28ifQ.hst-boAjFCngpjzrbXrShw';\n\n    this.map = new window.mapboxgl.Map({\n      container: this.refsPageMapContainer,\n      style: 'mapbox://styles/senseable/cjnr299am1ljs2spk9a4t2sdz',\n      zoom: 7.133251225192166,\n      // minZoom: ,\n      center: [129.39850149741085, 40.36695472501947],\n      interactive: false\n    });\n\n\n    window.map = this.map;\n    this.map.on('style.load', this.handleStyleLoad.bind(this));\n  }\n  \n  handleStyleLoad(e){\n    this.props.dispatch(changeMapLoaded(true));\n\n    this.map.addSource('currentFeature-bbox', {\n      type: 'geojson',\n      data: {\n        type: 'Feature',\n        coordinates: [[[-67.13734351262877, 45.137451890638886],\n                       [-66.96466, 44.8097],\n                       [-67.13734351262877, 45.137451890638886]]]\n      }\n    });\n\n    this.map.addSource('nk-line', {\n      type: 'vector',\n      tiles: ['http://rc.libremaps.net:3005/services/vector-tiles/nk_osm_line/{z}/{x}/{y}.pbf']\n    })\n\n    this.map.addSource('nk-polygon', {\n      type: 'vector',\n      tiles: ['http://rc.libremaps.net:3005/services/vector-tiles/nk_osm_polygon/{z}/{x}/{y}.pbf']\n    })\n  \n    this.map.addSource('nk-point', {\n      type: 'vector',\n      tiles: ['http://rc.libremaps.net:3005/services/vector-tiles/nk_osm_point/{z}/{x}/{y}.pbf;']\n    })\n\n    this.map.addLayer({\n      id: 'currentFeature-bbox-layer',\n      source: 'currentFeature-bbox',\n      type: 'fill',\n      paint: {\n        'fill-color': '#FF0000',\n        'fill-opacity': 0.3\n      }\n    });\n\n    this.map.addLayer({\n      \"id\": \"nk-line-layer\",\n      \"source\": \"nk-line\",\n      \"source-layer\": \"nk_osm_line_4326\",\n      \"type\": \"line\",\n      \"paint\": {\n        'line-opacity': 0.25,\n        'line-color':  {\n          property: 't',\n          stops: [\n            [1184972887, \"#ffffcc\"],\n            [1346511620, \"#d6efc2\"],\n            [1360958163, \"#acdeb7\"],\n            [1378200802, \"#81ceba\"],\n            [1395305792, \"#56bec1\"],\n            [1438380051, \"#3caac2\"],\n            [1479834657, \"#3391bc\"],\n            [1502367226, \"#2b77b4\"],\n            [1510168743, \"#2855a4\"],\n            [1516131630, \"#253494\"]\n          ]\n        }\n      },\n      \"filter\": [\"<\", 't', 1384972887]\n    }, 'place-city-sm');\n\n    this.map.addLayer({\n      \"id\": \"nk-polygon-layer\",\n      \"source\": \"nk-polygon\",\n      \"source-layer\": \"nk_osm_polygon_4326\",\n      \"type\": \"fill\",\n      \"paint\": {\n        'fill-opacity': 0.5,\n        'fill-color':  {\n          property: 't',\n          stops: [\n            [1184972887, \"#ffffcc\"],\n            [1346511620, \"#d6efc2\"],\n            [1360958163, \"#acdeb7\"],\n            [1378200802, \"#81ceba\"],\n            [1395305792, \"#56bec1\"],\n            [1438380051, \"#3caac2\"],\n            [1479834657, \"#3391bc\"],\n            [1502367226, \"#2b77b4\"],\n            [1510168743, \"#2855a4\"],\n            [1516131630, \"#253494\"]\n          ]\n        }\n      },\n      \"filter\": [\"<\", 't', 1384972887]\n    }, 'place-city-sm');\n\n    this.map.addLayer({\n      \"id\": \"nk-point-layer\",\n      \"source\": \"nk-point\",\n      \"source-layer\": \"nk_osm_point_4326\",\n      \"type\": \"circle\",\n      \"paint\": {\n        'circle-radius': 2,\n        'circle-color':  {\n          property: 't',\n          stops: [\n            [1184972887, \"#ffffcc\"],\n            [1346511620, \"#d6efc2\"],\n            [1360958163, \"#acdeb7\"],\n            [1378200802, \"#81ceba\"],\n            [1395305792, \"#56bec1\"],\n            [1438380051, \"#3caac2\"],\n            [1479834657, \"#3391bc\"],\n            [1502367226, \"#2b77b4\"],\n            [1510168743, \"#2855a4\"],\n            [1516131630, \"#253494\"]\n          ]\n        }\n      },\n      \"filter\": [\"<\", 't', 1384972887]\n    }, 'place-city-sm');\n\n\n  }\n\n  componentWillReceiveProps(newProps) {\n\n\n\n    let { currentFeature, currentTimeStamp, currentSeq } = newProps;\n   \n    if (!_.isNull(currentFeature)){\n      \n      if (currentSeq !== this.props.currentSeq) {\n         console.log(currentFeature, \"newProps.currentseq: \", currentSeq, \"this.props.currentSeq:\", this.props.currentSeq);\n        console.log(\"will do transition\");\n        this.updateCurrentFeature(currentFeature);\n      } else if (isFirstTransition) {\n        isFirstTransition = false;\n         console.log(currentFeature, \"newProps.currentseq: \", currentSeq, \"this.props.currentSeq:\", this.props.currentSeq);\n\n        console.log(\"will do transition but it's first\");\n        this.updateCurrentFeature(currentFeature);\n      } else {\n        console.log(\"will not\");\n\n      }\n    } \n    if (currentTimeStamp !== this.props.currentTimeStamp) {\n      this.map.setFilter('nk-line-layer', [\"<\", \"t\", currentTimeStamp]);\n      this.map.setFilter('nk-polygon-layer', [\"<\", \"t\", currentTimeStamp]);\n      this.map.setFilter('nk-point-layer', [\"<\", \"t\", currentTimeStamp]);  \n    }\n  }\n\n  componentWillUnmount(){\n\n  }\n\n  componentDidUpdate(){\n    this.map.resize();\n\n  }\n\n  updateCurrentFeature(currentFeature) {\n\n    let feature4326 = toWgs84(currentFeature.feature, proj4('EPSG:3857'));\n\n    \n    let bbox = turf.bbox(feature4326);\n    let buffered = turf.buffer(turf.bboxPolygon(bbox), 25, \"miles\");\n\n    this.map.getSource('currentFeature-bbox').setData(buffered);\n\n  }\n  render() {\n    let { windowHeight } = this.props;\n    return (\n      <div ref={ c => { this.refsPageMapContainer = c; }} className=\"map-container\" style={{height: windowHeight }}>\n      </div>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    windowWidth: state.windowWidth,\n    windowHeight: state.windowHeight,\n    currentSeq: state.currentSeq,\n    currentFeature: state.currentFeature,\n    currentTimeStamp: state.currentTimeStamp\n  }\n}\n\nexport default connect(mapStateToProps)(PageMapContainer);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport moment from 'moment';\n\nconst Fragment = React.Fragment;\n\nclass ContributorInfo extends Component {\n  render() {\n    let { currentFeature } = this.props;\n\n    return (\n      <Fragment>\n        <div className=\"contributor-info left\">\n          <div className=\"name\">\n            { currentFeature.osm_user.osm_user }\n          </div>\n        </div>\n\n        <div className=\"contributor-info center\">\n          <div className=\"time\">\n            { //moment(currentFeature.osm_timestamp * 1000).format(\"YYYY MM DD\") }\n              moment.unix(currentFeature.osm_timestamp).format(\"MMMM DD, YYYY\")\n            }\n          </div>\n        </div>\n\n\n        <div className=\"contributor-info right\">\n          <div className=\"rank\">\n            { currentFeature.osm_user.rank } of 887\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    currentFeature: state.currentFeature\n  }\n}\n\n\n\nexport default connect(mapStateToProps)(ContributorInfo);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\nclass CenterMarker extends Component {\n  render() {\n    let { currentFeature } = this.props;\n\n    return (\n      <div className=\"center-marker\">\n        {\n          currentFeature.name\n        }\n      </div>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    currentFeature: state.currentFeature\n  }\n}\n\nexport default connect(mapStateToProps)(CenterMarker);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport _ from 'lodash';\nimport { numberWithDelimiter } from '../utils';\nimport { ContDistribution, ChoroplethMap } from './'\nimport worldData from '../constants/world_data.json';\n\n\nclass MessageContributorInfo extends Component {\n  getTopThreeCountries(countryCounts){\n    // countryCounts\n    let sortedCounts = _.sortBy(countryCounts, cc => { return cc.count }).reverse();\n    let splicedCounts = _.filter(sortedCounts, sc => { return sc.count > 0; }).splice(0, 5);\n\n    _.each(splicedCounts, (sp, i) => {\n      splicedCounts[i].nameKo = _.find(worldData, wd => { return wd.id === sp.world_id; }).name_ko;\n      splicedCounts[i].nameEn = _.find(worldData, wd => { return wd.id === sp.world_id; }).name_en;\n    })\n    return splicedCounts;\n\n  }\n  render() {\n\n\n    let { currentFeature } = this.props;\n    let countryCounts = currentFeature.osm_user.country_counts;\n    let topThreeCountries = this.getTopThreeCountries(countryCounts);\n\n    return (\n      <div className=\"msg-contributor-info\">\n        <div className=\"name-rank-area\">\n          <div className=\"lv\">\n            <div className=\"label\">\n              지도 기여자\n            </div>\n            <div className=\"value\">\n              { currentFeature.osm_user.osm_user }\n            </div>\n          </div>\n          <div className=\"lv\">\n            <div className=\"label\">\n              순위\n            </div>\n            <div className=\"value\">\n              { currentFeature.osm_user.rank } of 889\n            </div>\n          </div>\n        </div>\n\n        <div className=\"name-rank-area\">\n          <div className=\"lv\">\n            <ContDistribution width={250} height={200} allCount={currentFeature.osm_user.all_count} />\n          </div>\n          <div className=\"lv\">\n            <div className=\"label\">\n              오픈스트리트맵 총 기여셋 횟수*\n            </div>\n            <div className=\"value\">\n              { numberWithDelimiter(currentFeature.osm_user.total_contribution_count) }\n            </div>\n            <div className=\"l-apple-box\">\n            </div>\n            <div className=\"label\">\n              북한 지도 기여 횟수\n            </div>\n            <div className=\"value\">\n              { numberWithDelimiter(currentFeature.osm_user.all_count) }\n            </div>\n            <div className=\"disclaimer\">\n              * 오픈스트리트맵은 여러 개의 지물을 고쳐 하나의 체인지세트(changeset) 단위로 업로드하는데, 총 기여세트 횟수는 이 체인지세트의 개수를 나타냅니다. 실제로 북한 지도에 기여된 지물의 개수보다 적게 나오기도 하는 이유가 됩니다. \n            </div>\n\n          </div>\n        </div>\n\n        <div className=\"changeset-area\">\n          <div className=\"title-area\">\n            <div className=\"label\">\n              지도 기여자의 과거 기여셋 이력 비교\n            </div>\n            <div className=\"value\">\n              {\n                _.map(topThreeCountries, (c, i) => { \n                  return( \n                    <span key={i}>\n                      { `${c.nameKo}${i === topThreeCountries.length - 1 ? \"\" : \", \"}` } \n                    </span>\n                  );\n                })\n              }\n            </div>\n\n          </div>\n\n          <div className=\"choromap-container\">\n            <ChoroplethMap />\n          </div>\n\n        </div>\n\n      </div>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    currentFeature: state.currentFeature\n  }\n}\n\n\n\nexport default connect(mapStateToProps)(MessageContributorInfo);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport * as d3 from 'd3';\nimport { numberWithDelimiter } from '../utils';\nimport _ from 'lodash';\n\nconst HIST = [{\"key\":0,\"value\":0},{\"key\":756.82,\"value\":854.0},{\"key\":2268.46,\"value\":17.0},{\"key\":3780.1000000000004,\"value\":4.0},{\"key\":5291.740000000001,\"value\":4.0},{\"key\":6803.38,\"value\":0.0},{\"key\":8315.02,\"value\":1.0},{\"key\":9826.66,\"value\":1.0},{\"key\":11338.300000000001,\"value\":2.0},{\"key\":12849.94,\"value\":0.0},{\"key\":14361.580000000002,\"value\":1.0},{\"key\":15873.220000000001,\"value\":0.0},{\"key\":17384.86,\"value\":0.0},{\"key\":18896.5,\"value\":0.0},{\"key\":20408.140000000003,\"value\":0.0},{\"key\":21919.780000000002,\"value\":0.0},{\"key\":23431.420000000002,\"value\":0.0},{\"key\":24943.06,\"value\":1.0},{\"key\":26454.7,\"value\":0.0},{\"key\":27966.34,\"value\":0.0},{\"key\":29477.980000000003,\"value\":0.0},{\"key\":30989.620000000003,\"value\":0.0},{\"key\":32501.260000000002,\"value\":1.0},{\"key\":34012.9,\"value\":0.0},{\"key\":35524.54,\"value\":0.0},{\"key\":37036.18,\"value\":0.0},{\"key\":38547.82,\"value\":0.0},{\"key\":40059.46,\"value\":0.0},{\"key\":41571.100000000006,\"value\":0.0},{\"key\":43082.740000000005,\"value\":0.0},{\"key\":44594.380000000005,\"value\":0.0},{\"key\":46106.020000000004,\"value\":0.0},{\"key\":47617.66,\"value\":0.0},{\"key\":49129.3,\"value\":0.0},{\"key\":50640.94,\"value\":0.0},{\"key\":52152.58,\"value\":0.0},{\"key\":53664.22,\"value\":0.0},{\"key\":55175.86,\"value\":0.0},{\"key\":56687.50000000001,\"value\":0.0},{\"key\":58199.14000000001,\"value\":0.0},{\"key\":59710.780000000006,\"value\":0.0},{\"key\":61222.420000000006,\"value\":0.0},{\"key\":62734.060000000005,\"value\":0.0},{\"key\":64245.700000000004,\"value\":0.0},{\"key\":65757.34000000001,\"value\":0.0},{\"key\":67268.98000000001,\"value\":0.0},{\"key\":68780.62000000001,\"value\":0.0},{\"key\":70292.26000000001,\"value\":0.0},{\"key\":71803.90000000001,\"value\":0.0},{\"key\":73315.54000000001,\"value\":0.0},{\"key\":74827.18000000001,\"value\":1.0}];\n\n\nclass ContDistribution extends Component {\n  componentDidMount(){\n    this.d3Render(this.props);\n  }\n\n  componentWillReceiveProps(newProps){\n    this.d3Render(newProps);\n  }\n\n  d3Render(props){\n      // HIST.push({key: _.last(HIST).key + 0, value: 0});\n      \n      let xDomain = [_.first(HIST).key, _.last(HIST).key];\n      let yDomain = [0, d3.max(HIST, h => { return h.value })];\n      // HIST.unshift({key: 0, value: 0});\n\n      this.xScale = d3.scaleLinear()\n        .domain(xDomain)\n        .range([30, props.width - 30]);\n\n      this.yScale = d3.scaleLinear()\n        .domain(yDomain)\n        .clamp(true)\n        .range([props.height - 30, 50]);\n\n\n      var svg = d3.select(this.svgContainer);\n      svg.selectAll(\"*\").remove();\n\n      let lineDraw = d3.line()\n        // .curve(d3.curveCardinal)\n        .x(d => {\n          return this.xScale(d.key)\n        })\n        .y(d => {\n          return this.yScale(d.value)\n        });\n\n\n\n\n      svg.append(\"path\")\n        .data([HIST])\n        .attr(\"class\", \"line\")\n        .attr(\"fill\", \"#ECF7FA\")\n        .attr(\"stroke\", \"#727272\")\n        .attr(\"stroke-width\", 1)\n        .attr(\"d\", lineDraw);\n\n\n      var xAxis = svg.append(\"g\")\n        .attr(\"transform\", `translate(0, ${props.height - 10})`);\n\n      xAxis.append(\"line\")\n        .attr(\"stroke\", \"#727272\")\n        .attr(\"stroke-width\", 0.5)\n        .attr(\"x1\", 0)\n        .attr(\"y1\", -19)\n        .attr(\"x2\", props.width)\n        .attr(\"y2\", -19)\n\n      \n      xAxis.selectAll(\"text\")\n          .data([0, 10000, 30000, 50000, 70000])\n        .enter().append(\"text\")\n          .attr(\"fill\", \"#AAAAAA\")\n          .style(\"font-size\", \"0.6em\")\n          .attr(\"text-anchor\", d => { return d === 60 ? \"end\" : \"middle\" })\n          .attr(\"x\", d => { return this.xScale(d) })\n          .attr(\"y\", -2)\n          .text(d => { return d === 0.0 ? \"0\" : `${numberWithDelimiter(d / 1000)}K` });\n\n      xAxis.selectAll(\"text\")\n          .data(HIST)\n        .enter().append(\"text\")\n\n\n\n\n        svg.append(\"line\")\n          .attr(\"stroke\", \"black\")\n          .attr(\"stroke-width\", 2)\n          .attr(\"x1\", this.xScale(props.allCount))\n          .attr(\"y1\", 15)\n          .attr(\"x2\", this.xScale(props.allCount))\n          .attr(\"y2\", props.height - 25)\n\n    \n      \n      // svg.append(\"text\")\n      //     .attr(\"fill\", \"#AAAAAA\")\n      //     .attr(\"x\", 0)\n      //     .attr(\"y\", this.yScale(yDomain[0]) - 5)\n      //     .text(yDomain[0]);\n\n      // svg.append(\"text\")\n      //     .attr(\"fill\", \"#AAAAAA\")\n      //     .attr(\"x\", 0)\n      //     .attr(\"y\", this.yScale(yDomain[1]) + 5)\n      //     .text( numberWithDelimiter(yDomain[1]) );\n\n\n\n    \n  }\n\n  render() {\n    return (\n      <svg className={`distribution-index${this.props.className}`} style={{ width: this.props.width, height: this.props.height }}>\n        <g ref={ c => { this.svgContainer = c; } }>\n        </g>\n        { this.props.children }\n      </svg>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n\n  }\n};\n\nexport default connect(mapStateToProps)(ContDistribution);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { numberWithDelimiter } from '../utils';\nimport * as d3 from 'd3';\nimport _ from 'lodash';\n\nconst Fragment = React.Fragment;\nclass MapContainer extends Component {\n\n  componentDidMount() {\n    window.mapboxgl.accessToken = 'pk.eyJ1Ijoic2Vuc2VhYmxlIiwiYSI6ImxSNC1wc28ifQ.hst-boAjFCngpjzrbXrShw';\n\n    this.map = new window.mapboxgl.Map({\n      container: this.refsMapContainer,\n      style: 'mapbox://styles/senseable/cjnr299am1ljs2spk9a4t2sdz',\n      zoom: 0.3431335719213704,\n      center: [9.629819343809345, 30.34808136525487],\n      interactive: false\n    });\n    // window.map = this.map;\n    this.map.on('style.load', this.handleStyleLoad.bind(this));\n    this.map.on('moveend', this.handleMoveEnd.bind(this));\n  }\n  \n  handleStyleLoad(e){\n    this.map.addSource(\"world-map-source\", {\n      type: 'vector',\n      url: 'mapbox://senseable.8x6k6499'\n    });\n\n   this.map.addLayer({\n      \"id\": \"world-map-layer\",\n      \"source\": \"world-map-source\",\n      \"source-layer\": \"world_assoc-c3znvj\",\n      \"type\": \"fill\",\n      \"paint\": {\n        'fill-opacity': 0.7,\n        'fill-color': '#FFFFFF'\n      }\n    }, 'waterway-label');\n\n   this.map.addLayer({\n      \"id\": \"world-map-line-layer\",\n      \"source\": \"world-map-source\",\n      \"source-layer\": \"world_assoc-c3znvj\",\n      \"type\": \"line\",\n      \"paint\": {\n        'line-opacity': 0.2,\n        'line-color': '#BBB',\n        'line-width': 1\n      }\n    }, 'waterway-label');\n\n\n  }\n\n  componentWillReceiveProps(newProps) {\n    let { currentFeature } = newProps;\n\n    if (!_.isNull(currentFeature)){\n\n      if (_.isNull(this.props.currentFeature)) {\n        this.updateCurrentFeature(currentFeature);\n      } else if (currentFeature.osm_id !== this.props.currentFeature.osm_id) {\n        this.updateCurrentFeature(currentFeature);\n      }\n    }\n    \n  }\n\n  updateCurrentFeature(currentFeature){\n\n    var expression = [\"match\", [\"get\", \"py_id\"]];\n\n    // Calculate color for each state based on the unemployment rate\n    \n    let colorScale = d3.scaleLinear()\n      .domain([1184972887, \n               1346511620, \n               1360958163, \n               1378200802, \n               1395305792, \n               1438380051, \n               1479834657, \n               1502367226, \n               1510168743, \n               1516131630])\n      .range([\"#ffffcc\",\n              \"#d6efc2\",\n              \"#acdeb7\",\n              \"#81ceba\",\n              \"#56bec1\",\n              \"#3caac2\",\n              \"#3391bc\",\n              \"#2b77b4\",\n              \"#2855a4\",\n              \"#253494\"])\n\n    var extent = d3.extent(currentFeature.osm_user.country_counts, cc => {\n      return cc.count;\n    })\n\n\n    var finalDomain = [extent[0], \n                       extent[0] + (extent[1] - extent[0]) / 9 * 1,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 2,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 3,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 4,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 5,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 6,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 7,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 8,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 9];\n\n\n    colorScale.domain(finalDomain);\n\n    _.each(currentFeature.osm_user.country_counts, cc => {\n\n      expression.push(cc.world_id, colorScale(cc.count));\n    });\n\n\n    expression.push(\"rgba(0,0,0,0)\");\n\n    this.map.setPaintProperty(\"world-map-layer\", \"fill-color\", expression);\n\n  }\n\n  componentDidUpdate(){\n    this.map.resize();\n  }\n\n\n  handleMoveEnd(e){\n\n    \n  }\n\n\n  render() {\n    let { currentFeature } = this.props;\n    let colorScale = d3.scaleLinear()\n      .range([\"#ffffcc\",\n              \"#d6efc2\",\n              \"#acdeb7\",\n              \"#81ceba\",\n              \"#56bec1\",\n              \"#3caac2\",\n              \"#3391bc\",\n              \"#2b77b4\",\n              \"#2855a4\",\n              \"#253494\"])\n\n    var extent = d3.extent(currentFeature.osm_user.country_counts, cc => {\n      return cc.count;\n    })\n\n    var finalDomain = [extent[0], \n                       extent[0] + (extent[1] - extent[0]) / 9 * 1,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 2,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 3,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 4,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 5,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 6,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 7,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 8,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 9];\n\n\n    colorScale.domain(finalDomain);\n\n    return (\n      <Fragment>\n        <div ref={ c => { this.refsMapContainer = c; }} className=\"map-container-choropleth\" style={{width: \"100%\", height: 500}}>\n        </div>\n        \n        <div className=\"sub-legend\">\n          <div className=\"title\">\n            기여 횟수\n          </div>\n          {\n            _.map(finalDomain, (val, i) => {\n              if (_.isUndefined(val)) {\n                return null;\n              } else {\n                return (\n                  <div key={i} className=\"legend-sub-area\">\n                    <div className=\"color-box\" style={{ backgroundColor: colorScale(val) }}>\n                    </div>\n                    <div className=\"value\">\n                      { numberWithDelimiter(Number(val.toFixed(0))) }\n                    </div>\n                  </div>\n                ); \n              }\n\n              \n            })\n          }\n        </div>\n\n      </Fragment>\n\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    currentSeq: state.currentSeq,\n    currentFeature: state.currentFeature,\n    currentTimeStamp: state.currentTimeStamp\n  }\n}\n\nexport default connect(mapStateToProps)(MapContainer);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport moment from 'moment';\nimport * as d3 from 'd3';\nimport _ from 'lodash';\n\nclass YearLegend extends Component {\n\n  render() {\n    let { legend } = this.props;\n    let domain = [1184972887, \n              1346511620, \n              1360958163, \n              1378200802, \n              1395305792, \n              1438380051, \n              1479834657, \n              1502367226, \n              1510168743, \n              1516131630]\n    let yearScale = d3.scaleLinear()\n      .domain(domain)\n      .range([\"#ffffcc\",\n                \"#d6efc2\",\n                \"#acdeb7\",\n                \"#81ceba\",\n                \"#56bec1\",\n                \"#3caac2\",\n                \"#3391bc\",\n                \"#2b77b4\",\n                \"#2855a4\",\n                \"#253494\"]);\n\n    return (\n      <div className=\"year-legend\" style={{ opacity: legend ? 1 : 0 }}>\n        <div className=\"title\">\n          Date of Contribution\n        </div>\n        {\n          _.map(domain, (val, i) => {\n            if (_.isUndefined(val)) {\n              return null;\n            } else {\n              return (\n                <div key={i} className=\"legend-sub-area\">\n                  <div className=\"color-box\" style={{ backgroundColor: yearScale(val) }}>\n                  </div>\n                  <div className=\"value\">\n                    { moment.unix(val).format(\"YYYY MMM\") }\n                    {\n                      !(i + 1 > domain.length - 1) ? \n                      `-${moment.unix(domain[i + 1]).format(\"YYYY MMM\")}` :\n                      \"-\"\n                    }\n                  </div>\n                </div>\n              ); \n            }\n\n            \n          })\n        }\n      </div>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    legend: state.legend\n  }\n}\n\n\nexport default connect(mapStateToProps)(YearLegend);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport moment from 'moment';\n\nconst Fragment = React.Fragment;\n\nclass MessageTopInfo extends Component {\n  render() {\n    let { currentFeature } = this.props;\n    return (\n      <Fragment>\n        <div className=\"contributor-info center\">\n          <div className=\"time\">\n            { //moment(currentFeature.osm_timestamp * 1000).format(\"YYYY MM DD\") }\n              moment.unix(currentFeature.osm_timestamp).format(\"MMMM DD, YYYY\")\n            }\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    currentFeature: state.currentFeature\n  }\n}\n\n\n\nexport default connect(mapStateToProps)(MessageTopInfo);\n","const TITLE_TYPE = `\n  font-family: 'Alfa Slab One', cursive;\n  font-size: 1em;\n  line-height: 1.2em;\n  font-style: normal;\n  font-weight: 400;\n  text-rendering: optimizeLegibility;\n`;\n\nconst REGULAR_TYPE = `\n  font-family: 'Caponi Text', 'Noto Serif KR', serif;\n  font-size: 1em;\n  line-height: 1.6em;\n  font-style: normal;\n  font-weight: 400;\n  text-rendering: optimizeLegibility;\n`;\n\nconst BOLD_TYPE = `\n  font-family: 'Caponi Text', 'Noto Serif KR', serif;\n  font-size: 1em;\n  line-height: 1.6em;\n  font-style: normal;\n  font-weight: 400;\n  text-rendering: optimizeLegibility;\n`;\n\nconst LABEL_BOLD_TYPE = `\n  font-family: 'Roboto', sans-serif;\n  font-size: 1em;\n  line-height: 1.6em;\n  font-style: normal;\n  font-weight: 700;\n  text-rendering: optimizeLegibility;\n`;\n\nconst LABEL_REGULAR_TYPE = `\n  font-family: 'Roboto', sans-serif;\n  font-size: 1em;\n  line-height: 1.6em;\n  font-style: normal;\n  font-weight: 400;\n  text-rendering: optimizeLegibility;\n`;\n\nconst LABEL_ITALIC_TYPE = `\n  font-family: 'Roboto', sans-serif;\n  font-size: 1em;\n  line-height: 1.6em;\n  font-style: normal;\n  font-weight: 400;\n  text-rendering: optimizeLegibility;\n`;\n\nconst ABSOLUTE_MIDDLE = `\n  transform: translate(0, -50%);\n`;\n\nconst ABSOLUTE_CENTER = `\n  transform: translate(-50%, 0);\n`;\n\nconst ABSOLUTE_CENTER_MIDDLE = `\n  transform: translate(-50%, -50%);\n`;\n\nexport default {\n  REGULAR_TYPE,\n  TITLE_TYPE,\n  BOLD_TYPE,\n  LABEL_BOLD_TYPE,\n  LABEL_REGULAR_TYPE,\n  LABEL_ITALIC_TYPE,\n  ABSOLUTE_CENTER,\n  ABSOLUTE_CENTER_MIDDLE,\n  ABSOLUTE_MIDDLE\n};","import styled from 'styled-components';\nimport mixins from './mixins';\n\nconst SectionContainer = styled.section`\n  width: 100%;\n  position: relative;\n`;\n\nconst Gutter = styled.div`\n  height: ${props => props.h}px;\n`;\n\nconst Sticky = styled.div`\n  position:sticky;\n  top: 10px;\n  height:auto;\n`;\n\nconst NonSticky = styled.div`\n  width: 400px;\n  position:relative;\n  margin: 0 auto;\n  z-index:5;\n  ${mixins.BOLD_TYPE}\n  font-size:1.2em;\n  line-height:1.4;\n  border: 1px solid #BBB;\n  padding: 10px 15px;\n  background: #E7F7FB;\n  color: black;\n`;\n\n\nconst Box = styled.div`\n  /* ${mixins.ABSOLUTE_CENTER} */\n  /* position: absolute; */\n  /* left: 50%; */\n  /* top: 0; */\n  width: 450px;\n  margin: 0 auto;\n  height: auto;\n  \n  ${mixins.BOLD_TYPE}\n  font-size:1.2em;\n  border: 1px solid #BBB;\n  padding: 10px 15px;\n  background: #E7F7FB;\n  color: black;\n`;\n\nexport {\n  SectionContainer,\n  Box,\n  Sticky,\n  NonSticky,\n  Gutter\n};","import React, { Component } from 'react'\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport mixins from '../stylesheets/mixins';\nimport {SectionContainer } from '../stylesheets/components';\nimport moment from 'moment';\nimport _ from 'lodash';\n\nconst InterestingPOIsContainer = styled(SectionContainer)`\n  margin: 100px 0;\n`;\n\nconst POIBox = styled.div`\n  position: absolute;\n  left: 50%;\n  ${mixins.ABSOLUTE_CENTER}\n  top: 20px;\n  ${mixins.BOLD_TYPE}\n  font-size:1.2em;\n  border: 1px solid #BBB;\n  padding: 10px 15px;\n  background: white;\n  color: black;\n  display:flex;\n  justify-content: space-between;\n  width: 400px;\n`;\n\nconst TitleArea = styled.div`\n  width:200px;\n`;\n\nconst Label = styled.h4`\n  ${mixins.LABEL_BOLD_TYPE}\n  font-size:0.65em;\n  color:#777;\n  margin-bottom: 5px;\n`;\n\nconst Value = styled.div`\n  font-size: 0.9em;\n  color: black;\n  padding-right: 10px;\n`;\n\nconst Date = styled.div `\n  ${mixins.LABEL_REGULAR_TYPE}\n  font-size:0.6em;\n  color: #AAA;\n`;\n\nconst Disclaimer = styled.div `\n  ${mixins.LABEL_ITALIC_TYPE}\n  font-size:0.5em;\n  color: #AAA;\n`;\n\nclass InterestingPOIs extends Component {\n\n\n  render() {\n    let name = _.isUndefined(this.props.name_en) ? this.props.name : this.props.name_en;\n    \n    return (\n      <InterestingPOIsContainer className=\"trigger\" data-action-name=\"changeInterestingPOIs\" data-poi-id={this.props.op} style={{ height: this.props.windowHeight}}>\n        <POIBox>\n          <TitleArea>\n            <Label>\n              Name\n            </Label>\n            <Value>\n              {name }\n            </Value>\n          </TitleArea>\n          <TitleArea>\n            <Label>\n              Contributor\n            </Label>\n            <Value>\n              P{this.props.osm_user.id}*\n            </Value>\n            <Date>\n              {moment.unix(this.props.osm_timestamp).format(\"MMMM DD, YYYY\")}\n            </Date>\n            <Disclaimer>\n              * Names have been anonymized for privacy\n            </Disclaimer>\n          </TitleArea>\n        </POIBox>\n      </InterestingPOIsContainer>\n    )\n  }\n}\n\nlet mapStateToProps = state => {\n    return state;\n};\n\nexport default connect(mapStateToProps)(InterestingPOIs);","import React, { Component } from 'react'\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport mixins from '../stylesheets/mixins';\n\nconst HeaderContainer = styled.div`\n  position: fixed;\n  left: 10px;\n  top: 10px;\n  z-index: 5;\n  opacity: ${props => props.titleHeader ? 1 : 0};\n  ${mixins.TITLE_TYPE}\n  transition: 0.4s opacity;\n  border: 1px solid #CCCCCC;\n  padding: 7px;\n  background-color: white;\n  font-size: 0.8em;\n  color: black;\n\n  .ko {\n    ${mixins.BOLD_TYPE}\n    color: black;\n    font-size: 0.9em;\n  }\n`;\n\n\nclass TitleHeader extends Component {\n  render() {\n    return (\n      <HeaderContainer titleHeader={this.props.titleHeader}>    \n        Cartographers of North Korea &nbsp;<span className=\"ko\">북한의 지도 제작자</span>\n      </HeaderContainer>\n    )\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    titleHeader: state.titleHeader\n  }\n}\nexport default connect(mapStateToProps)(TitleHeader);","import React, { Component } from 'react'\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport mixins from '../stylesheets/mixins';\nimport {changeWorldMapIndividual } from '../actions';\nimport {KoreanLegend, IndividualInfo, NumberContributionLegend} from './';\n// import {SectionContainer, Box, Sticky} from '../stylesheets/components';\n// import osm_stats from '../constants/osm_users.json';\nimport * as d3 from 'd3';\nimport { numberWithDelimiter } from '../utils';\nimport _ from 'lodash';\nimport axios from 'axios';\n\nconst ContributorsGraphBox = styled.div`\n  background-color: white;\n  border: 1px solid #ccc;\n  width: 80%;\n  margin: 0 auto;\n  position: relative;\n`;\n\nconst Title = styled.div`\n  position: absolute;\n  left: 50%;\n  transform: translate(-50%, 0);\n  top: 20px;\n  color: black;\n  font-size: 0.9em;\n\n  div.disclaimer {\n    ${mixins.LABEL_ITALIC_TYPE}\n    margin-top:5px;\n    font-size:0.7em;\n    text-align: center;\n    color:#AAA;\n  }\n`;\n\nconst Tooltip = styled.div`\n  position:absolute;\n  line-height: 1;\n  padding: 10px;\n  background: #E7F7FB;\n  color: black;\n  z-index:6;\n  ${mixins.LABEL_BOLD_TYPE}\n  font-size:0.8em;\n  transition: 0.4s opacity;\n\n  width: calc(200px - 24px);\n  &:after {\n    content: \" \";\n    position: absolute;\n    top: 100%; /* At the bottom of the tooltip */\n    left: 50%;\n    margin-left: -5px;\n    border-width: 5px;\n    border-style: solid;\n    border-color: #E7F7FB transparent transparent transparent;\n  }\n\n  hr {\n    border:none;\n    margin: 0;\n    margin-bottom: 10px;\n    padding: 0;\n    border-bottom: 1px solid black;\n  }\n`;\nconst ToolTipLabelArea = styled.div`  \n  display: flex;\n  align-items:center;\n  justify-content: space-between;\n  /* padding-bottom:5px; */\n  margin-bottom:5px;\n`;\n\n const ToolTipLabel = styled.div`\n  ${mixins.LABEL_REGULAR_TYPE}\n  font-size:0.9em;\n`;\n\nconst ToolTipValue = styled.div`\n  ${mixins.LABEL_BOLD_TYPE}\n  font-size: 0.9em;\n`;\n\n\n\nclass ContributorsGraph extends Component {\n  constructor(props){\n    super(props);\n    // this.osmUsersData = osm_stats.stats.osm_users;\n\n\n    this.margin = {\n      top: 30, \n      right: 60,\n      bottom: 30,\n      left: 60\n    };\n\n    this.refGraph = React.createRef();   \n    this.colorScale = d3.scaleLog()\n      .domain([1, 2, 3, 10, 100, 1000, 5000, 10000, 100000])\n      .range([\"#ffffcc\",\n        \"#d6efc2\",\n        \"#acdeb7\",\n        \"#81ceba\",\n        \"#56bec1\",\n        \"#3caac2\",\n        \"#3391bc\",\n        \"#2b77b4\",\n        \"#2855a4\",\n        \"#253494\"]);\n\n    this.state = {\n      currentHover: null\n    }\n  \n  }\n\n  initSimulation(props){\n\n    var simulation = d3.forceSimulation(this.props.osmUsersDataStats.stats.osm_users)\n      .force(\"x\", d3.forceX(d => { return this.xScale(d.all_count); }).strength(1))\n      .force(\"y\", d3.forceY(props.height / 2 - 20))\n      .force(\"collide\", d3.forceCollide(props.padding))\n      .stop();\n\n    for (var i = 0; i < 200; ++i) simulation.tick();\n  }\n  \n  d3Init(){\n    let { width, height } = this.props;    \n    const svg = d3.select(this.refGraph.current);\n    this.xScale.range([this.margin.left, width - this.margin.right]);\n\n    this.initSimulation(this.props);\n\n    this.xAxisFunction = g => g\n      .attr(\"transform\", `translate(0,${height - this.margin.bottom})`)\n      .call(d3.axisBottom(this.xScale)\n        .ticks(width / 80)\n        .tickFormat(d => {\n          var log = Math.log(d) / Math.LN10;\n          return Math.abs(Math.round(log) - log) < 1e-6 ? numberWithDelimiter(d) : '';\n        })\n        .tickSizeOuter(0));\n    \n    this.xAxis = svg.append(\"g\")\n      .call(this.xAxisFunction);\n\n    var _this = this;\n    this.circleGraph = svg.append(\"g\")\n      .selectAll(\"circle\")\n      .data(this.props.osmUsersDataStats.stats.osm_users)\n      .enter().append(\"circle\")\n      .attr(\"fill\", d => { return this.colorScale(d.all_count) })\n      .attr(\"stroke\", \"#eee\")\n      .style('cursor', 'pointer')\n      .attr(\"cx\", d => d.x)\n      .attr(\"cy\", d => d.y)\n      .attr(\"r\", this.props.radius)\n      .on('mouseover touchend', function (d) {\n        _this.setState({\n          currentHover: {\n            ...d,\n            cx: d3.select(this).attr('cx'),\n            cy: d3.select(this).attr('cy')\n          }\n        });\n\n        d3.select(this)\n          .transition()\n          .attr('r', _this.props.radius + 2)\n          .attr('fill', '#ff0000');\n      })\n      .on('mouseout', function (d) {\n        _this.setState({\n          currentHover: null\n        });\n\n        let circleColor = _this.setCircleColor(_this.props, d);\n        d3.select(this)\n          .transition()\n          .attr('r', _this.props.radius)\n          .attr('fill', circleColor);\n      })\n      .on('click', d => {\n        if (this.props.cholopleth) {\n          this.setState({\n            currentHover: d\n          });\n          this.props.dispatch(changeWorldMapIndividual(d));\n          d3.select(this)\n            .transition()\n            .attr('r', _this.props.radius + 2)\n            .attr('fill', '#ff0000');\n        }\n      });\n\n  }\n\n  d3Update() {\n    let { width, height } = this.props;\n    this.xScale.range([this.margin.left, width - this.margin.right]);\n    \n    this.initSimulation(this.props);\n\n    this.xAxisFunction = g => g\n      .attr(\"transform\", `translate(0,${height - this.margin.bottom})`)\n      .call(d3.axisBottom(this.xScale)\n        .ticks(width / 80)\n        .tickFormat(d => {\n          var log = Math.log(d) / Math.LN10;\n          return Math.abs(Math.round(log) - log) < 1e-6 ? numberWithDelimiter(d) : '';\n        })\n        .tickSizeOuter(0))\n\n    this.xAxis\n      .transition()\n      .call(this.xAxisFunction);\n\n    this.circleGraph\n      .transition()\n      .attr(\"cx\", d => d.x)\n      .attr(\"cy\", d => d.y)\n  }\n\n  setCircleColor(props, d) {\n    let { graphMode, choloplethMode, cholopleth, currentIndividual } = props;\n\n    if (cholopleth) {\n      graphMode = choloplethMode;\n      // console.log(\"final graphmode is:\", graphMode);\n    }\n    //top20, top5\n    if (!_.isNull(currentIndividual) && !_.isUndefined(currentIndividual)) {\n\n      return d.id === currentIndividual.id ? \"#FF0000\" : \"#DDD\";\n\n    } else {\n      if (graphMode === \"korean\") {\n        return d.korean ? \"#FF0000\" : \"#DDD\";\n\n      } else if (graphMode === \"all\") {\n\n        return this.colorScale(d.all_count);\n\n      } else if (graphMode === \"top20\") {\n\n        return d.rank > 0 && d.rank <= 20 ? \"#253494\" : \"#DDD\";\n\n      } else if (graphMode === \"top5\") {\n\n        return d.rank > 0 && d.rank <= 5 ? \"#253494\" : \"#DDD\";\n\n      }\n    }\n\n  }\n\n  componentDidUpdate(prevProps, prevState){\n    let { graphMode, choloplethMode, cholopleth, currentIndividual } = this.props;\n   \n    if (prevProps.osmUsersDataStats !== this.props.osmUsersDataStats) {\n\n      if (!_.isNull(this.props.osmUsersDataStats)) {\n        this.xScale = d3.scaleLog()\n          .domain(d3.extent(this.props.osmUsersDataStats.stats.osm_users, d => d.all_count));\n        this.d3Init();\n\n      }\n      \n    }\n   \n    if (!_.isNull(this.props.osmUsersDataStats)){\n\n      if (prevProps.width !== this.props.width || prevProps.height !== this.props.height) {\n        this.d3Update();\n        console.log(\"d3update called\");\n      }\n      \n      if (cholopleth) {\n        graphMode = choloplethMode;\n      }\n      \n      if (!_.isUndefined(this.circleGraph)) {\n\n        if (!_.isNull(currentIndividual) && !_.isUndefined(currentIndividual)) {\n  \n          this.circleGraph.transition().attr(\"fill\", d => {\n    \n            if (d.id === currentIndividual.id) {\n            \n              return \"#FF0000\";\n            \n            } else {\n    \n              return \"#DDD\";\n            \n            }\n    \n          })\n    \n        } else {\n          //top20, top5\n          if (graphMode === \"korean\") {\n    \n            this.circleGraph.transition().attr(\"fill\", d => {\n              return d.korean ? \"#FF0000\" : \"#DDD\";\n            })\n    \n          } else if (graphMode === \"all\") {\n            this.circleGraph.transition().attr(\"fill\", d => {\n              return this.colorScale(d.all_count)\n            });\n    \n          } else if (graphMode === \"top20\") {\n            \n            this.circleGraph.transition().attr(\"fill\", d => {\n              return d.rank > 0 && d.rank <= 20 ? \"#253494\" : \"#DDD\"; // this.colorScale(d.all_count)\n            })\n    \n          } else if (graphMode === \"top5\") {\n            this.circleGraph.transition().attr(\"fill\", d => {\n              return d.rank > 0 && d.rank <= 5 ? \"#253494\" : \"#DDD\";\n            }) //this.colorScale(d.all_count)\n          }\n        }\n      }\n      \n    }\n    \n  }\n\n  render() {\n    let { currentHover } = this.state;\n    let { graphMode, choloplethMode, cholopleth, currentIndividual } = this.props;\n\n    if (cholopleth) {\n      graphMode = choloplethMode;\n      // console.log(\"final graphmode is:\", graphMode);\n    }\n\n    if (!_.isNull(currentHover)) {\n      console.log(currentHover.cx, currentHover.cy);\n\n    }\n    \n    return (\n\n        <ContributorsGraphBox style={{ height: this.props.height }}>\n          <Title>\n            Distribution of Contributors by # of Contribution\n\n            <div className=\"disclaimer\">\n              * Names have been anonymized for privacy\n            </div>\n          </Title>\n          <svg ref={this.refGraph} width={this.props.width} height={this.props.height}>\n          </svg>\n\n          {\n            _.isNull(currentHover) ? \n            null : \n            <Tooltip style={{ left: currentHover.cx - 100, top: Number(currentHover.cy) - 140 }}>\n              P{ currentHover.id }*\n              <hr />\n              <ToolTipLabelArea>\n                <ToolTipLabel>\n                  Total Contribution\n                </ToolTipLabel>\n                <ToolTipValue>\n                  { numberWithDelimiter(currentHover.all_count) }\n                </ToolTipValue>\n              </ToolTipLabelArea>\n              <ToolTipLabelArea>\n                <ToolTipLabel>\n                  # of Changesets \n                </ToolTipLabel>\n                <ToolTipValue>\n                  { numberWithDelimiter(currentHover.total_contribution_count) }\n                </ToolTipValue>\n              </ToolTipLabelArea>\n              <ToolTipLabelArea>\n                <ToolTipLabel>\n                  % of Contribution in Korean\n                </ToolTipLabel>\n                <ToolTipValue>\n                  {numberWithDelimiter(Math.floor(currentHover.korean_pct * 100))}% \n                </ToolTipValue>\n              </ToolTipLabelArea>\n            </Tooltip>\n          }\n          <KoreanLegend show={graphMode === \"korean\"} />\n          <NumberContributionLegend scale={this.colorScale} show={!cholopleth && graphMode !== \"korean\"} />\n          {\n            _.isNull(currentIndividual) || _.isUndefined(currentIndividual) ? \n            null : <IndividualInfo />\n          }\n          \n        </ContributorsGraphBox>\n    )\n  }\n}\n\nlet mapStateToProps = state => {\n    return {\n      graphMode: state.graphMode,\n      choloplethMode: state.choloplethMode,\n      osmUsersDataStats: state.osmUsersDataStats,\n      cholopleth: state.cholopleth,\n      currentIndividual: state.currentIndividual\n    }\n};\n\nexport default connect(mapStateToProps)(ContributorsGraph);","import React, { Component } from 'react'\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport mixins from '../stylesheets/mixins';\nimport { Gutter } from '../stylesheets/components';\nimport { scaleLinear } from 'd3';\nimport moment from 'moment';\nimport { YearLegend } from './';\n\nconst Fragment = React.Fragment;\n\nconst Container = styled.div`\n  position: fixed;\n  right: 10px;\n  top: 10px;\n  z-index:4;\n  opacity: ${props => props.show ? 1 : 0};\n  transition: 0.4s opacity;\n`;\n\nconst RightStat = styled.div`\n \n  border: 1px solid #ccc;\n  padding:10px;\n  background-color: white;\n`;\n\nconst Label = styled.h4`\n  ${mixins.LABEL_BOLD_TYPE}\n  text-align: right;\n  font-size: 0.7em;\n  color: #777;\n`;\n\nconst Value = styled.p`\n  ${mixins.TITLE_TYPE}\n  font-size:1.5em;\n  color:black;\n  text-align: right;\n`;\n\n\nconst Timeline = styled.div`\n\n  border: 1px solid #ccc;\n  padding:15px 10px;\n  background-color: white;\n  height: 300px;\n  width: 15px;\n  position: relative;\n  float: right;\n`;\n\nconst Line = styled.div`\n  position: absolute;\n  left: 50%;\n  width: 3px;\n  transform: translate(-50%, 0);\n  background-color: ${ props => props.color };\n  height: calc(${ props => props.height }% - 30px);\n  transition: 0.2s height;\n`;\n\nconst Date = styled.div`\n  position: absolute;\n  right: 27px;\n  z-index: 6;\n  width: max-content;\n  ${mixins.LABEL_REGULAR_TYPE}\n  font-size:0.7em;\n  top: calc(${ props => props.top }% - 30px);\n  border: 1px solid #ccc;\n  padding:10px;\n  background-color: white;\n  transition: 0.2s top;\n`;\n\nclass TimelineScroller extends Component {\n  render() {\n    let timeScale = scaleLinear().domain([1184971551, 1539016223]).clamp(true).range([0, 100]);\n    let { timelineUI, currentTimeStamp } = this.props;\n    return (\n      <Fragment>\n        <Container show={timelineUI}>\n          <RightStat>\n            <Label>\n              Total Contributors\n            </Label>\n            <Value>\n              889\n            </Value>\n            <Gutter></Gutter>\n            <Label>\n              Total Contributions\n            </Label>\n            <Value>\n              324,415\n            </Value>\n          </RightStat>\n          <Gutter h={15}></Gutter>\n          <Timeline>\n            <Date top={timeScale(currentTimeStamp)}>\n              {moment.unix(currentTimeStamp).format(\"MMMM DD, YYYY\")}\n            </Date>\n            <Line color=\"#ddd\" height={100} />\n            <Line color=\"#000\" height={timeScale(currentTimeStamp)} />\n          </Timeline>\n        </Container>\n        <YearLegend />\n      </Fragment>\n    )\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    timelineUI: state.timelineUI,\n    currentTimeStamp: state.currentTimeStamp\n  }\n}\n\nexport default connect(mapStateToProps)(TimelineScroller);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport {  numberWithDelimiter } from '../utils';\nimport * as d3 from 'd3';\nimport country_analysis_all from '../constants/country_analysis_all.json';\nimport country_analysis_top_20 from '../constants/country_analysis_top_20.json';\nimport country_analysis_top_5 from '../constants/country_analysis_top_5.json';\nimport _ from 'lodash';\n\nclass CholoplethLegend extends Component {\n  constructor(props) {\n    super(props);\n    this.colorScale = d3.scaleLinear()\n      .range([\"#ffffcc\",\n        \"#d6efc2\",\n        \"#acdeb7\",\n        \"#81ceba\",\n        \"#56bec1\",\n        \"#3caac2\",\n        \"#3391bc\",\n        \"#2b77b4\",\n        \"#2855a4\",\n        \"#253494\"])\n\n  }\n\n  componentDidMount() {\n  }\n  updateCurrentCholopleth(cholopleth, choloplethMode, currentIndividual) {\n\n    let currentCountryJSON = null;\n\n    if (!_.isNull(currentIndividual)) {\n\n      currentCountryJSON = currentIndividual;\n\n    } else if (choloplethMode === \"all\") {\n\n      currentCountryJSON = {\n        country_counts: country_analysis_all\n      };\n\n    } else if (choloplethMode === \"top20\") {\n\n      currentCountryJSON = {\n        country_counts: country_analysis_top_20\n      };\n\n    } else { // top5\n\n      currentCountryJSON = {\n        country_counts: country_analysis_top_5\n      };\n\n    }\n\n    if (!_.isNull(currentCountryJSON) && cholopleth) {\n\n      var extent = [0, d3.max(currentCountryJSON.country_counts, cc => {\n        return cc.count;\n      })]\n\n      var finalDomain = [extent[0],\n      extent[0] + (extent[1] - extent[0]) / 9 * 1,\n      extent[0] + (extent[1] - extent[0]) / 9 * 2,\n      extent[0] + (extent[1] - extent[0]) / 9 * 3,\n      extent[0] + (extent[1] - extent[0]) / 9 * 4,\n      extent[0] + (extent[1] - extent[0]) / 9 * 5,\n      extent[0] + (extent[1] - extent[0]) / 9 * 6,\n      extent[0] + (extent[1] - extent[0]) / 9 * 7,\n      extent[0] + (extent[1] - extent[0]) / 9 * 8,\n      extent[0] + (extent[1] - extent[0]) / 9 * 9];\n      return {\n        opacity: 1,\n        finalDomain: finalDomain\n      }\n    } else {\n      return {\n        opacity: 0,\n        finalDomain: [0, 1]\n      }\n    }\n  }\n\n  render() {\n    let { cholopleth, choloplethMode, currentIndividual } = this.props;\n    console.log(\"cholopleth\", cholopleth, \"choroplethMode\", choloplethMode, \"currentIndividual\", currentIndividual);\n    let result = this.updateCurrentCholopleth(cholopleth, choloplethMode, currentIndividual);\n\n    this.colorScale.domain(result.finalDomain);\n\n    return (\n      <div className=\"sub-legend\" style={{ opacity: result.opacity }}>\n        <div className=\"title\">\n          # of Contribution\n        </div>\n        {\n          result.opacity === 1 ? \n          _.map(result.finalDomain, (val, i) => {\n            if (_.isUndefined(val)) {\n              return null;\n            } else {\n              return (\n                <div key={i} className=\"legend-sub-area\">\n                  <div className=\"color-box\" style={{ backgroundColor: this.colorScale(val) }}>\n                  </div>\n                  <div className=\"value\">\n                    {numberWithDelimiter(Number(val.toFixed(0)))}\n                  </div>\n                </div>\n              );\n            }\n\n\n          }) : null\n        }\n      </div>\n\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n\n    choloplethMode: state.choloplethMode,\n    currentIndividual: state.currentIndividual,\n    cholopleth: state.cholopleth\n    // currentSeq: state.currentSeq,\n    // currentFeature: state.currentFeature,\n    // currentTimeStamp: state.currentTimeStamp\n  }\n}\n\nexport default connect(mapStateToProps)(CholoplethLegend);","import React, { Component } from 'react'\nimport styled from 'styled-components';\nimport mixins from '../stylesheets/mixins';\n\nconst LegendBox = styled.div`\n  background-color: white;\n  border: 1px solid #ccc;\n  padding: 10px;\n  position: absolute;\n  right: 10px;\n  top: 10px;\n  transition: 0.4s opacity;\n  opacity: 0;\n  display: flex;\n`;\n\nconst RedCircle = styled.div`\n  width: 12px;\n  height: 12px;\n  border-radius: 20px;\n  background-color: red;\n  margin-top: 3px;\n`;\n\nconst Label = styled.div `\n  margin-left: 7px;\n  ${mixins.LABEL_REGULAR_TYPE}\n  font-size:0.7em;\n  color:#999;\n`;\n\nclass KoreanLegend extends Component {\n  render() {\n    return (\n      <LegendBox style={{ opacity: this.props.show ? 1 : 0 }}>\n        <RedCircle />\n        <Label>\n          Contributed in Korean\n        </Label>\n      </LegendBox>\n    )\n  }\n}\n\nexport default KoreanLegend;","import React, { Component } from 'react'\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport mixins from '../stylesheets/mixins';\nimport world_data from '../constants/world_data.json';\nimport { numberWithDelimiter } from '../utils';\nimport {changeWorldMapIndividual} from '../actions';\nimport _ from 'lodash';\n\nconst Box = styled.div`\n  position: absolute;\n  left: 50%;\n  background-color: white;\n  border: 1px solid #ccc;\n  padding: 10px 5px;\n  font-size:1.1em;\n  top: 50px;\n  transform: translate(-50%, -100%);\n  display: flex;\n  width: 300px;\n\tjustify-content: space-between;\n`;\n\nconst Area = styled.div`\n  width: 50%;\n  padding: 0 5px;\n`;\n\nconst Label = styled.h4`\n  ${mixins.LABEL_BOLD_TYPE}\n  font-size:0.65em;\n  color:#777;\n`;\n\nconst Value = styled.div `\n  font-size: 0.9em;\n  color: black;\n  padding-right: 10px;\n`;\n\nconst SmallSize = styled.span`\n  ${mixins.LABEL_BOLD_TYPE}\n  font-size: 0.7em;   \n  position: relative;\n  top: -1px;\n`;\n\nconst CloseButton = styled.a`\n  position: absolute;\n  right: 8px;\n  top: 1px;\n  ${mixins.LABEL_BOLD_TYPE}\n\n`;\n\n\nclass IndividualInfo extends Component {\n  componentDidMount(){\n    \n  }\n\n  getTop5Countries(currentIndividual) {\n\n    let worldIds = _.map(_.filter(_.sortBy(currentIndividual.country_counts, country => country.count).reverse().splice(0, 5), c => c.count > 0), country => {\n      return {\n        id: country.world_id,\n        count: country.count\n      };\n    });\n\n    let labels = _.map(worldIds, worldId => {\n      let label = _.find(world_data, w => {\n        return w.id === worldId.id\n      });\n\n      label.count = worldId.count;\n\n      return label;\n    });\n\n    return labels;\n  }\n\n  handleClick(e){\n    this.props.dispatch(changeWorldMapIndividual(null));\n  }\n\n  render() {\n    let { currentIndividual } = this.props;\n    let top5Countries = this.getTop5Countries(currentIndividual);\n\n    return (\n      <Box>\n        \n        <CloseButton onClick={this.handleClick.bind(this)} href=\"javascript:void(0);\">\n          ⨯\n        </CloseButton>\n        <Area>\n          <Label>\n            Name\n          </Label>\n          <Value>\n            P{currentIndividual.id}\n          </Value>\n        </Area>\n        <Area>\n          <Label>\n            Top {top5Countries.length} Countries\n          </Label>\n          <Value>\n            {\n              _.map(top5Countries, (c, i) => {\n                return (\n                  <div key={i}>\n                    {c.name_en} <SmallSize>{ numberWithDelimiter(c.count) }</SmallSize>\n                  </div>\n                )\n              })\n            }\n          </Value>\n        </Area>\n      </Box>\n    )\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    currentIndividual: state.currentIndividual\n  }\n};\n\nexport default connect(mapStateToProps)(IndividualInfo);","export const DEFAULT_STATE = {\n  windowWidth: 1024,\n  windowHeight: 768,\n  titleHeader: false,\n  mapLoaded: false,\n  nkTile: false,\n  cholopleth: false,\n  timelineUI: false,\n  textVisualization: false,\n  legend: false,\n  currentSeq: 0,\n  currentFeature: null,\n  currentTimeStamp: 1167609600,\n  zoom: 6,\n  graphMode: \"all\", // all, korean\n  choloplethMode: \"all\", //top20, top5, individual\n  currentIndividual: null,\n  osmUsers: [],\n  osmUsersDataStats: null,\n  responseCategories: [],\n  osmUserHistories: null,\n  osmUserHistoriesIdx: 0,\n  center: [125.75432, 39.03385],\n  selectedTextCategory: {},\n  selectedOsmUserResponse: null\n};\n\nexport const CATEGORIES_COLORS = [\n  \"#9bd1c7\",\n  \"#d8d754\",\n  \"#6258da\",\n  \"#ec8677\",\n  \"#8ab0d0\",\n  \"#f3b670\",\n  \"#bbdb79\",\n  \"#e8a4c8\",\n  \"#ada6a6\",\n  \"#b484b9\",\n  \"#99d182\",\n  \"#8ce2fc\",\n  \"#5f6687\",\n  \"#ce6586\",\n  \"#2e307d\"\n]\n\nexport const INTERESTING_NAMES = [\n  {dataPoint: \"p=4109493330\", id: 4109493330, title: \"위대한 수령 김일성동지 기념비\"},\n  {dataPoint: \"p=3090640091\", id: 3090640091, title: \"평양려관 5층 차집\"},\n  {dataPoint: \"p=5485334795\", id: 5485334795, title: \"사진꽃방 (1층)\"},\n  {dataPoint: \"pg=500783829\", id: 500783829,  title: \"Missile Launchpad\"},\n  {dataPoint: \"pg=408248450\", id: 408248450,  title: \"위대한 수령 김일성동지의 개선연설 자필기념비\"},\n  {dataPoint: \"pg=554071936\", id: 554071936,  title: \"Prison Workers Unit 3 Village\"}\n]\n\nexport const SUBCATEGORY_SELECT = {\n  1: ['Why?', '1'],\n  2: ['How?', '2'],\n  3: ['Comments', '3']\n}\n\n// 1448928000\n// 1448928052","import React, { Component } from 'react'\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport axios from 'axios';\nimport { addTextCategorySelected, removeTextCategorySelected, changeOsmUserReponseData } from '../actions';\nimport _ from 'lodash';\nimport { SUBCATEGORY_SELECT, CATEGORIES_COLORS } from '../constants/defaults';\nimport * as d3 from 'd3';\nimport {TextVisualizationResponses } from './';\n\nconst Fragment = React.Fragment;\nconst Bar = styled.div`\n  position: fixed;\n  z-index: 8;\n  top: 0;\n  opacity: 0;\n  transition: 0.4s opacity;\n  width: 170px;\n\n  section {\n    padding: 10px;\n    margin-bottom: 20px;\n  }\n\n  h3 {\n    font-size: 1.0em;\n    line-height: 1.1;\n    color: black;\n    margin-bottom: 7px;\n    font-weight: 700;\n    text-indent: -4px;\n  }\n\n  p {\n    color: #888;\n    line-height: 1.2;\n    font-family: \"Roboto\", sans-serif;\n    font-size:0.8em;\n  }\n\n  \n`;\n\nconst CategoryLink = styled.a`\n  font-size: 0.7em;\n  display: inline-block;\n  margin-bottom: 6px;\n  margin-left: -5px;\n  padding: 4px;\n  line-height: 1.2;\n  cursor: pointer;\n  background:white;\n  font-family: \"Roboto\", sans-serif;\n  font-weight: 400;\n  color:black;\n`\n\nconst UnCategoryLink = styled.a`\n  font-size: 0.7em;\n  display: inline-block;\n  margin-bottom: 6px;\n  margin-left: -5px;\n  line-height: 1.2;\n  padding: 4px;\n  cursor: pointer;\n  font-family: \"Roboto\", sans-serif;\n  font-weight: 700;\n  color:white;\n  position:relative;\n  padding-right:20px;\n\n  \n  .close-btn {\n    font-size:1.2em;\n\n    top: 1px;\n    right: 6px;\n    position: absolute;\n  }\n`\nconst ArrowArea = styled.div`\n  position: fixed;\n  z-index: 9;\n  opacity: 1;\n  transition: 0.4s opacity;\n  left: 180px;\n  height: 32px;\n  width: calc(100% - 190px);\n  bottom: 20px;\n  display: flex;\n  justify-content: space-between;\n  \n  hr {\n    border:none;\n    position:absolute;\n    top:20px;\n    border:1px solid #888;\n    width:100%;\n  }\n`;\n\n\nclass TextVisualization extends Component {\n  \n  componentDidMount(){\n    axios.all([axios.get('https://nkosm.wonyoung.so/api/osm_users.json')])\n    .then(axios.spread((response) => {\n      if (response.data.success) {\n        this.props.dispatch(changeOsmUserReponseData(response.data.osm_users, response.data.response_categories));\n      }\n    }));\n\n  }\n  \n  handleAddTextCategory(c) {\n    let { selectedTextCategory } = this.props;\n    \n    if ( !_.isUndefined(selectedTextCategory[c.id]) ) {\n\n      this.props.dispatch(removeTextCategorySelected(c.id));\n    } else {\n    \n      this.props.dispatch(addTextCategorySelected(c.id, {id: c.id }));\n    \n    }\n  }\n\n  render() {\n    let { textVisualization, selectedTextCategory, responseCategories } = this.props;\n    let subCategories = _.groupBy(responseCategories, c => { return c.subcategory_id; });\n    let colorScale = d3.scaleOrdinal().domain(_.map(responseCategories, rc => { return rc.id})).range(CATEGORIES_COLORS);\n    \n    return (\n      <Fragment>\n        <Bar style={{left: 0, opacity: textVisualization ? 1 : 0}}>\n          {\n            _.map(subCategories, (categories, key) => {\n              return (\n                <section key={key}>\n                  <h3>\n                    { SUBCATEGORY_SELECT[Number(key)][0] }\n                  </h3>\n                  {\n                    _.map(categories, c => {\n                \n                      let selected = _.isUndefined(selectedTextCategory[c.id]);\n                      return selected ? \n                        <CategoryLink onClick={this.handleAddTextCategory.bind(this, c)} key={c.id}>{c.category_name}</CategoryLink> : \n                        <UnCategoryLink style={{backgroundColor: colorScale(c.id)}} onClick={this.handleAddTextCategory.bind(this, c)} key={c.id}>\n                          {c.category_name} <span className=\"close-btn\">⨯</span>\n                        </UnCategoryLink>;\n                    })\n                  }\n                </section>\n                \n              );\n            })\n          }\n        </Bar>\n        \n       \n\n        <ArrowArea style={{opacity: textVisualization ? 1 : 0}}>\n          <img src={`${process.env.PUBLIC_URL}/assets/more_data_arrow.svg`} />\n          <img src={`${process.env.PUBLIC_URL}/assets/less_data_arrow.svg`} />\n        </ArrowArea>\n\n        {/* <Bar style={{right: 0, opacity: textVisualization ? 1 : 0}}>\n          <section>\n            <h3>\n              Responses<br />\n              211\n            </h3>\n            <p>\n              from 889<br />\n              contributors\n            </p>\n          </section>\n        </Bar> */}\n      </Fragment>\n    )\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    textVisualization: state.textVisualization,\n    selectedTextCategory: state.selectedTextCategory,\n    responseCategories: state.responseCategories\n\n  }\n}\nexport default connect(mapStateToProps)(TextVisualization);","import React, { Component } from 'react'\nimport styled from 'styled-components';\nimport { UserResponse } from './';\nimport { connect } from 'react-redux';\nimport * as d3 from 'd3';\nimport _ from 'lodash';\nimport { CATEGORIES_COLORS } from '../constants/defaults';\n\nconst GridBox = styled.div`\n  column-count: 15;\n  column-gap: 5px;\n  /* height: 2000px; */\n  width: calc(100% - 10px);\n`;\n\nconst Main = styled.div`\n  /* left: 180px; */\n  position: sticky;\n  z-index: 8;\n  margin-left: 180px;\n  top: 10px;\n  transition: 0.4s opacity;\n  width: calc(100% - 180px);\n  /* top: 20px; */\n  /* padding-top: 9px; */\n`;\n\nclass TextVisualizationResponses extends Component {\n\n  constructor(props){\n    super(props);\n\n    this.fontSizeScale = d3.scaleLinear().domain([1024, 1280, 1440, 2560]).clamp(true).range([2.2, 2.4, 3.2, 5]);\n    this.lineHeightScale = d3.scaleLinear().domain([1024, 1280, 1440, 2560]).clamp(true).range([1.7, 1.7, 1.5, 1.4]);\n  }\n  \n  render() {\n\n    let { osmUsers, responseCategories, textVisualization, windowWidth } = this.props;\n    let colorScale = d3.scaleOrdinal().domain(_.map(responseCategories, rc => { return rc.id})).range(CATEGORIES_COLORS);\n\n    return (\n      <Main style={{opacity: textVisualization ? 1 : 0 }}>\n        <GridBox>\n          {\n            _.map(osmUsers, (ou, i) => {\n              return (\n                <UserResponse {...ou} fontSize={this.fontSizeScale(windowWidth)} lineHeight={Math.ceil(this.lineHeightScale(windowWidth) * 10)/10} key={i} colorScale={colorScale} />\n              )\n            })\n          }\n        </GridBox>\n      </Main>\n    )\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    osmUsers: state.osmUsers,\n    windowWidth: state.windowWidth,\n    textVisualization: state.textVisualization,\n    responseCategories: state.responseCategories,\n    selectedTextCategory: state.selectedTextCategory\n  }\n}\n\nexport default connect(mapStateToProps)(TextVisualizationResponses);","import React, { Component } from 'react'\nimport _ from 'lodash';\nimport styled from 'styled-components';\nimport { changeSelectedOsmUserResponse } from '../actions';\nimport { connect } from 'react-redux';\nimport chroma from 'chroma-js';\nimport * as d3 from 'd3';\n\nconst TextSpan = styled.span`\n  word-break: break-word;\n\n  transition: 0.4s all;\n\n`;\n\nconst RespArea = styled.div`\n  margin-bottom: 5px;\n  font-size: 4px;\n  line-height: 1.5;\n  cursor:pointer;\n  transition: 0.4s all;\n  -webkit-column-break-inside: avoid;\n  page-break-inside: avoid;\n  break-inside: avoid;\n\n  &:hover {\n    background-color: white;\n  }\n`;\n\nclass UserResponse extends Component {\n  handleClick(response){\n    this.props.dispatch(changeSelectedOsmUserResponse({\n      ...this.props\n    })) \n  }\n\n  render() {\n    let { selectedTextCategory, fontSize, lineHeight } = this.props;\n    return (\n      <RespArea style={{ fontSize: `${fontSize}px`, lineHeight: lineHeight }} onClick={this.handleClick.bind(this)}>\n        {\n          _.map(this.props.responses, response => {\n            let selected = !_.isUndefined(selectedTextCategory[response.category_id]);\n            \n            return (\n              <TextSpan key={response.id} style={{\n                color: selected ? this.props.colorScale(response.category_id) : \"#999\",\n                backgroundColor: selected ? this.props.colorScale(response.category_id) : \"transparent\"\n              }}>\n                { response.resp }\n              </TextSpan> \n            );\n          })\n        }\n      </RespArea>\n    )\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    windowWidth: state.windowWidth,\n    selectedTextCategory: state.selectedTextCategory\n  }\n};\n\nexport default connect(mapStateToProps)(UserResponse);","import React, { Component } from 'react'\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport _ from 'lodash';\nimport mixins from '../stylesheets/mixins';\nimport { Gutter } from '../stylesheets/components';\nimport { changeSelectedOsmUserResponse, changeOsmUserHistories, changeOsmUserHistoriesIdx } from '../actions';\nimport axios from 'axios';\nimport * as d3 from 'd3';\nimport moment from 'moment';\nimport { CATEGORIES_COLORS } from '../constants/defaults';\nimport { numberWithDelimiter } from '../utils';\nimport chroma from 'chroma-js';\n\nconst Fragment = React.Fragment;\nconst RespContainer = styled.div`\n\n  position: fixed;\n  bottom: 10px;\n  left: 10px;\n  z-index:20;\n  background-color: white;\n  padding: 10px;\n  width: 50%;\n  border: 1px solid #ccc;\n  line-height: 1.6;\n  word-break: break-word;\n\n  .rela-cont {\n    position:relative;\n  }\n\n  .resp-content {\n    \n    max-height: 300px;\n    overflow-y: scroll;\n    line-height: 1.8;\n    padding-bottom: 50px;\n\n  }\n  span {\n    padding: 3px 5px;\n  }\n\n  .close-btn {\n    position:absolute;\n    right: 10px;\n    top: 2px;\n  }\n`;\n\nconst DataInfoContainer = styled.div`\n  position: fixed;\n  bottom: 10px;\n  right: 10px;\n  z-index:20;\n  background-color: white;\n  border: 1px solid #ccc;\n  padding: 10px;\n`;\n\n\nconst POIBox = styled.div`\n  color: black;\n  display:flex;\n  justify-content: space-between;\n  width: 250px;\n`;\n\nconst TitleArea = styled.div`\n  width:125px;\n`;\n\nconst Label = styled.h4`\n  ${mixins.LABEL_BOLD_TYPE}\n  font-size:0.7em;\n  color:#777; \n  margin-bottom: 5px;\n`;\n\nconst Value = styled.div`\n  font-size: 0.9em;\n  color: black;\n  padding-right: 10px;\n`;\n\nconst Date = styled.div`\n  ${mixins.LABEL_REGULAR_TYPE}\n  font-size:0.8em;\n  margin-top: -3px;\n  color: #AAA;\n`;\n\nconst CategorySpan = styled.span`\n  font-size: 0.8em;\n  font-family: \"Roboto\", sans-serif;\n  font-weight: 400;\n  padding: 2px 5px;\n  line-height: 1.7;\n  margin-right: 5px;\n  hyphens: auto;\n  word-break: break-all;\n`\n\nconst RespInfoArea = styled.div`\n  display: flex;\n  justify-content: space-between;\n  position: absolute;\n  padding-top: 10px;\n  border-top: 1px solid #ccc;\n  bottom: 0px;\n  background: white;\n  width: 100%;\n\n\n  div.left-inner {\n    width: calc(100% - 150px);\n  }\n\n   div.right-inner {\n     width: 120px;\n   }\n\n  div.left-inner {\n    line-height: 1.6;\n  }\n\n  div.right-inner {\n    text-align:right;\n    font-size:0.9em;\n    color:#777;\n  }\n\n  i {\n    font-style: italic;\n  }\n`;\n\nclass SelectedResponseViewer extends Component {\n  constructor(props){\n    super(props);\n    \n    this.intervalId = null;\n  }\n  componentDidMount(){\n    document.body.style.overflow = 'hidden';\n\n    this.loadOsmUserSampleData();\n  }\n\n  loadOsmUserSampleData(){\n\n    let { selectedOsmUserResponse } = this.props;\n    axios.get(`https://nkosm.wonyoung.so/api/osm_users/${selectedOsmUserResponse.id}.json`)\n      .then((response) => {\n        this.props.dispatch(changeOsmUserHistories(response.data.osm_user.histories));\n\n        // response.data.osm_user.histories\n\n      })\n      .catch(function (error) {\n        console.log(error);\n      })\n  }\n\n  componentWillUnmount(){\n    document.body.style.overflow = 'auto';\n    // clearInterval(this.intervalId);\n  }\n\n  handleClose(e){\n    this.props.dispatch(changeSelectedOsmUserResponse(null));\n    this.props.dispatch(changeOsmUserHistories(null));\n  }\n\n  getSelectedColorCategories(selectedOsmUserResponse, responseCategories, colorScale){\n    let respCategories = _.uniq(_.compact(_.map(selectedOsmUserResponse.responses, response => {\n      return response.category_id === 12 ? null : response.category_id\n    })));\n\n    let result = [];\n    _.each(respCategories, respCategory => {\n      let c = _.find(responseCategories, rc => { return rc.id === respCategory });\n      result.push({\n        ...c,\n        color: colorScale(c.id)\n      });\n    })\n\n    return result;\n  }\n  \n  componentDidUpdate(prevProps){\n   \n  }\n\n  render() {\n    let { selectedOsmUserResponse, responseCategories, osmUserHistories, osmUserHistoriesIdx } = this.props;\n    // debugger;\n    let colorScale = d3.scaleOrdinal().domain(_.map(responseCategories, rc => { return rc.id})).range(CATEGORIES_COLORS);\n    let selectedColorCategories = this.getSelectedColorCategories(selectedOsmUserResponse, responseCategories, colorScale);\n    let osmHistory;\n\n    if (!_.isNull(osmUserHistories)) {\n      if (!_.isUndefined(osmUserHistories[osmUserHistoriesIdx])){\n        osmHistory = osmUserHistories[osmUserHistoriesIdx].features[0];\n\n      }\n    }\n    \n    return (\n      <Fragment>\n\n        <RespContainer>\n          <div className='rela-cont'>\n            <button className=\"close-btn\" onClick={this.handleClose.bind(this)}><img src=\"./assets/close_btn.svg\" alt=\"close_btn\" /></button>\n\n            <div className=\"resp-content\">\n              \n              <div>\n                -\n              </div>\n\n              {\n                _.map(selectedOsmUserResponse.responses, (r, i) => {\n                  \n                  let bgColor = r.category_id === 12 ? \"transparent\": colorScale(r.category_id);\n                  let color = bgColor === \"transparent\" ? \"black\" : \"white\";\n                  return (\n                    <span key={i} style={{backgroundColor: bgColor, color: color }}>\n                      {r.resp}\n                    </span>\n                  )\n                })\n              }\n\n              <Gutter h={70}></Gutter>\n            \n\n            </div>\n\n            <RespInfoArea>\n\n              <div className=\"left-inner\">\n                {\n                  _.map(selectedColorCategories, scc => {\n                    return (\n                      <CategorySpan key={scc.id} style={{ backgroundColor: scc.color, color: \"white\" }}>\n                        {scc.category_name}\n                      </CategorySpan>\n                    )\n                  })\n                }\n              </div>\n              <div className=\"right-inner\">\n                P{ selectedOsmUserResponse.id }<br/>\n                <i>{ numberWithDelimiter(selectedOsmUserResponse.all_count) } Contribution</i>\n              </div>\n            </RespInfoArea>\n          </div>\n          \n          \n        \n        </RespContainer>\n        {\n          !_.isUndefined(osmHistory) ?\n          <DataInfoContainer>\n            <POIBox>\n              <TitleArea>\n                <Label>\n                  Name\n              </Label>\n                <Value>\n                    {_.isNull(osmHistory.properties.name_en) ? (_.isNull(osmHistory.properties.name) ? \"–\" : osmHistory.properties.name) : osmHistory.properties.name_en }\n                </Value>\n              </TitleArea>\n              <TitleArea>\n                <Label>\n                  Contributed Date\n                </Label>\n                <Date>\n                  {moment.unix(osmHistory.properties.osm_timestamp).format(\"MMMM DD, YYYY\")}\n                </Date>\n              </TitleArea>\n            </POIBox>\n          </DataInfoContainer> : null\n        }\n        \n      </Fragment>\n    )\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    selectedOsmUserResponse: state.selectedOsmUserResponse,\n    responseCategories: state.responseCategories,\n    osmUserHistories: state.osmUserHistories,\n    osmUserHistoriesIdx: state.osmUserHistoriesIdx\n  }\n};\n\nexport default connect(mapStateToProps)(SelectedResponseViewer);","import React, { Component } from 'react'\nimport styled from 'styled-components';\nimport mixins from '../stylesheets/mixins';\nimport _ from 'lodash';\nimport { numberWithDelimiter } from '../utils';\n\nconst LegendBox = styled.div`\n  background-color: white;\n  border: 1px solid #ccc;\n  padding: 10px;\n  position: absolute;\n  right: 10px;\n  top: 10px;\n  transition: 0.4s opacity;\n  opacity: 0;\n\n  h4 {\n    ${mixins.LABEL_BOLD_TYPE}\n    font-size:0.7em;\n    color:#999;\n  }\n\n  div.legend-inner { \n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    justify-content: flex-start;\n    align-items: center;\n    align-content: stretch;    \n    width: 200px;\n\n  }\n  div.legend {\n    width: 65px;\n    display: flex;\n  }\n`;\n\nconst Circle = styled.div`\n  width: 12px;\n  height: 12px;\n  border-radius: 20px;\n  margin-top: 3px;\n`;\n\nconst Label = styled.div `\n  margin-left: 7px;\n  ${mixins.LABEL_REGULAR_TYPE}\n  font-size:0.7em;\n  color:#999;\n`;\n\nclass NumberContributionLegend extends Component {\n  render() {\n    \n    return (\n      <LegendBox style={{ opacity: this.props.show ? 1 : 0 }}>\n        <h4>\n          # of Contribution \n        </h4>\n        \n        <div className=\"legend-inner\">\n          \n          {\n            _.map(this.props.scale.domain(), (d, i) => {\n              return (\n                <div className=\"legend\" key={i}>\n                  <Circle style={{ backgroundColor: this.props.scale(d) }} />\n                  <Label>\n                    { numberWithDelimiter(d) }\n                  </Label>\n                </div>\n              )\n            })\n          }\n\n        </div>\n      </LegendBox>\n    )\n  }\n}\n\nexport default NumberContributionLegend;","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport mixins from '../../stylesheets/mixins';\nimport { SectionContainer } from '../../stylesheets/components';\n\nconst SubtitleKo = styled.div`\n  ${mixins.BOLD_TYPE}\n  font-size: 0.85em;\n  text-align: center;\n`;\n\nconst IntroContainer = styled(SectionContainer)`\n  background-image: linear-gradient(-180deg, rgba(231, 247, 251, 0.83) 22%, rgba(231, 247, 251, 0.00) 81%);\n`;\n\nconst TitleContainer = styled.div`\n  width: 600px;\n  margin: 0 auto;\n  padding-top: 120px;\n`;\n\nconst H1 = styled.h1`\n  ${mixins.TITLE_TYPE}\n  text-align: center;\n  font-size:2.5em;\n  line-height: 1.2;\n  margin: 10px 0;\n`;\n\nconst SubParagraph = styled.p`\n  ${mixins.BOLD_TYPE}\n  text-align: center;\n  font-size:1.5em;\n  line-height: 1.35;\n  margin-top: 10px;\n`;\n\nconst DateBox = styled.div`\n  ${mixins.LABEL_REGULAR_TYPE}\n  border: 1px solid #CCCCCC;\n  padding: 5px;\n  text-align: center;\n  background-color: white;\n  display: block;\n  font-size:0.8em;\n  line-height:1.5;\n  color: #888;\n\n  text-align: center;\n  margin: 20px auto;\n  width: 105px;\n\n`;\n\nconst Prompt = styled.div`\n  position: absolute;\n  width: 48px;\n  height: 26px;\n  bottom: 3rem;\n  left: 50%;\n  margin-left: -24px;\n  animation: bounce 2s infinite;\n  opacity: ${props => props.titleHeader ? 0 : 1};\n  transition: .5s opacity;\n`;\n\nclass Intro extends Component {\n  render() {\n    let { titleHeader } = this.props;\n    return (\n      <IntroContainer className=\"trigger\" data-action-name=\"changeIntro\" style={{ height: this.props.windowHeight}}>\n      \n        <TitleContainer>\n          <SubtitleKo>\n            북한의 지도 제작자\n          </SubtitleKo>\n\n          <H1>\n            Cartographers <br/>\n            of North Korea\n          </H1>\n\n          <SubParagraph>\n            An analysis of the OpenStreetMap data in North Korea: <br/>\n            Who are the contributors? How and Why did they contribute to North Korea?\n          </SubParagraph>\n\n          <DateBox>\n            May 12th<br/>Wonyoung So\n          </DateBox>\n        </TitleContainer>\n\n        <Prompt titleHeader={titleHeader}>\n          <svg x=\"0px\" y=\"0px\" width=\"48px\" height=\"26px\" viewBox=\"0 0 48 26\" enableBackground=\"new 0 0 48 26\">\n            <g>\n              <path fill=\"#222\" d=\"M24.146,26c-0.53,0-1.039-0.284-1.414-0.659L0.586,3.158c-0.781-0.781-0.781-2.066,0-2.846\n                c0.78-0.781,2.048-0.791,2.828-0.009L24.137,21.02L44.576,0.305c0.776-0.787,2.042-0.796,2.829-0.021\n                c0.786,0.776,0.794,2.042,0.019,2.828L25.57,25.332C25.196,25.711,24.686,26,24.153,26C24.151,26,24.149,26,24.146,26z\"></path>\n            </g>\n          </svg>\n        </Prompt>\n\n      </IntroContainer>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    windowHeight: state.windowHeight,\n    titleHeader: state.titleHeader\n  }\n}\n\nexport default connect(mapStateToProps)(Intro);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport {SectionContainer, NonSticky} from '../../stylesheets/components';\n\nconst IntroContainer = styled(SectionContainer)``;\n\nclass SectionFirst extends Component {\n  render() {\n    return (\n      <IntroContainer style={{ \n        height: this.props.windowHeight * 0.7\n      }} className=\"trigger\" data-action-name=\"changeEmptyMap\">\n        <NonSticky>\n          The population of North Korea only has extremely limited internet access; while a select group of people can access the internet for research purposes, everybody else can only access a countrywide intranet called Kwangmyong.\n        </NonSticky>\n\n      </IntroContainer>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    windowHeight: state.windowHeight\n  }\n}\n\nexport default connect(mapStateToProps)(SectionFirst);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport {SectionContainer, Box, Sticky } from '../../stylesheets/components';\n\nconst SecondContainer = styled(SectionContainer)`\n  padding: 200px 0;\n`;\n\nclass SectionSecond extends Component {\n  componentDidMount(){\n\n  }\n  \n  render() {\n    return (\n      <SecondContainer className=\"trigger\" data-action-name=\"changeChronicleMap\">\n        <Sticky>\n          <Box>\n            For a country that is closed to the internet, the quality of OSM data in North Korea is extraordinary: 324,415 data points drawn by 889 contributors since 2007.\n          </Box>\n        </Sticky>\n\n        \n        <div style={{ height: this.props.windowHeight * 1.5}}>\n        </div>\n      </SecondContainer>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    windowHeight: state.windowHeight\n  }\n}\n\nexport default connect(mapStateToProps)(SectionSecond);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { ContributorsGraph } from '../';\nimport styled from 'styled-components';\nimport mixins from '../../stylesheets/mixins';\nimport {SectionContainer, Box, Sticky} from '../../stylesheets/components';\n\nconst SectionThirdContainer = styled(SectionContainer)`\n`;\n\nconst GradientSticky = styled.div`\n  position: sticky;\n  background-image: linear-gradient(-180deg, rgba(231, 247, 251, 0.83) 22%, rgba(231, 247, 251, 0.00) 81%);\n  top: 0;\n  width: 100%;\n  z-index:2;\n  height: ${props => props.height }px;\n`;\n\nconst NonSticky = styled.div`\n  width: 400px;\n  position:relative;\n  margin: 0 auto;\n  z-index:5;\n  ${mixins.BOLD_TYPE}\n  font-size:1.2em;\n  border: 1px solid #BBB;\n  padding: 10px 15px;\n  background: #E7F7FB;\n  color: black;\n`;\n\nconst StickyGraphArea = styled.div`\n  position:sticky;\n  z-index:4;\n  top: 50%;\n  transform: translate(0, -50%);\n`;\n\nclass SectionThird extends Component {\n  render() {\n    let { windowHeight } = this.props;\n\n    let graphHeight = windowHeight * 0.4 < 400 ? 400 : windowHeight * 0.4;\n\n\n    return (\n      <SectionThirdContainer>\n        <GradientSticky height={this.props.windowHeight} />\n        <NonSticky className=\"trigger\" data-action-name=\"initGraphScene\">\n          Although it is hard to know about the contributors only by the OSM data, but the data shows some characteristics about them. First, the plot shows that the top 10 contributors drew 61 percent of the map, thus forming a power-law graph.\n        </NonSticky>\n\n        <div style={{\n          height: this.props.windowHeight * 0.2\n        }}>\n        </div>\n\n\n        <StickyGraphArea>\n          <ContributorsGraph \n            radius={4}\n            padding={6}\n            width={this.props.windowWidth * 0.8} \n            height={graphHeight} /> \n        </StickyGraphArea>\n        \n        <div style={{\n          height: this.props.windowHeight * 0.8\n        }}>\n        </div>\n        \n        <NonSticky className=\"trigger\" data-action-name=\"changeGraphKorean\">\n          Second, 62% of the contributors labeled map objects in Korean, including the top five contributors.\n        </NonSticky>\n        \n\n        <div style={{\n          height: this.props.windowHeight * 1.5\n        }}>\n        </div>\n\n      </SectionThirdContainer>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    windowWidth: state.windowWidth,\n    windowHeight: state.windowHeight\n  }\n}\n\nexport default connect(mapStateToProps)(SectionThird);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport { ContributorsGraph } from '../';\nimport mixins from '../../stylesheets/mixins';\nimport {SectionContainer, Box, Sticky, NonSticky} from '../../stylesheets/components';\n\nconst SectionFourthContainer = styled(SectionContainer)`\n`;\n\nconst Gutter = styled.div`\n  height: ${props => props.height }px;\n`;\n\nconst StickyBottomGraphContainer = styled.div`\n  position: sticky;\n  top: calc(100% - ${props => props.height * 0.3 + 20}px);\n`;\n\n\nclass SectionFourth extends Component {\n  render() {\n    return (\n      <SectionFourthContainer style={{ height: this.props.windowHeight * 3.5}}>\n        <NonSticky className=\"trigger\" data-action-name=\"initWorldMap\">\n          Contributors' activity can also be estimated by means of OSM changesets, which are a history of each user’s past contributions. Using these changesets, one can see which regions other than North Korea contributors have also worked on. \n        </NonSticky>\n        \n\n        <Gutter height={150} />\n\n        <StickyBottomGraphContainer height={this.props.windowHeight} style={{ height: this.props.windowHeight * 0.3 }}>\n          <ContributorsGraph \n            radius={2.5}\n            padding={3.5}\n            width={this.props.windowWidth * 0.8} \n            height={this.props.windowHeight * 0.3} />\n        </StickyBottomGraphContainer>\n        \n        <Gutter height={this.props.windowHeight * 0.5} />\n\n        <NonSticky className=\"trigger\" data-action-name=\"changeWorldMapHeavyContributor\">\n          For instance, the top 20 contributors who used Korean to label map objects also contributed to the OSM dataset for China, Germany, India, the United States, and South Korea.\n        </NonSticky>  \n        \n\n        <Gutter height={ this.props.windowHeight } />\n\n\n        <NonSticky className=\"trigger\" data-action-name=\"changeWorldMapHeaviestContributor\">\n          For the top five contributors, this list changes slightly: India, Germany, Ukraine, Russia, and Japan.\n        </NonSticky>\n      </SectionFourthContainer>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    windowHeight: state.windowHeight,\n    windowWidth: state.windowWidth\n  }\n}\n\nexport default connect(mapStateToProps)(SectionFourth);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport {SectionContainer, NonSticky} from '../../stylesheets/components';\n\n\nconst SectionFifthContainer = styled(SectionContainer)`\n  background-image: linear-gradient(-180deg, rgba(231, 247, 251, 0.83) 22%, rgba(231, 247, 251, 0.00) 81%);\n`;\n\n\nconst Gutter = styled.div`\n  height: ${props => props.height }px;\n`;\n\nconst NonStickyFinal = styled(NonSticky)`\n  width: 800px;\n`;\n\nconst MethodologyTitle = styled.h4`\n  font-size:0.7em;\n  color: #777;\n  line-height:1.2;\n`;\n\nconst MethodologyPG = styled.p`\n  font-size:0.7em;\n  color: #777;\n  width: 60%;\n`;\n\nclass SectionFifth extends Component {\n  render() {\n    return (\n      <SectionFifthContainer style={{height: this.props.windowHeight}}>\n        <Gutter height={100}></Gutter>\n        <NonStickyFinal className=\"trigger\" data-action-name=\"final\">\n          Although most cartographers of North Korea do not live in the country, they are motivated by issues there. Like data analysts and investigative journalists, they combine information obtained from different sources by a variety of methods to produce place-level knowledge remotely. However, because of the inherent limitations of remotely contributed data, it is questionable whether these strategies can be applied to other crowdsourced projects. We should also consider who ultimately benefits from the OSM process. As mapping is a combination of technical, political, and social capabilities and intentions and open data can be accessed not only by citizens but also by institutions, unexpected outcomes are frequently observed.\n          \n          <Gutter height={50}></Gutter>\n          <MethodologyTitle>\n            * Methodology\n          </MethodologyTitle>\n          <MethodologyPG>\n            OpenStreetMap data is used for the research. The OSM data is under the Open Database License (ODbL) version 1.0 share-alike license. For aggregating the changeset data, I used the centroid point of each changeset boundary. All contributors' screen name is anonymized for protecting the individual privacy.\n          </MethodologyPG>\n        </NonStickyFinal>\n      </SectionFifthContainer>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    windowHeight: state.windowHeight\n  }\n}\n\nexport default connect(mapStateToProps)(SectionFifth);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { InterestingPOIs } from '../';\nimport styled from 'styled-components';\nimport mixins from '../../stylesheets/mixins';\nimport { SectionContainer, Box, Sticky } from '../../stylesheets/components';\nimport interestingPOIs from '../../constants/interesting_pois.json';\nimport _ from 'lodash';\n\nconst SecondContainer = styled(SectionContainer)`\n  margin: 200px 0;\n`;\n\nclass SectionOddPOIs extends Component {\n  render() {\n    var interestingPOIs2 = _.shuffle(interestingPOIs).splice(0, 5);\n\n    return (\n      <SecondContainer>\n        <Sticky className=\"trigger\" data-action-name=\"wrapupChronicleMap\">\n          <Box>\n            It is particularly interesting to note that there are a number of street-level points of interest.\n          </Box>\n        </Sticky>\n        \n        <div style={{ height: this.props.windowHeight}}>\n        </div>\n\n        {\n          _.map(interestingPOIs2, (interestingPOI, i) => {\n            return (\n              <InterestingPOIs {...interestingPOI} key={i}  />\n            )\n          })\n        }\n      </SecondContainer>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    windowHeight: state.windowHeight\n  }\n}\n\nexport default connect(mapStateToProps)(SectionOddPOIs);","import React, { Component } from 'react'\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport { TextVisualizationResponses } from '../';\nimport {SectionContainer,  NonSticky, Gutter } from '../../stylesheets/components';\nimport _ from 'lodash';\n\nconst SectionTextContainer = styled(SectionContainer)`\n  transition: 0.4s all;\n  background: rgba(231, 247, 251);\n  opacity: 1;\n\n  &.hide {\n    opacity: 0;\n    pointer-events: none;\n  }\n`;\n\n\n\nclass SectionText extends Component {\n  render() {\n    let { selectedOsmUserResponse } = this.props;\n    return (\n      <SectionTextContainer className={selectedOsmUserResponse ? \"hide\" : \"\" } style={{ height: 8000}}>\n        <div style={{ height: this.props.windowHeight }}></div>\n    \n\n        <NonSticky className=\"trigger\" data-action-name=\"initTextVisualization\" style={{ zIndex: 11 }}>\n          Thus, I asked all of the contributors to know more about the motivations and strategies. Here are the responses from 211 contributors.\n        </NonSticky>\n        <Gutter h={200} />\n        <TextVisualizationResponses />\n        <Gutter h={500} />\n        <NonSticky className=\"trigger\" data-action-name=\"changeTextVisualizationWhy\" style={{ zIndex: 11 }}>\n          Although the contributors' motivation is mostly for fun and pure curiosity—such as searching for empty space in OSM—, they were motivated by diverse reasons; in particular, with the respect of advocating open mapping, they wanted North Koreans to use the map in the near future, such as for escaping their territory. \n        </NonSticky>\n        <Gutter h={1500} />\n        <NonSticky className=\"trigger\" data-action-name=\"changeTextVisualizationHow\" style={{ zIndex: 11 }}>\n          Contributors mostly use satellite imagery to contribute data to North Korea, as OpenStreetMap provides Microsoft Bing satellite images. However, some contributors have first-hand knowledge as they have been to Pyeongyang. Moreover, they often combine resources on the internet to contribute street-level information to the OSM.\n        </NonSticky>\n         <Gutter h={1500} />\n        <NonSticky className=\"trigger\" data-action-name=\"changeTextVisualizationStory\" style={{ zIndex: 11 }}>\n          Some contributors have been interested in North Korea because of similar national history (German citizens) or personal history, and they have followed media outlets. They have thought about the reunification of the Korean peninsula. You can toggle and click to see individual responses.\n        </NonSticky>\n\n      </SectionTextContainer>\n    )\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    windowHeight: state.windowHeight,\n    selectedOsmUserResponse: !_.isNull(state.selectedOsmUserResponse)\n  }\n}\n\nexport default connect(mapStateToProps)(SectionText);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { MapContainer, TextVisualization, SelectedResponseViewer, TitleHeader, TimelineScroller, CholoplethLegend } from '../components';\nimport { changeGraphKorean, changeIntro,  wrapupChronicleMap, changeEmptyMap, changeChronicleMap, initGraphScene, changeCurrentFeature, changeCurrentTimeStamp, initWorldMap, changeWorldMapHeaviestContributor, changeWorldMapHeavyContributor, addTextCategorySelected, changeTextVisualization, removeAllTextCategories, changeOsmUsersDataStats } from '../actions';\nimport 'intersection-observer';\nimport scrollama from 'scrollama';\nimport { Intro, SectionFirst, SectionSecond, SectionThird, SectionFourth, SectionFifth, SectionOddPOIs, SectionText } from '../components/sections';\nimport _ from 'lodash';\nimport interestingPOIs from '../constants/interesting_pois.json';\nimport { scaleLinear } from 'd3';\nimport axios from 'axios';\n\nconst Fragment = React.Fragment;\n\nclass Home extends Component {\n  constructor(props){\n    super(props);\n\n    this.timeScale = scaleLinear().domain([0, 1]).clamp(true).range([1184971551, 1539016223]);\n    this.introZoomLevelScale = scaleLinear()\n      .domain([\n        375, \n        667, \n        750, \n        800, \n        1440\n      ])\n      .range ([\n        5.129678844315936 - 0.1,\n        5.95692370701329 - 0.1,\n        6.169505942965738 - 0.1,\n        6.285137881074422 - 0.1,\n        7.083247699254196 - 0.1\n      ]);\n\n    this.timelineZoomLevelScale = scaleLinear()\n      .domain([\n        375, \n        667, \n        750, \n        800, \n        1440\n      ])\n      .range ([\n        5.129678844315936,\n        5.95692370701329,\n        6.169505942965738,\n        6.285137881074422,\n        7.083247699254196\n      ]);\n\n    this.worldMapZoomLevelScale = scaleLinear()\n      .domain([\n        375,\n        667,\n        750,\n        800,\n        1440\n      ])\n      .range([\n        0.8913299194094557,\n        0.8913299194094557,\n        1.04073926761343,\n        1.234294902868799,\n        1.234294902868799\n      ]);\n\n  }\n  componentDidMount(){\n    document.body.style.overflowY = \"hidden\";\n    this.loadData();\n  }\n\n  loadData(){\n    axios.all([axios.get('https://nkosm.wonyoung.so/summaries.json')])\n    .then(axios.spread((response) => {\n      if (response.data.success) {\n        this.props.dispatch(changeOsmUsersDataStats(response.data));\n      }\n    }));\n  }\n\n  componentDidUpdate(prevProps, prevState){\n    if (prevProps.mapLoaded !== this.props.mapLoaded && this.props.mapLoaded) {\n\n\n        this.scroller = scrollama();\n        this.scroller.setup({\n          step: '.trigger',\n          container: '.scroll-container',\n          offset: 0.8,\n          order: true,\n          progress: true\n        })\n          .onStepEnter(this.handleStepEnter.bind(this))\n          .onStepProgress(_.throttle(this.handleStepProgress.bind(this), 250))\n          .onStepExit(this.handleStepExit.bind(this));\n      _.delay(() => {\n        window.scroll(0, 0);\n      }, 400);\n      \n\n      document.body.style.overflowY = \"auto\";\n    }\n\n    if (prevProps.windowHeight !== this.props.windowHeight && !_.isUndefined(this.scroller)) {\n      this.scroller.resize();\n    }\n  }\n  checkActive(){\n    // for (var key in this.activeStepByIndex) {\n    //   if (activeStepByIndex[key]) {\n    //     console.log('index ' + key + ' is active');\n        \n    //   }\n    // }\n  }\n\n  handleStepProgress(e){\n    let actionName = e.element.dataset.actionName;\n    if (actionName === \"changeChronicleMap\") {\n      \n      this.props.dispatch(changeCurrentTimeStamp(this.timeScale(e.progress)));\n\n    }\n  }\n\n  handleStepEnter(e){\n    // console.log(e.index);\n    // console.log(e);\n    // console.log(e.index);\n    let { windowHeight } = this.props;\n    let actionName = e.element.dataset.actionName;\n    console.log(actionName, \"enter\");\n    \n    if (!_.isUndefined(actionName)){\n\n      switch(actionName) {\n        case \"changeIntro\": \n          this.props.dispatch(changeIntro({\n            zoom: this.introZoomLevelScale(windowHeight)\n          }));\n          break;\n        case \"changeEmptyMap\":\n          this.props.dispatch(changeEmptyMap({\n            zoom: this.introZoomLevelScale(windowHeight)\n          }));\n          break;\n        case \"changeChronicleMap\":\n          this.props.dispatch(changeChronicleMap({\n            zoom: this.timelineZoomLevelScale(windowHeight)\n          }));\n          break;\n        case \"wrapupChronicleMap\":\n          this.props.dispatch(wrapupChronicleMap());\n          break;\n        case \"changeInterestingPOIs\":\n          \n          let poi = _.find(interestingPOIs, iPoi => {\n            return iPoi.op === e.element.dataset.poiId;\n          });\n          \n          this.props.dispatch(changeCurrentFeature(poi));\n          break;\n        case \"initGraphScene\":\n          this.props.dispatch(initGraphScene({\n            zoom: this.timelineZoomLevelScale(windowHeight)\n          }));\n          break;\n        case \"changeGraphKorean\":\n          this.props.dispatch(changeGraphKorean({\n            zoom: this.timelineZoomLevelScale(windowHeight)\n          }));\n          break;\n        case 'initWorldMap':\n          this.props.dispatch(initWorldMap({\n            zoom: this.worldMapZoomLevelScale(windowHeight)\n          }));\n          break;\n        case 'changeWorldMapHeavyContributor':\n          this.props.dispatch(changeWorldMapHeavyContributor());\n          break;\n        case 'changeWorldMapHeaviestContributor':\n          this.props.dispatch(changeWorldMapHeaviestContributor());\n          break;\n        case 'initTextVisualization':\n          this.props.dispatch(changeTextVisualization(true));\n          this.props.dispatch(removeAllTextCategories());\n          break;\n        case 'changeTextVisualizationWhy':\n          // this.props.dispatch(change)\n          this.props.dispatch(removeAllTextCategories());\n          this.props.dispatch(addTextCategorySelected(1, {id: 1 }));\n          this.props.dispatch(addTextCategorySelected(3, {id: 3 }));\n          this.props.dispatch(addTextCategorySelected(13, {id: 13 }));\n          break;\n        case 'changeTextVisualizationHow':\n          this.props.dispatch(removeAllTextCategories());\n          this.props.dispatch(addTextCategorySelected(7, {id: 7 }));\n          this.props.dispatch(addTextCategorySelected(8, {id: 8 }));\n          this.props.dispatch(addTextCategorySelected(9, {id: 9 }));\n          \n          break;\n        \n        case 'changeTextVisualizationStory':\n\n          this.props.dispatch(removeAllTextCategories());\n          this.props.dispatch(addTextCategorySelected(4, {id: 4 }));\n          this.props.dispatch(addTextCategorySelected(11, {id: 11 }));\n          this.props.dispatch(addTextCategorySelected(15, {id: 15 }));\n\n          break;\n\n        case 'final':\n          this.props.dispatch(changeTextVisualization(false));\n          break;\n        default: \n          break;\n      }\n\n      \n    }\n    \n  }\n\n  handleStepExit(e){\n    // console.log(e.index);\n// console.log(e);\n    let {windowHeight} = this.props;\n\n    let actionName = e.element.dataset.actionName;\n    // console.log(actionName, \"exit\", e.direction);\n    console.log(actionName, \"exit\");\n    if (!_.isUndefined(actionName)) {\n\n      switch (actionName) {\n     \n        case \"changeGraphKorean\":\n          if (e.direction === \"up\") {\n            this.props.dispatch(initGraphScene({\n              zoom: this.timelineZoomLevelScale(windowHeight)\n            }));\n          }\n          break;\n        case 'initWorldMap': \n          if (e.direction === \"up\") {\n            this.props.dispatch(changeGraphKorean({\n              zoom: this.timelineZoomLevelScale(windowHeight)\n            }));\n          }\n          break;\n        case 'initTextVisualization':\n          if (e.direction === \"up\") {\n\n            this.props.dispatch(changeTextVisualization(false));\n          }\n          \n          break;\n         case 'changeTextVisualizationWhy':\n          if (e.direction === \"up\") {\n            this.props.dispatch(changeTextVisualization(true));\n            this.props.dispatch(removeAllTextCategories());\n          }\n          \n          break;\n        case 'changeTextVisualizationHow':\n          if (e.direction === \"up\") {\n            this.props.dispatch(changeTextVisualization(true));\n\n            this.props.dispatch(removeAllTextCategories());\n            this.props.dispatch(addTextCategorySelected(1, {id: 1 }));\n            this.props.dispatch(addTextCategorySelected(3, {id: 3 }));\n            this.props.dispatch(addTextCategorySelected(13, {id: 13 }));\n          }\n          \n          break;\n        case 'changeTextVisualizationStory':\n          if (e.direction === \"up\") {\n            \n          this.props.dispatch(removeAllTextCategories());\n          this.props.dispatch(addTextCategorySelected(7, {id: 7 }));\n          this.props.dispatch(addTextCategorySelected(8, {id: 8 }));\n          this.props.dispatch(addTextCategorySelected(9, {id: 9 }));\n          }\n          \n          break;\n        case 'final':\n          if (e.direction === \"up\") {\n            this.props.dispatch(changeTextVisualization(true));\n\n            this.props.dispatch(removeAllTextCategories());\n            this.props.dispatch(addTextCategorySelected(4, {id: 4 }));\n            this.props.dispatch(addTextCategorySelected(11, {id: 11 }));\n            this.props.dispatch(addTextCategorySelected(15, {id: 15 }));\n          }\n          \n          break;\n        default: \n          break;\n      }\n\n\n    }\n  }\n\n  render() {\n    let {  selectedOsmUserResponse } = this.props;\n\n    return (\n      <Fragment>\n        <div className=\"scroll-container\">\n          <Intro />\n          <SectionFirst />\n          <SectionSecond />\n          <SectionOddPOIs />\n          <SectionThird />\n          <SectionFourth />\n          <SectionText /> \n          <SectionFifth />\n        </div>\n        <TimelineScroller />\n        <TitleHeader />\n        <CholoplethLegend />\n        {\n          !selectedOsmUserResponse ?\n          <TextVisualization /> : null\n        }\n        {\n          selectedOsmUserResponse ? \n          <SelectedResponseViewer /> : null\n        }\n        <MapContainer />\n      </Fragment>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    mapLoaded: state.mapLoaded,\n    windowWidth: state.windowWidth,\n    windowHeight: state.windowHeight,\n    selectedOsmUserResponse: !_.isNull(state.selectedOsmUserResponse)\n  }\n}\n\nexport default connect(mapStateToProps)(Home);","import React, { Component } from 'react';\nimport { windowResize } from './actions';\nimport { connect } from 'react-redux';\nimport { BrowserRouter, Route } from 'react-router-dom';\nimport Home from './pages/Home';\n\nconst Fragment = React.Fragment;\n\nclass App extends Component {\n  componentWillMount(){\n\n  }\n\n  componentDidMount(){\n\n    window.addEventListener('resize', this.resizeHandler.bind(this));\n    this.resizeHandler();\n  }\n\n\n\n\n  resizeHandler(e){\n    this.props.dispatch(windowResize({\n      width: window.innerWidth,\n      height: window.innerHeight\n    }));\n    \n  }\n\n\n  render() {\n\n    return (\n      <BrowserRouter>\n        <Fragment>\n          <Route path={process.env.PUBLIC_URL + '/'} component={Home} />\n        </Fragment>\n      </BrowserRouter>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    width: state.windowWidth,\n    height: state.windowHeight\n  }\n};\n\nexport default connect(mapStateToProps)(App);","import { createStore } from 'redux';\nimport mainReducer from './main';\n\nexport default createStore(mainReducer);\n","import { DEFAULT_STATE } from '../constants/defaults';\nimport _ from 'lodash';\n\nexport default function screenReducer(state = DEFAULT_STATE, action){\n  switch(action.type) {\n    case \"WINDOW_RESIZE\":\n      return {\n        ...state,\n        windowWidth: action.payload.windowWidth,\n        windowHeight: action.payload.windowHeight\n      }\n\n    case 'CHANGE_OSM_USERS_DATA_STATS':\n      return {\n        ...state,\n        osmUsersDataStats: action.payload.osmUsersDataStats\n      }\n    case 'CHANGE_OSM_USER_HISTORIES_IDX':\n      return {\n        ...state,\n        osmUserHistoriesIdx: action.payload.osmUserHistoriesIdx\n      };  \n    case 'CHANGE_OSM_USER_HISTORIES':\n      return {\n        ...state,\n        osmUserHistories: action.payload.osmUserHistories\n      };    \n    case 'CHANGE_OSM_USER_RESPONSE_DATA':\n      return {\n        ...state,\n        osmUsers: action.payload.osmUsers,\n        responseCategories: action.payload.responseCategories\n      }\n    case 'ADD_TEXT_CATEGORY':\n      return {\n        ...state,\n        selectedTextCategory: {\n          ...state.selectedTextCategory,\n          [action.payload.id]: action.payload.textCategoryInfo\n        }\n      }\n    case \"REMOVE_ALL_TEXT_CATEGORIES\":\n      return {\n        ...state,\n        selectedTextCategory: {}\n      }\n    case 'REMOVE_TEXT_CATEGORY':\n      let selectedTextCategory = { ...state.selectedTextCategory };\n\n      delete selectedTextCategory[action.payload.id]\n      return {\n        ...state,\n        selectedTextCategory: selectedTextCategory\n      }\n    case 'CHANGE_TEXT_VISUALIZATION':\n      return {\n        ...state,\n        textVisualization: action.payload.textVisualization\n      }\n    case \"CHANGE_MAP_LOADED\":\n      return {\n        ...state,\n        mapLoaded: action.payload.mapLoaded\n      }\n    case 'CHANGE_INTRO': \n      return {\n        ...state,\n        nkTile: action.payload.nkTile,\n        titleHeader: action.payload.titleHeader,\n        zoom: action.payload.zoom,\n        center: action.payload.center,\n        currentFeature: action.payload.currentFeature\n      }\n    case 'CHANGE_EMPTY_MAP':\n      return {\n        ...state,\n        nkTile: action.payload.nkTile,\n        zoom: action.payload.zoom,\n        center: action.payload.center,\n        timelineUI: action.payload.timelineUI,\n        currentTimeStamp : action.payload.currentTimeStamp,\n        legend : action.payload.legend,\n        titleHeader: action.payload.titleHeader,\n        currentFeature: action.payload.currentFeature\n      };\n    case 'CHANGE_CHRONICLE_MAP':\n      return {\n        ...state,\n        nkTile: action.payload.nkTile,\n        zoom: action.payload.zoom,\n        center: action.payload.center,\n        currentFeature: action.payload.currentFeature,\n        timelineUI: action.payload.timelineUI,\n        legend: action.payload.legend,\n        titleHeader: action.payload.titleHeader\n      };\n    case 'CHANGE_SELECTED_OSM_USER_RESPONSE':\n      return {\n        ...state,\n        selectedOsmUserResponse: action.payload.selectedOsmUserResponse,\n        cholopleth: _.isNull(action.payload.selectedOsmUserResponse),\n        nkTile: !_.isNull(action.payload.selectedOsmUserResponse),\n        osmUserHistoriesIdx: _.isNull(action.payload.selectedOsmUserResponse) ? 0 : state.osmUserHistoriesIdx\n      };\n    case 'WRAPUP_CHRONICLE_MAP':\n      return {\n        ...state,\n        timelineUI: action.payload.timelineUI,\n        currentTimeStamp: action.payload.currentTimeStamp,\n        legend: action.payload.legend,\n        titleHeader: action.payload.titleHeader\n      }\n\n    case 'CHANGE_INTERESTING_POIS':\n      return {\n        ...state\n      };\n    case 'INIT_GRAPH_SCENE':\n      return {\n        ...state,\n        nkTile: action.payload.nkTile,\n        legend: action.payload.legend,\n        timelineUI: action.payload.timelineUI,\n        currentFeature: action.payload.currentFeature,\n        zoom: action.payload.zoom,\n        center: action.payload.center,\n        graphMode: action.payload.graphMode,\n        titleHeader: action.payload.titleHeader\n      };\n    case 'CHANGE_GRAPH_KOREAN':\n      return {\n        ...state,\n        nkTile: action.payload.nkTile,\n        graphMode: action.payload.graphMode,\n        zoom: action.payload.zoom,\n        center: action.payload.center,\n        cholopleth: action.payload.cholopleth,\n        titleHeader: action.payload.titleHeader\n      };\n    case 'INIT_WORLD_MAP':\n      return {\n        ...state,\n        nkTile: action.payload.nkTile,\n        zoom: action.payload.zoom,\n        center: action.payload.center,\n        currentFeature: action.payload.currentFeature,\n        cholopleth: action.payload.cholopleth,\n        choloplethMode: action.payload.choloplethMode, //top20, top5, individual\n        currentIndividual: action.payload.currentIndividual,\n        legend: action.payload.legend,\n        titleHeader: action.payload.titleHeader\n      };\n    case 'CHANGE_WORLD_MAP_HEAVY_CONTRIBUTOR':\n      return {\n        ...state,\n        nkTile: action.payload.nkTile,\n        cholopleth: action.payload.cholopleth,\n        currentFeature: action.payload.currentFeature,\n        choloplethMode: action.payload.choloplethMode, //top20, top5, individual\n        currentIndividual: action.payload.currentIndividual,\n        legend: action.payload.legend\n      };\n    case 'CHANGE_WORLD_MAP_HEAVIEST_CONTRIBUTOR':\n      return {\n        ...state,\n        nkTile: action.payload.nkTile,\n        cholopleth: action.payload.cholopleth,\n        currentFeature: action.payload.currentFeature,\n        choloplethMode: action.payload.choloplethMode, //top20, top5, individual\n        currentIndividual: action.payload.currentIndividual,\n        legend: action.payload.legend,\n        textVisualization: false\n      };\n    case 'CHANGE_WORLD_MAP_INDIVIDUAL':\n      return {\n        ...state,\n        nkTile: action.payload.nkTile,\n        currentFeature: action.payload.currentFeature,\n        currentIndividual: action.payload.currentIndividual        \n      }\n    case \"RESET\":\n      return {\n        ...state\n      }\n    case \"CHANGE_CURRENT_SEQ\":\n      return {\n        ...state,\n        currentSeq: action.payload.currentSeq\n      }\n    case \"CHANGE_CURRENT_TIMESTAMP\":\n      return {\n        ...state,\n        currentTimeStamp: action.payload.currentTimeStamp\n      }\n    case \"CHANGE_CURRENT_FEATURE\":\n      return {\n        ...state,\n        nkTile: true,\n        currentFeature: action.payload.currentFeature,\n        legend: true\n      }\n    default:\n      break;\n  }\n\n  return state;\n};","import React from 'react';\nimport { render } from 'react-dom';\nimport { Provider } from 'react-redux';\nimport App from './App';\nimport AppState from './reducers';\nimport \"./stylesheets/style.scss\";\n\nrender(\n  <Provider store={AppState}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);"],"sourceRoot":""}