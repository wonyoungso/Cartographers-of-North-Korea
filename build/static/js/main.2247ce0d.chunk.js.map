{"version":3,"sources":["actions/index.js","utils/index.js","components/MapContainer.js","components/PageMapContainer.js","components/ContributorInfo.js","components/CenterMarker.js","components/MessageContributorInfo.js","components/ContDistribution.js","components/ChoroplethMap.js","components/YearLegend.js","components/MessageTopInfo.js","stylesheets/mixins.js","stylesheets/components.js","components/InterestingPOIs.js","components/TitleHeader.js","components/ContributorsGraph.js","components/TimelineScroller.js","components/CholoplethLegend.js","components/KoreanLegend.js","components/IndividualInfo.js","constants/defaults.js","components/TextVisualization.js","components/TextVisualizationResponses.js","components/UserResponse.js","components/SelectedResponseViewer.js","components/NumberContributionLegend.js","components/sections/Intro.js","components/sections/SectionFirst.js","components/sections/SectionSecond.js","components/sections/SectionThird.js","components/sections/SectionFourth.js","components/sections/SectionFifth.js","components/sections/SectionOddPOIs.js","components/sections/SectionText.js","pages/Home.js","pages/LandingPage.js","App.js","reducers/index.js","reducers/main.js","index.js"],"names":["changeOsmUserHistories","osmUserHistories","type","payload","changeSelectedOsmUserResponse","selectedOsmUserResponse","addTextCategorySelected","id","textCategoryInfo","changeTextVisualization","textVisualization","initGraphScene","params","nkTile","legend","currentFeature","timelineUI","zoom","center","graphMode","titleHeader","changeGraphKorean","cholopleth","choloplethMode","currentIndividual","changeWorldMapIndividual","individual","changeMapLoaded","mapLoaded","numberWithDelimiter","number","delimiter","separator","parts","toString","split","replace","join","e","String","prototype","toTitleCase","this","txt","charAt","toUpperCase","substr","toLowerCase","randomBetween","low","high","diff","Math","random","MapContainer","window","mapboxgl","accessToken","map","Map","container","refsMapContainer","style","on","handleStyleLoad","bind","handleMoveEnd","handleRender","console","log","_this$props","props","currentTimeStamp","dispatch","addSource","tiles","addLayer","source","source-layer","layout","visibility","paint","line-opacity","line-color","property","stops","filter","fill-opacity","fill-color","circle-radius","circle-color","addWorldMap","resize","url","line-width","prevProps","_this$props2","osmUserHistoriesIdx","nkTileVisibility","isStyleLoaded","setLayoutProperty","_","isNull","stop","flyTo","isUndefined","getLayer","removeLayer","removeSource","updateCurrentFeature","updateCurrentCholopleth","setFilter","updateOsmUserHistory","osmUserHistory","feature4326","toWgs84","features","proj4","bbox","turf","buffered","buffer","bboxPolygon","finalBbox","data","circle-opacity","getSource","setData","fitBounds","padding","top","bottom","left","right","choloplethVisibility","currentCountryJSON","country_counts","country_analysis_all","country_analysis_top_20","country_analysis_top_5","updateCurrentCountryJSON","expression","colorScale","d3","domain","range","extent","cc","count","finalDomain","each","push","world_id","setPaintProperty","feature","geometry","coordinates","zoomInData","_this","delay","nextNum","length","_this2","windowHeight","react_default","a","createElement","ref","c","className","height","Component","connect","state","windowWidth","currentSeq","isFirstTransition","PageMapContainer","refsPageMapContainer","interactive","newProps","Fragment","React","ContributorInfo","osm_user","moment","unix","osm_timestamp","format","rank","CenterMarker","name","MessageContributorInfo","countryCounts","sortedCounts","sortBy","reverse","splicedCounts","sc","splice","sp","i","nameKo","find","worldData","wd","name_ko","nameEn","name_en","topThreeCountries","getTopThreeCountries","components_ContDistribution","width","allCount","all_count","total_contribution_count","key","concat","ChoroplethMap","HIST","value","ContDistribution","d3Render","xDomain","first","last","yDomain","h","xScale","yScale","clamp","svg","svgContainer","selectAll","remove","lineDraw","x","d","y","append","attr","xAxis","enter","text","children","osm_id","ChoroplethMap_Fragment","val","backgroundColor","Number","toFixed","YearLegend","yearScale","opacity","MessageTopInfo","MessageTopInfo_Fragment","mixins","SectionContainer","styled","section","_templateObject","Gutter","div","_templateObject2","Sticky","_templateObject3","NonSticky","_templateObject4","Box","_templateObject5","InterestingPOIsContainer","InterestingPOIs_templateObject","POIBox","InterestingPOIs_templateObject2","TitleArea","InterestingPOIs_templateObject3","Label","h4","InterestingPOIs_templateObject4","Value","InterestingPOIs_templateObject5","Date","_templateObject6","Disclaimer","_templateObject7","InterestingPOIs","data-action-name","data-poi-id","op","InterestingPOIs_Date","HeaderContainer","TitleHeader_templateObject","TitleHeader","TitleHeader_templateObject2","ContributorsGraphBox","ContributorsGraph_templateObject","Title","ContributorsGraph_templateObject2","Tooltip","ContributorsGraph_templateObject3","ToolTipLabelArea","ContributorsGraph_templateObject4","ToolTipLabel","ContributorsGraph_templateObject5","ToolTipValue","ContributorsGraph_templateObject6","ContributorsGraph","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","osmUsersData","osm_stats","stats","osm_users","margin","refGraph","createRef","currentHover","simulation","force","strength","tick","_this3","current","initSimulation","xAxisFunction","g","ticks","tickFormat","LN10","abs","round","tickSizeOuter","circleGraph","radius","setState","objectSpread","cx","cy","transition","circleColor","setCircleColor","_this4","d3Init","korean","_this5","_this$props3","d3Update","_this$props4","floor","korean_pct","components_KoreanLegend","show","components_NumberContributionLegend","scale","components_IndividualInfo","Container","TimelineScroller_templateObject","RightStat","TimelineScroller_templateObject2","TimelineScroller_templateObject3","p","TimelineScroller_templateObject4","Timeline","TimelineScroller_templateObject5","Line","TimelineScroller_templateObject6","color","TimelineScroller_templateObject7","TimelineScroller","timeScale","scaleLinear","TimelineScroller_Fragment","TimelineScroller_Label","TimelineScroller_Value","TimelineScroller_Date","components_YearLegend","CholoplethLegend","result","LegendBox","KoreanLegend_templateObject","RedCircle","KoreanLegend_templateObject2","KoreanLegend_templateObject3","KoreanLegend","KoreanLegend_Label","IndividualInfo_templateObject","Area","IndividualInfo_templateObject2","IndividualInfo_templateObject3","IndividualInfo_templateObject4","SmallSize","span","IndividualInfo_templateObject5","CloseButton","IndividualInfo_templateObject6","IndividualInfo","worldIds","country","worldId","label","world_data","w","top5Countries","getTop5Countries","IndividualInfo_Box","onClick","handleClick","href","IndividualInfo_Label","IndividualInfo_Value","DEFAULT_STATE","osmUsers","responseCategories","selectedTextCategory","CATEGORIES_COLORS","SUBCATEGORY_SELECT","1","2","3","Bar","TextVisualization_templateObject","CategoryLink","TextVisualization_templateObject2","UnCategoryLink","TextVisualization_templateObject3","ArrowArea","TextVisualization_templateObject4","TextVisualization","axios","all","get","then","spread","response","success","response_categories","subCategories","groupBy","subcategory_id","rc","TextVisualization_Fragment","categories","handleAddTextCategory","category_name","src","process","GridBox","TextVisualizationResponses_templateObject","Main","TextVisualizationResponses_templateObject2","TextVisualizationResponses","fontSizeScale","lineHeightScale","ou","components_UserResponse","assign","fontSize","lineHeight","ceil","TextSpan","UserResponse_templateObject","RespArea","UserResponse_templateObject2","UserResponse","responses","selected","category_id","resp","RespContainer","SelectedResponseViewer_templateObject","DataInfoContainer","SelectedResponseViewer_templateObject2","SelectedResponseViewer_templateObject3","SelectedResponseViewer_templateObject4","SelectedResponseViewer_templateObject5","SelectedResponseViewer_templateObject6","SelectedResponseViewer_templateObject7","CategorySpan","_templateObject8","RespInfoArea","_templateObject9","SelectedResponseViewer","intervalId","document","body","overflow","loadOsmUserSampleData","histories","catch","error","respCategories","uniq","compact","respCategory","osmHistory","selectedColorCategories","getSelectedColorCategories","SelectedResponseViewer_Fragment","handleClose","alt","r","bgColor","scc","SelectedResponseViewer_POIBox","SelectedResponseViewer_TitleArea","SelectedResponseViewer_Label","SelectedResponseViewer_Value","properties","SelectedResponseViewer_Date","NumberContributionLegend_templateObject","Circle","NumberContributionLegend_templateObject2","NumberContributionLegend_templateObject3","NumberContributionLegend","NumberContributionLegend_LegendBox","NumberContributionLegend_Label","SubtitleKo","Intro_templateObject","IntroContainer","Intro_templateObject2","TitleContainer","Intro_templateObject3","H1","h1","Intro_templateObject4","SubParagraph","Intro_templateObject5","DateBox","Intro_templateObject6","Prompt","Intro_templateObject7","Intro","viewBox","enableBackground","fill","SectionFirst_templateObject","SectionFirst","SectionFirst_IntroContainer","SecondContainer","SectionSecond_templateObject","SectionSecond","SectionThirdContainer","SectionThird_templateObject","GradientSticky","SectionThird_templateObject2","SectionThird_templateObject3","StickyGraphArea","SectionThird_templateObject4","SectionThird","graphHeight","SectionThird_NonSticky","components_ContributorsGraph","SectionFourthContainer","SectionFourth_templateObject","SectionFourth_templateObject2","StickyBottomGraphContainer","SectionFourth_templateObject3","SectionFourth","SectionFourth_Gutter","SectionFifthContainer","SectionFifth_templateObject","SectionFifth_templateObject2","NonStickyFinal","SectionFifth_templateObject3","MethodologyTitle","SectionFifth_templateObject4","MethodologyPG","SectionFifth_templateObject5","SectionFifth","SectionFifth_Gutter","SectionOddPOIs_templateObject","SectionOddPOIs","interestingPOIs2","shuffle","interestingPOIs","SectionOddPOIs_SecondContainer","interestingPOI","components_InterestingPOIs","SectionTextContainer","SectionText_templateObject","SectionText","SectionText_templateObject2","zIndex","components_TextVisualizationResponses","Home","introZoomLevelScale","timelineZoomLevelScale","worldMapZoomLevelScale","overflowY","prevState","scroller","scrollama","setup","step","offset","order","progress","onStepEnter","handleStepEnter","onStepProgress","throttle","handleStepProgress","onStepExit","handleStepExit","scroll","element","dataset","actionName","changeEmptyMap","changeChronicleMap","poi","iPoi","poiId","initWorldMap","direction","Home_Fragment","sections_Intro","sections_SectionFirst","sections_SectionSecond","sections_SectionOddPOIs","sections_SectionThird","sections_SectionFourth","sections_SectionText","sections_SectionFifth","components_TimelineScroller","components_TitleHeader","components_CholoplethLegend","components_TextVisualization","components_SelectedResponseViewer","components_MapContainer","LandingPage_templateObject","LandingPage_templateObject2","LandingPage_templateObject3","AppLink","Link","LandingPage_templateObject4","BackgroundContainer","LandingPage_templateObject5","LandingPage","LandingPage_Container","LandingPage_SubtitleKo","LandingPage_H1","to","frameborder","allowFullscreen","App","addEventListener","resizeHandler","dimension","innerWidth","innerHeight","BrowserRouter","App_Fragment","Route","path","component","createStore","arguments","undefined","action","defineProperty","render","es","store","AppState","src_App","getElementById"],"mappings":"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","file":"static/js/main.2247ce0d.chunk.js","sourcesContent":["\n\nexport const reset = () => {\n  return {\n    type: 'RESET',\n    payload: {}\n  }\n}\n\nexport const removeAllTextCategories = () => {\n  return {\n    type: \"REMOVE_ALL_TEXT_CATEGORIES\",\n    payload: {\n      \n    }\n  }\n}\nexport const changeOsmUserHistories = (osmUserHistories) => {\n  return {\n    type: 'CHANGE_OSM_USER_HISTORIES',\n    payload: {\n      osmUserHistories: osmUserHistories\n    }\n  }\n}\n\nexport const changeOsmUserHistoriesIdx = (osmUserHistoriesIdx) => {\n  return {\n    type: 'CHANGE_OSM_USER_HISTORIES_IDX',\n    payload: {\n      osmUserHistoriesIdx: osmUserHistoriesIdx\n    }\n  }\n}\n\n\nexport const changeSelectedOsmUserResponse = (selectedOsmUserResponse) => {\n  return {\n    type: 'CHANGE_SELECTED_OSM_USER_RESPONSE',\n    payload: {\n      selectedOsmUserResponse: selectedOsmUserResponse\n    }\n  }\n}\n\n// export const \nexport const changeOsmUserReponseData = (osmUsers, responseCategories) => {\n  return {\n    type: 'CHANGE_OSM_USER_RESPONSE_DATA',\n    payload: {\n      osmUsers: osmUsers,\n      responseCategories: responseCategories\n    }\n  }\n}\n\n\nexport const addTextCategorySelected = (id, textCategoryInfo) => {\n  return {\n    type: 'ADD_TEXT_CATEGORY',\n    payload: {\n      id: id,\n      textCategoryInfo: textCategoryInfo\n    }\n  }\n}\nexport const removeTextCategorySelected = (id) => {\n  return {\n    type: 'REMOVE_TEXT_CATEGORY',\n    payload: {\n      id: id\n    }\n  }\n}\n\n\nexport const changeTextVisualization = (textVisualization) => {\n  return {\n    type: 'CHANGE_TEXT_VISUALIZATION',\n    payload: {\n      textVisualization: textVisualization\n    }\n  }\n}\n\n\nexport const changeIntro = (params) => {\n  return {\n    type: 'CHANGE_INTRO',\n    payload: {\n      nkTile: false,\n      zoom: params.zoom,\n      center: [127.09741740583831, 40.395224876339796],\n      timelineUI: false,\n      currentTimeStamp: 0,\n      legend: false,\n      titleHeader: false,\n      currentFeature: null\n    }\n  }\n}\n\nexport const changeEmptyMap = (params) => {\n  return {\n    type: 'CHANGE_EMPTY_MAP',\n    payload: {\n      nkTile: false,\n      zoom: params.zoom,\n      center: [127.09741740583831, 40.395224876339796],\n      timelineUI: false,\n      currentTimeStamp: 0,\n      legend: false,\n      titleHeader: true,\n      currentFeature: null\n    }\n  }\n};\n\nexport const wrapupChronicleMap = () => {\n  return {\n    type: 'WRAPUP_CHRONICLE_MAP',\n    payload: {\n      timelineUI: false,\n      currentTimeStamp : 1539016223,\n      legend: false,\n      titleHeader: true\n    }\n  }\n}\n\nexport const changeChronicleMap = (params) => {\n  return {\n    type: 'CHANGE_CHRONICLE_MAP',\n    payload: {\n      nkTile: true,\n      zoom: params.zoom,\n      center: [127.31301436214687, 40.48099092278639],\n      currentFeature: null,\n      timelineUI: true,\n      legend: true,\n      titleHeader: true\n    }\n  }\n};\n\nexport const changeInterestingPOIs = () => {\n  return {\n    type: 'CHANGE_INTERESTING_POIS',\n    payload: {\n      nkTile: true,\n      titleHeader: true\n    }\n  }\n}\n\nexport const initGraphScene = (params) => {\n  return {\n    type: 'INIT_GRAPH_SCENE',\n    payload: {\n      nkTile: true,\n      legend : false,\n      currentFeature : null,\n      timelineUI: false,\n      zoom: params.zoom,\n      center: [127.31301436214687, 40.48099092278639],\n      graphMode: \"all\",\n      titleHeader: true\n    }\n  }\n};\n\nexport const changeGraphKorean = (params) => {\n  return {\n    type: 'CHANGE_GRAPH_KOREAN',\n    payload: {\n      nkTile : true,\n      graphMode: \"korean\",\n      zoom: params.zoom,\n      center: [127.31301436214687, 40.48099092278639],\n      cholopleth: false,\n      choloplethMode: \"all\", //top20, top5, individual\n      currentIndividual: null,\n      currentFeature: null,\n      titleHeader: true\n    }\n  }\n};\n\nexport const initWorldMap = (params) => {\n  return {\n    type: 'INIT_WORLD_MAP',\n    payload: {\n      nkTile: false,\n      cholopleth: true,\n      choloplethMode: \"all\", //top20, top5, individual\n      currentIndividual: null,\n      currentFeature: null,\n      titleHeader: true,\n      legend: false,\n      zoom : params.zoom,\n      center: [152.4583090179674, 18.892423140497797]\n    }\n  }\n};\n\nexport const changeWorldMapHeavyContributor = () => {\n  return {\n    type: 'CHANGE_WORLD_MAP_HEAVY_CONTRIBUTOR',\n    payload: {\n      cholopleth: true,\n      choloplethMode: \"top20\", //top20, top5, individual\n      currentIndividual: null,\n      currentFeature: null,\n      legend: false,\n      textVisualization: false\n    }\n  }\n};\n\nexport const changeWorldMapHeaviestContributor = () => {\n  return {\n    type: 'CHANGE_WORLD_MAP_HEAVIEST_CONTRIBUTOR',\n    payload: {\n      cholopleth: true,\n      choloplethMode: \"top5\", //top20, top5, individual\n      currentIndividual: null,\n      currentFeature: null,\n      legend: false,\n      textVisualization: false\n    }\n  }\n};\n\nexport const changeWorldMapIndividual = (individual) => {\n  return {\n    type: 'CHANGE_WORLD_MAP_INDIVIDUAL',\n    payload: {\n      cholopleth: true,\n      currentIndividual: individual,\n      currentFeature: null,\n      legend: false,\n      textVisualization: false\n    }\n  }\n};\n\nexport const windowResize = (dimension) => {\n  return {\n    type: 'WINDOW_RESIZE',\n    payload: {\n      windowWidth: dimension.width,\n      windowHeight: dimension.height\n    }\n  }\n}\n\nexport const changeMapLoaded = (mapLoaded) => {\n  return {\n    type: 'CHANGE_MAP_LOADED',\n    payload: {\n      mapLoaded: mapLoaded\n    }\n  }\n}\n\nexport const changeCurrentSeq = (currentSeq) => {\n  return {\n    type: 'CHANGE_CURRENT_SEQ',\n    payload: {\n      currentSeq: currentSeq\n    }\n  }\n}\n\nexport const changeCurrentFeature = (currentFeature) => {\n  return {\n    type: 'CHANGE_CURRENT_FEATURE',\n    payload: {\n      currentFeature: currentFeature,\n      timelineUI: false,\n      currentTimeStamp: 1539016223,\n      legend: true,\n      titleHeader: true\n    }\n  }\n}\n\nexport const changeCurrentTimeStamp = (currentTimeStamp) => {\n  return {\n    type: 'CHANGE_CURRENT_TIMESTAMP',\n    payload: {\n      currentTimeStamp: currentTimeStamp\n    }\n  }\n}\n\nexport const changeDataLoaded = (dataLoaded) => {\n  return {\n    type: 'CHANGE_DATA_LOADED',\n    payload: {\n      dataLoaded: dataLoaded\n    }\n  }\n}","import _ from 'lodash';\nimport axios from 'axios';\n\n\nexport const constrain = (amt, low, high) => {\n  return (amt < low) ? low : ((amt > high) ? high : amt);\n}\n\n\n\n\nexport const numberWithDelimiter = (number, delimiter, separator) => {\n  try {\n    var delimiter = delimiter || \",\";\n    var separator = separator || \".\";\n    \n    var parts = number.toString().split('.');\n    parts[0] = parts[0].replace(/(\\d)(?=(\\d\\d\\d)+(?!\\d))/g, \"$1\" + delimiter);\n    return parts.join(separator);\n  } catch(e) {\n    return number\n  }\n};\n\nexport const getMetaContent = (name) => {\n  var metas = document.getElementsByTagName('meta');\n  let result = \"\"\n  _.each(metas, (meta) => {\n    if (meta.getAttribute(\"name\") == name) {\n      result = meta.getAttribute(\"content\");\n    }\n  });\n\n  return result;\n}\n\nString.prototype.toTitleCase = function () {\n    return this.replace(/\\w\\S*/g, function(txt){return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();});\n};\n\n\nexport const randomBetween = (low, high) => {\n  if (low >= high) return low;\n  var diff = high - low;\n  return Math.random() * diff + low;\n};\n\nexport const map = (value, start1,  stop1, start2,  stop2) => {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { changeMapLoaded, changeCurrentSeq, changeOsmUserHistoriesIdx } from '../actions';\nimport { LayerGenerator } from './';\nimport { toWgs84 }  from 'reproject';\nimport proj4 from 'proj4';\nimport turf from 'turf';\nimport { randomBetween } from '../utils';\nimport country_analysis_all from '../constants/country_analysis_all.json';\nimport country_analysis_top_20 from '../constants/country_analysis_top_20.json';\nimport country_analysis_top_5 from '../constants/country_analysis_top_5.json';\nimport * as d3 from 'd3';\nimport _ from 'lodash';\n\nclass MapContainer extends Component {\n\n  componentDidMount() {\n    window.mapboxgl.accessToken = 'pk.eyJ1Ijoic2Vuc2VhYmxlIiwiYSI6ImxSNC1wc28ifQ.hst-boAjFCngpjzrbXrShw';\n\n    this.map = new window.mapboxgl.Map({\n      container: this.refsMapContainer,\n      style: 'mapbox://styles/senseable/cjqd080el9i9y2rl7aarmzsbu',\n      zoom: 6.2,\n      // minZoom: 4,\n      center: [127.1205757172753, 38.76675314095931],\n      // interactive: false\n\n    });\n\n\n    window.map = this.map;\n    this.map.on('style.load', this.handleStyleLoad.bind(this));\n    this.map.on('moveend', this.handleMoveEnd.bind(this));\n    this.map.on('styledata', this.handleRender.bind(this));\n    \n    \n  }\n\n  handleRender(e){\n  }\n  \n  handleStyleLoad(e) {\n    console.log(\"load\");\n    let { currentFeature, currentTimeStamp } = this.props;\n    this.props.dispatch(changeMapLoaded(true));\n  \n    this.map.addSource('nk-line', {\n      type: 'vector',\n      tiles: ['https://tiles.wonyoung.so/services/vector-tiles/nk_osm_line/{z}/{x}/{y}.pbf']\n    })\n\n    this.map.addSource('nk-polygon', {\n      type: 'vector',\n      tiles: ['https://tiles.wonyoung.so/services/vector-tiles/nk_osm_polygon/{z}/{x}/{y}.pbf']\n    })\n  \n    this.map.addSource('nk-point', {\n      type: 'vector',\n      tiles: ['https://tiles.wonyoung.so/services/vector-tiles/nk_osm_point/{z}/{x}/{y}.pbf;']\n    })\n    \n    this.map.addLayer({\n      \"id\": \"nk-line-layer\",\n      \"source\": \"nk-line\",\n      \"source-layer\": \"nk_osm_line_4326\",\n      \"type\": \"line\",\n      \"layout\": {\n        'visibility': 'none'\n      },\n      \"paint\": {\n        'line-opacity': 0.25,\n        'line-color':  {\n          property: 't',\n          stops: [\n            [1184972887, \"#ffffcc\"],\n            [1346511620, \"#d6efc2\"],\n            [1360958163, \"#acdeb7\"],\n            [1378200802, \"#81ceba\"],\n            [1395305792, \"#56bec1\"],\n            [1438380051, \"#3caac2\"],\n            [1479834657, \"#3391bc\"],\n            [1502367226, \"#2b77b4\"],\n            [1510168743, \"#2855a4\"],\n            [1516131630, \"#253494\"]\n          ]\n        }\n      },\n      \"filter\": [\"<\", 't', 1384972887]\n    }, 'place-city-sm');\n\n    this.map.addLayer({\n      \"id\": \"nk-polygon-layer\",\n      \"source\": \"nk-polygon\",\n      \"source-layer\": \"nk_osm_polygon_4326\",\n      \"type\": \"fill\",\n      \"layout\": {\n        'visibility': 'none'\n      },\n      \"paint\": {\n        'fill-opacity': 0.5,\n        'fill-color':  {\n          property: 't',\n          stops: [\n            [1184972887, \"#ffffcc\"],\n            [1346511620, \"#d6efc2\"],\n            [1360958163, \"#acdeb7\"],\n            [1378200802, \"#81ceba\"],\n            [1395305792, \"#56bec1\"],\n            [1438380051, \"#3caac2\"],\n            [1479834657, \"#3391bc\"],\n            [1502367226, \"#2b77b4\"],\n            [1510168743, \"#2855a4\"],\n            [1516131630, \"#253494\"]\n          ]\n        }\n      },\n      \"filter\": [\"<\", 't', 1384972887]\n    }, 'place-city-sm');\n\n    this.map.addLayer({\n      \"id\": \"nk-point-layer\",\n      \"source\": \"nk-point\",\n      \"source-layer\": \"nk_osm_point_4326\",\n      \"type\": \"circle\",\n      \"layout\": {\n        'visibility': 'none'\n      },\n      \"paint\": {\n        'circle-radius': 2,\n        'circle-color':  {\n          property: 't',\n          stops: [\n            [1184972887, \"#ffffcc\"],\n            [1346511620, \"#d6efc2\"],\n            [1360958163, \"#acdeb7\"],\n            [1378200802, \"#81ceba\"],\n            [1395305792, \"#56bec1\"],\n            [1438380051, \"#3caac2\"],\n            [1479834657, \"#3391bc\"],\n            [1502367226, \"#2b77b4\"],\n            [1510168743, \"#2855a4\"],\n            [1516131630, \"#253494\"]\n          ]\n        }\n      },\n      \"filter\": [\"<\", 't', 1384972887]\n    }, 'place-city-sm');\n\n    this.addWorldMap();\n    this.map.resize();\n  }\n\n  addWorldMap(){\n    this.map.addSource(\"world-map-source\", {\n      type: 'vector',\n      url: 'mapbox://senseable.8x6k6499'\n    });\n\n    this.map.addLayer({\n      \"id\": \"world-map-layer\",\n      \"source\": \"world-map-source\",\n      \"source-layer\": \"world_assoc-c3znvj\",\n      \"type\": \"fill\",\n      \"layout\": {\n        'visibility': 'none'\n      },\n      \"paint\": {\n        'fill-opacity': 0.7,\n        'fill-color': '#FFFFFF'\n      }\n    }, 'waterway-label');\n\n    this.map.addLayer({\n      \"id\": \"world-map-line-layer\",\n      \"source\": \"world-map-source\",\n      \"source-layer\": \"world_assoc-c3znvj\",\n      \"type\": \"line\",\n      \"layout\": {\n        'visibility': 'none'\n      },\n      \"paint\": {\n        'line-opacity': 0.2,\n        'line-color': '#BBB',\n        'line-width': 1\n      }\n    }, 'waterway-label');\n\n  }\n\n\n  componentDidUpdate(prevProps){\n    let { nkTile, cholopleth, currentFeature, zoom, center, currentTimeStamp, currentIndividual, choloplethMode, selectedOsmUserResponse, osmUserHistories, osmUserHistoriesIdx } = this.props;\n\n\n    let nkTileVisibility = nkTile ? 'visible' : 'none';\n\n    if (window.map.isStyleLoaded()){\n      this.map.resize();\n  \n      this.map.setLayoutProperty('nk-line-layer', 'visibility', nkTileVisibility);\n      this.map.setLayoutProperty('nk-polygon-layer', 'visibility', nkTileVisibility);\n      this.map.setLayoutProperty('nk-point-layer', 'visibility', nkTileVisibility);\n  \n      // console.log(\"currentFeature\", currentFeature);\n      if (_.isNull(currentFeature)) {\n        this.map.stop();\n        this.map.flyTo({ center: center, zoom: zoom });\n        if (!_.isUndefined(this.map.getLayer(\"currentFeature-point\"))) {\n  \n          this.map.removeLayer(\"currentFeature-point\");\n          this.map.removeLayer(\"currentFeature-line\");\n          this.map.removeLayer(\"currentFeature-fill\");\n          this.map.removeSource(\"currentFeature\");\n        }\n      } else {\n        this.updateCurrentFeature(currentFeature);\n      }\n  \n      \n      this.updateCurrentCholopleth(cholopleth, choloplethMode, currentIndividual);\n  \n      this.map.setFilter('nk-line-layer', [\"<\", \"t\", currentTimeStamp]);\n      this.map.setFilter('nk-polygon-layer', [\"<\", \"t\", currentTimeStamp]);\n      this.map.setFilter('nk-point-layer', [\"<\", \"t\", currentTimeStamp]);  \n\n      if (_.isNull(prevProps.selectedOsmUserResponse) && !_.isNull(this.props.selectedOsmUserResponse)){\n        \n        this.map.stop();\n        this.map.flyTo({ center: [127.1205757172753, 38.76675314095931], zoom: 6.2 });\n      \n      } else if (!_.isNull(prevProps.selectedOsmUserResponse) && _.isNull(this.props.selectedOsmUserResponse)) {\n\n        this.map.stop();\n        this.map.flyTo({ center: center, zoom: zoom });\n      }\n\n    }\n\n\n    if (!_.isNull(osmUserHistories)) {\n      if (!_.isUndefined(osmUserHistories[osmUserHistoriesIdx])){\n        this.updateOsmUserHistory(osmUserHistories[osmUserHistoriesIdx]);\n      }\n    } else {\n      if (!_.isUndefined(this.map.getLayer('osm-user-history'))){\n        this.map.removeLayer('osm-user-history');\n        this.map.removeLayer('osm-user-history-circle');\n        this.map.removeSource('osm-user-history-source');\n\n        this.map.removeLayer('osm-user-history-bbox');\n        this.map.removeSource('osm-user-history-bbox-source');\n      }\n    }\n\n    \n  }\n\n  updateOsmUserHistory(osmUserHistory){\n\n    \n    let feature4326 = toWgs84(osmUserHistory.features[0], proj4('EPSG:3857'));\n\n    let bbox = turf.bbox(feature4326);\n    let buffered = turf.buffer(turf.bboxPolygon(bbox), 1, \"miles\");\n    let finalBbox = turf.bbox(buffered)\n\n\n    // if (window.map.isStyleLoaded()){\n\n      if (_.isUndefined(this.map.getLayer('osm-user-history'))){\n        // var bboxPolygon = turf.bboxPolygon(bbox);\n        // console.log(bboxPolygon);\n\n        this.map.addSource(\"osm-user-history-bbox-source\", {\n          type: 'geojson',\n          data: turf.bboxPolygon(finalBbox)\n        });\n\n        this.map.addLayer({\n          'id': 'osm-user-history-bbox',\n          'type': 'line',\n          'source': \"osm-user-history-bbox-source\",\n          'layout': {},\n          'paint': {\n            'line-color': '#FF0000',\n            'line-opacity': 0.8\n          }\n        });\n\n        this.map.addSource(\"osm-user-history-source\", {\n          type: 'geojson',\n          data: feature4326\n        });\n\n        this.map.addLayer({\n          'id': 'osm-user-history',\n          'type': 'line',\n          'source': \"osm-user-history-source\",\n          'layout': {},\n          'paint': {\n            'line-color': '#FF0000',\n            'line-opacity': 0.8\n          },\n          \"filter\": [\"in\", \"$type\", \"Polygon\", \"LineString\"]\n        });\n\n        this.map.addLayer({\n          'id': 'osm-user-history-circle',\n          'type': 'circle',\n          'source': \"osm-user-history-source\",\n          'layout': {},\n          'paint': {\n            'circle-color': '#FF0000',\n            'circle-opacity': 0.8\n          },\n          \"filter\": [\"==\", \"$type\", \"Point\"]\n        });\n\n      } else {\n\n        this.map.getSource('osm-user-history-source').setData(feature4326);\n        this.map.getSource('osm-user-history-bbox-source').setData(turf.bboxPolygon(finalBbox));\n        \n        \n      }\n\n    // }\n    \n\n    try {\n\n      this.map.fitBounds([[finalBbox[0], finalBbox[1]],\n      [finalBbox[2], finalBbox[3]]], {\n          padding: { top: 100, bottom: 100, left: 100, right: 100 }\n        }, { osmUserHistory: true });\n    } catch (e) {\n      this.handleMoveEnd({ osmUserHistory: true });\n    }\n  }\n\n  updateCurrentCholopleth(cholopleth, choloplethMode, currentIndividual) {\n\n    // turning on and off \n    let choloplethVisibility = cholopleth ? 'visible' : 'none';\n\n    this.map.setLayoutProperty(\"world-map-layer\", 'visibility', choloplethVisibility);\n    this.map.setLayoutProperty(\"world-map-line-layer\", 'visibility', choloplethVisibility);\n\n    let currentCountryJSON = null;\n\n    if (!_.isNull(currentIndividual)) {\n      // debugger;\n      currentCountryJSON = currentIndividual;\n\n    } else if (choloplethMode === \"all\") {\n\n      currentCountryJSON = { \n        country_counts: country_analysis_all \n      };\n\n    } else if (choloplethMode === \"top20\"){\n      \n      currentCountryJSON = {\n        country_counts: country_analysis_top_20\n      };\n\n    } else { // top5\n      \n      currentCountryJSON = {\n        country_counts: country_analysis_top_5\n      };\n\n    }\n\n    if (!_.isNull(currentCountryJSON) && cholopleth) {\n      this.updateCurrentCountryJSON(currentCountryJSON);\n    }\n\n  }\n\n  updateCurrentCountryJSON(currentCountryJSON) {\n    var expression = [\"match\", [\"get\", \"py_id\"]];\n\n    let colorScale = d3.scaleLinear()\n      .domain([1184972887,\n        1346511620,\n        1360958163,\n        1378200802,\n        1395305792,\n        1438380051,\n        1479834657,\n        1502367226,\n        1510168743,\n        1516131630])\n      .range([\"#ffffcc\",\n        \"#d6efc2\",\n        \"#acdeb7\",\n        \"#81ceba\",\n        \"#56bec1\",\n        \"#3caac2\",\n        \"#3391bc\",\n        \"#2b77b4\",\n        \"#2855a4\",\n        \"#253494\"])\n\n    var extent = d3.extent(currentCountryJSON.country_counts, cc => {\n      return cc.count;\n    })\n\n\n    var finalDomain = [extent[0],\n    extent[0] + (extent[1] - extent[0]) / 9 * 1,\n    extent[0] + (extent[1] - extent[0]) / 9 * 2,\n    extent[0] + (extent[1] - extent[0]) / 9 * 3,\n    extent[0] + (extent[1] - extent[0]) / 9 * 4,\n    extent[0] + (extent[1] - extent[0]) / 9 * 5,\n    extent[0] + (extent[1] - extent[0]) / 9 * 6,\n    extent[0] + (extent[1] - extent[0]) / 9 * 7,\n    extent[0] + (extent[1] - extent[0]) / 9 * 8,\n    extent[0] + (extent[1] - extent[0]) / 9 * 9];\n\n\n    colorScale.domain(finalDomain);\n\n    _.each(currentCountryJSON.country_counts, cc => {\n\n      expression.push(cc.world_id, colorScale(cc.count));\n    });\n\n\n    expression.push(\"rgba(0,0,0,0)\");\n\n    this.map.setPaintProperty(\"world-map-layer\", \"fill-color\", expression);\n  }\n\n  updateCurrentFeature(currentFeature) {\n\n      let feature4326 = toWgs84(currentFeature.feature, proj4('EPSG:3857'));\n\n\n      if (_.isUndefined(this.map.getSource('currentFeature'))) {\n        this.map.addSource('currentFeature', {\n          type: 'geojson',\n          data: feature4326\n        });\n        this.map.addLayer({\n          \"id\": \"currentFeature-point\",\n          \"type\": \"circle\",\n          \"source\": \"currentFeature\",\n          \"paint\": {\n            \"circle-radius\": 10,\n            \"circle-opacity\": 0.7,\n            \"circle-color\": \"#FF0000\"\n          },\n          filter: [\"==\", \"$type\", \"Point\"]\n        }, 'place-city-sm');\n        this.map.addLayer({\n          \"id\": \"currentFeature-line\",\n          \"type\": \"line\",\n          \"source\": \"currentFeature\",\n          \"paint\": {\n            \"line-opacity\": 0.7,\n            \"line-width\": 1,\n            \"line-color\": \"#FF0000\"\n          },\n          filter: [\"in\", \"$type\", \"LineString\", \"Polygon\"]\n        }, 'place-city-sm');\n\n\n      } else {\n\n        this.map.getSource('currentFeature').setData(feature4326);\n      }\n      \n\n      if (feature4326.features[0].geometry.type === \"Point\") {\n        this.map.flyTo({\n          center: feature4326.features[0].geometry.coordinates,\n          zoom: randomBetween(12, 14)\n        }, { zoomInData: true });\n\n      } else {\n       \n        let bbox = turf.bbox(feature4326);\n        let buffered = turf.buffer(turf.bboxPolygon(bbox), 1, \"miles\");\n        let finalBbox = turf.bbox(buffered)\n\n        try {\n\n          this.map.fitBounds([[finalBbox[0], finalBbox[1]],\n          [finalBbox[2], finalBbox[3]]], {\n              padding: { top: 100, bottom: 100, left: 100, right: 100 }\n            }, { zoomInData: true });\n        } catch (e) {\n          this.handleMoveEnd({ zoomInData: true });\n        }\n      }\n\n  }\n\n  handleMoveEnd(e){\n    // console.log(e);\n    \n    if (e.osmUserHistory) {\n      _.delay(() => {\n        try {\n          let nextNum = (this.props.osmUserHistoriesIdx + 1) % this.props.osmUserHistories.length;\n          this.props.dispatch(changeOsmUserHistoriesIdx(nextNum));    \n        } catch(e){\n\n        }\n        \n      }, 4000);\n\n    }\n    \n  }\n\n\n  render() {\n    let { windowHeight } = this.props;\n    return (\n      <div ref={ c => { this.refsMapContainer = c; }} className=\"map-container\" style={{height: windowHeight}}>\n      </div>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n\n  return {\n    windowWidth: state.windowWidth,\n    windowHeight: state.windowHeight,\n    nkTile: state.nkTile,\n    cholopleth: state.cholopleth,\n    zoom: state.zoom,\n    center: state.center,\n    currentSeq: state.currentSeq,\n    currentFeature: state.currentFeature,\n    currentTimeStamp: state.currentTimeStamp,\n    currentIndividual: state.currentIndividual,\n    choloplethMode: state.choloplethMode,\n    selectedOsmUserResponse: state.selectedOsmUserResponse,\n    osmUserHistories: state.osmUserHistories,\n    osmUserHistoriesIdx: state.osmUserHistoriesIdx\n  }\n}\n\nexport default connect(mapStateToProps)(MapContainer);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { changeMapLoaded } from '../actions';\nimport turf from 'turf';\nimport { toWgs84 }  from 'reproject';\nimport proj4 from 'proj4';\nimport _ from 'lodash';\n\nvar isFirstTransition = false;\nclass PageMapContainer extends Component {\n\n  componentDidMount() {\n    window.mapboxgl.accessToken = 'pk.eyJ1Ijoic2Vuc2VhYmxlIiwiYSI6ImxSNC1wc28ifQ.hst-boAjFCngpjzrbXrShw';\n\n    this.map = new window.mapboxgl.Map({\n      container: this.refsPageMapContainer,\n      style: 'mapbox://styles/senseable/cjnr299am1ljs2spk9a4t2sdz',\n      zoom: 7.133251225192166,\n      // minZoom: ,\n      center: [129.39850149741085, 40.36695472501947],\n      interactive: false\n    });\n\n\n    window.map = this.map;\n    this.map.on('style.load', this.handleStyleLoad.bind(this));\n  }\n  \n  handleStyleLoad(e){\n    this.props.dispatch(changeMapLoaded(true));\n\n    this.map.addSource('currentFeature-bbox', {\n      type: 'geojson',\n      data: {\n        type: 'Feature',\n        coordinates: [[[-67.13734351262877, 45.137451890638886],\n                       [-66.96466, 44.8097],\n                       [-67.13734351262877, 45.137451890638886]]]\n      }\n    });\n\n    this.map.addSource('nk-line', {\n      type: 'vector',\n      tiles: ['http://rc.libremaps.net:3005/services/vector-tiles/nk_osm_line/{z}/{x}/{y}.pbf']\n    })\n\n    this.map.addSource('nk-polygon', {\n      type: 'vector',\n      tiles: ['http://rc.libremaps.net:3005/services/vector-tiles/nk_osm_polygon/{z}/{x}/{y}.pbf']\n    })\n  \n    this.map.addSource('nk-point', {\n      type: 'vector',\n      tiles: ['http://rc.libremaps.net:3005/services/vector-tiles/nk_osm_point/{z}/{x}/{y}.pbf;']\n    })\n\n    this.map.addLayer({\n      id: 'currentFeature-bbox-layer',\n      source: 'currentFeature-bbox',\n      type: 'fill',\n      paint: {\n        'fill-color': '#FF0000',\n        'fill-opacity': 0.3\n      }\n    });\n\n    this.map.addLayer({\n      \"id\": \"nk-line-layer\",\n      \"source\": \"nk-line\",\n      \"source-layer\": \"nk_osm_line_4326\",\n      \"type\": \"line\",\n      \"paint\": {\n        'line-opacity': 0.25,\n        'line-color':  {\n          property: 't',\n          stops: [\n            [1184972887, \"#ffffcc\"],\n            [1346511620, \"#d6efc2\"],\n            [1360958163, \"#acdeb7\"],\n            [1378200802, \"#81ceba\"],\n            [1395305792, \"#56bec1\"],\n            [1438380051, \"#3caac2\"],\n            [1479834657, \"#3391bc\"],\n            [1502367226, \"#2b77b4\"],\n            [1510168743, \"#2855a4\"],\n            [1516131630, \"#253494\"]\n          ]\n        }\n      },\n      \"filter\": [\"<\", 't', 1384972887]\n    }, 'place-city-sm');\n\n    this.map.addLayer({\n      \"id\": \"nk-polygon-layer\",\n      \"source\": \"nk-polygon\",\n      \"source-layer\": \"nk_osm_polygon_4326\",\n      \"type\": \"fill\",\n      \"paint\": {\n        'fill-opacity': 0.5,\n        'fill-color':  {\n          property: 't',\n          stops: [\n            [1184972887, \"#ffffcc\"],\n            [1346511620, \"#d6efc2\"],\n            [1360958163, \"#acdeb7\"],\n            [1378200802, \"#81ceba\"],\n            [1395305792, \"#56bec1\"],\n            [1438380051, \"#3caac2\"],\n            [1479834657, \"#3391bc\"],\n            [1502367226, \"#2b77b4\"],\n            [1510168743, \"#2855a4\"],\n            [1516131630, \"#253494\"]\n          ]\n        }\n      },\n      \"filter\": [\"<\", 't', 1384972887]\n    }, 'place-city-sm');\n\n    this.map.addLayer({\n      \"id\": \"nk-point-layer\",\n      \"source\": \"nk-point\",\n      \"source-layer\": \"nk_osm_point_4326\",\n      \"type\": \"circle\",\n      \"paint\": {\n        'circle-radius': 2,\n        'circle-color':  {\n          property: 't',\n          stops: [\n            [1184972887, \"#ffffcc\"],\n            [1346511620, \"#d6efc2\"],\n            [1360958163, \"#acdeb7\"],\n            [1378200802, \"#81ceba\"],\n            [1395305792, \"#56bec1\"],\n            [1438380051, \"#3caac2\"],\n            [1479834657, \"#3391bc\"],\n            [1502367226, \"#2b77b4\"],\n            [1510168743, \"#2855a4\"],\n            [1516131630, \"#253494\"]\n          ]\n        }\n      },\n      \"filter\": [\"<\", 't', 1384972887]\n    }, 'place-city-sm');\n\n\n  }\n\n  componentWillReceiveProps(newProps) {\n\n\n\n    let { currentFeature, currentTimeStamp, currentSeq } = newProps;\n   \n    if (!_.isNull(currentFeature)){\n      \n      if (currentSeq != this.props.currentSeq) {\n         console.log(currentFeature, \"newProps.currentseq: \", currentSeq, \"this.props.currentSeq:\", this.props.currentSeq);\n        console.log(\"will do transition\");\n        this.updateCurrentFeature(currentFeature);\n      } else if (isFirstTransition) {\n        isFirstTransition = false;\n         console.log(currentFeature, \"newProps.currentseq: \", currentSeq, \"this.props.currentSeq:\", this.props.currentSeq);\n\n        console.log(\"will do transition but it's first\");\n        this.updateCurrentFeature(currentFeature);\n      } else {\n        console.log(\"will not\");\n\n      }\n    } \n    if (currentTimeStamp != this.props.currentTimeStamp) {\n      this.map.setFilter('nk-line-layer', [\"<\", \"t\", currentTimeStamp]);\n      this.map.setFilter('nk-polygon-layer', [\"<\", \"t\", currentTimeStamp]);\n      this.map.setFilter('nk-point-layer', [\"<\", \"t\", currentTimeStamp]);  \n    }\n  }\n\n  componentWillUnmount(){\n\n  }\n\n  componentDidUpdate(){\n    this.map.resize();\n\n  }\n\n  updateCurrentFeature(currentFeature) {\n\n    let feature4326 = toWgs84(currentFeature.feature, proj4('EPSG:3857'));\n\n    \n    let bbox = turf.bbox(feature4326);\n    let buffered = turf.buffer(turf.bboxPolygon(bbox), 25, \"miles\");\n\n    this.map.getSource('currentFeature-bbox').setData(buffered);\n\n  }\n  render() {\n    let { windowHeight } = this.props;\n    return (\n      <div ref={ c => { this.refsPageMapContainer = c; }} className=\"map-container\" style={{height: windowHeight }}>\n      </div>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    windowWidth: state.windowWidth,\n    windowHeight: state.windowHeight,\n    currentSeq: state.currentSeq,\n    currentFeature: state.currentFeature,\n    currentTimeStamp: state.currentTimeStamp\n  }\n}\n\nexport default connect(mapStateToProps)(PageMapContainer);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport _ from 'lodash';\nimport moment from 'moment';\n\nconst Fragment = React.Fragment;\n\nclass ContributorInfo extends Component {\n  render() {\n    let { currentFeature } = this.props;\n    var a = 1;\n    return (\n      <Fragment>\n        <div className=\"contributor-info left\">\n          <div className=\"name\">\n            { currentFeature.osm_user.osm_user }\n          </div>\n        </div>\n\n        <div className=\"contributor-info center\">\n          <div className=\"time\">\n            { //moment(currentFeature.osm_timestamp * 1000).format(\"YYYY MM DD\") }\n              moment.unix(currentFeature.osm_timestamp).format(\"MMMM DD, YYYY\")\n            }\n          </div>\n        </div>\n\n\n        <div className=\"contributor-info right\">\n          <div className=\"rank\">\n            { currentFeature.osm_user.rank } of 887\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    currentFeature: state.currentFeature\n  }\n}\n\n\n\nexport default connect(mapStateToProps)(ContributorInfo);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\nclass CenterMarker extends Component {\n  render() {\n    let { currentFeature } = this.props;\n\n    return (\n      <div className=\"center-marker\">\n        {\n          currentFeature.name\n        }\n      </div>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    currentFeature: state.currentFeature\n  }\n}\n\nexport default connect(mapStateToProps)(CenterMarker);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport _ from 'lodash';\nimport moment from 'moment';\nimport { numberWithDelimiter } from '../utils';\nimport { ContDistribution, ChoroplethMap } from './'\nimport worldData from '../constants/world_data.json';\n\nconst Fragment = React.Fragment;\n\nclass MessageContributorInfo extends Component {\n  getTopThreeCountries(countryCounts){\n    // countryCounts\n    let sortedCounts = _.sortBy(countryCounts, cc => { return cc.count }).reverse();\n    let splicedCounts = _.filter(sortedCounts, sc => { return sc.count > 0; }).splice(0, 5);\n\n    _.each(splicedCounts, (sp, i) => {\n      splicedCounts[i].nameKo = _.find(worldData, wd => { return wd.id == sp.world_id; }).name_ko;\n      splicedCounts[i].nameEn = _.find(worldData, wd => { return wd.id == sp.world_id; }).name_en;\n    })\n    return splicedCounts;\n\n  }\n  render() {\n\n\n    let { currentFeature } = this.props;\n    let countryCounts = currentFeature.osm_user.country_counts;\n    let topThreeCountries = this.getTopThreeCountries(countryCounts);\n\n    return (\n      <div className=\"msg-contributor-info\">\n        <div className=\"name-rank-area\">\n          <div className=\"lv\">\n            <div className=\"label\">\n              지도 기여자\n            </div>\n            <div className=\"value\">\n              { currentFeature.osm_user.osm_user }\n            </div>\n          </div>\n          <div className=\"lv\">\n            <div className=\"label\">\n              순위\n            </div>\n            <div className=\"value\">\n              { currentFeature.osm_user.rank } of 889\n            </div>\n          </div>\n        </div>\n\n        <div className=\"name-rank-area\">\n          <div className=\"lv\">\n            <ContDistribution width={250} height={200} allCount={currentFeature.osm_user.all_count} />\n          </div>\n          <div className=\"lv\">\n            <div className=\"label\">\n              오픈스트리트맵 총 기여셋 횟수*\n            </div>\n            <div className=\"value\">\n              { numberWithDelimiter(currentFeature.osm_user.total_contribution_count) }\n            </div>\n            <div className=\"l-apple-box\">\n            </div>\n            <div className=\"label\">\n              북한 지도 기여 횟수\n            </div>\n            <div className=\"value\">\n              { numberWithDelimiter(currentFeature.osm_user.all_count) }\n            </div>\n            <div className=\"disclaimer\">\n              * 오픈스트리트맵은 여러 개의 지물을 고쳐 하나의 체인지세트(changeset) 단위로 업로드하는데, 총 기여세트 횟수는 이 체인지세트의 개수를 나타냅니다. 실제로 북한 지도에 기여된 지물의 개수보다 적게 나오기도 하는 이유가 됩니다. \n            </div>\n\n          </div>\n        </div>\n\n        <div className=\"changeset-area\">\n          <div className=\"title-area\">\n            <div className=\"label\">\n              지도 기여자의 과거 기여셋 이력 비교\n            </div>\n            <div className=\"value\">\n              {\n                _.map(topThreeCountries, (c, i) => { \n                  return( \n                    <span key={i}>\n                      { `${c.nameKo}${i == topThreeCountries.length - 1 ? \"\" : \", \"}` } \n                    </span>\n                  );\n                })\n              }\n            </div>\n\n          </div>\n\n          <div className=\"choromap-container\">\n            <ChoroplethMap />\n          </div>\n\n        </div>\n\n      </div>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    currentFeature: state.currentFeature\n  }\n}\n\n\n\nexport default connect(mapStateToProps)(MessageContributorInfo);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport * as d3 from 'd3';\nimport { numberWithDelimiter } from '../utils';\nimport _ from 'lodash';\n\nconst HIST = [{\"key\":0,\"value\":0},{\"key\":756.82,\"value\":854.0},{\"key\":2268.46,\"value\":17.0},{\"key\":3780.1000000000004,\"value\":4.0},{\"key\":5291.740000000001,\"value\":4.0},{\"key\":6803.38,\"value\":0.0},{\"key\":8315.02,\"value\":1.0},{\"key\":9826.66,\"value\":1.0},{\"key\":11338.300000000001,\"value\":2.0},{\"key\":12849.94,\"value\":0.0},{\"key\":14361.580000000002,\"value\":1.0},{\"key\":15873.220000000001,\"value\":0.0},{\"key\":17384.86,\"value\":0.0},{\"key\":18896.5,\"value\":0.0},{\"key\":20408.140000000003,\"value\":0.0},{\"key\":21919.780000000002,\"value\":0.0},{\"key\":23431.420000000002,\"value\":0.0},{\"key\":24943.06,\"value\":1.0},{\"key\":26454.7,\"value\":0.0},{\"key\":27966.34,\"value\":0.0},{\"key\":29477.980000000003,\"value\":0.0},{\"key\":30989.620000000003,\"value\":0.0},{\"key\":32501.260000000002,\"value\":1.0},{\"key\":34012.9,\"value\":0.0},{\"key\":35524.54,\"value\":0.0},{\"key\":37036.18,\"value\":0.0},{\"key\":38547.82,\"value\":0.0},{\"key\":40059.46,\"value\":0.0},{\"key\":41571.100000000006,\"value\":0.0},{\"key\":43082.740000000005,\"value\":0.0},{\"key\":44594.380000000005,\"value\":0.0},{\"key\":46106.020000000004,\"value\":0.0},{\"key\":47617.66,\"value\":0.0},{\"key\":49129.3,\"value\":0.0},{\"key\":50640.94,\"value\":0.0},{\"key\":52152.58,\"value\":0.0},{\"key\":53664.22,\"value\":0.0},{\"key\":55175.86,\"value\":0.0},{\"key\":56687.50000000001,\"value\":0.0},{\"key\":58199.14000000001,\"value\":0.0},{\"key\":59710.780000000006,\"value\":0.0},{\"key\":61222.420000000006,\"value\":0.0},{\"key\":62734.060000000005,\"value\":0.0},{\"key\":64245.700000000004,\"value\":0.0},{\"key\":65757.34000000001,\"value\":0.0},{\"key\":67268.98000000001,\"value\":0.0},{\"key\":68780.62000000001,\"value\":0.0},{\"key\":70292.26000000001,\"value\":0.0},{\"key\":71803.90000000001,\"value\":0.0},{\"key\":73315.54000000001,\"value\":0.0},{\"key\":74827.18000000001,\"value\":1.0}];\n\n\nclass ContDistribution extends Component {\n  componentDidMount(){\n    this.d3Render(this.props);\n  }\n\n  componentWillReceiveProps(newProps){\n    this.d3Render(newProps);\n  }\n\n  d3Render(props){\n      // HIST.push({key: _.last(HIST).key + 0, value: 0});\n      \n      let xDomain = [_.first(HIST).key, _.last(HIST).key];\n      let yDomain = [0, d3.max(HIST, h => { return h.value })];\n      // HIST.unshift({key: 0, value: 0});\n\n      this.xScale = d3.scaleLinear()\n        .domain(xDomain)\n        .range([30, props.width - 30]);\n\n      this.yScale = d3.scaleLinear()\n        .domain(yDomain)\n        .clamp(true)\n        .range([props.height - 30, 50]);\n\n\n      var svg = d3.select(this.svgContainer);\n      svg.selectAll(\"*\").remove();\n\n      let lineDraw = d3.line()\n        // .curve(d3.curveCardinal)\n        .x(d => {\n          return this.xScale(d.key)\n        })\n        .y(d => {\n          return this.yScale(d.value)\n        });\n\n\n\n\n      svg.append(\"path\")\n        .data([HIST])\n        .attr(\"class\", \"line\")\n        .attr(\"fill\", \"#ECF7FA\")\n        .attr(\"stroke\", \"#727272\")\n        .attr(\"stroke-width\", 1)\n        .attr(\"d\", lineDraw);\n\n\n      var xAxis = svg.append(\"g\")\n        .attr(\"transform\", `translate(0, ${props.height - 10})`);\n\n      xAxis.append(\"line\")\n        .attr(\"stroke\", \"#727272\")\n        .attr(\"stroke-width\", 0.5)\n        .attr(\"x1\", 0)\n        .attr(\"y1\", -19)\n        .attr(\"x2\", props.width)\n        .attr(\"y2\", -19)\n\n      \n      xAxis.selectAll(\"text\")\n          .data([0, 10000, 30000, 50000, 70000])\n        .enter().append(\"text\")\n          .attr(\"fill\", \"#AAAAAA\")\n          .style(\"font-size\", \"0.6em\")\n          .attr(\"text-anchor\", d => { return d == 60 ? \"end\" : \"middle\" })\n          .attr(\"x\", d => { return this.xScale(d) })\n          .attr(\"y\", -2)\n          .text(d => { return d == 0.0 ? \"0\" : `${numberWithDelimiter(d / 1000)}K` });\n\n      xAxis.selectAll(\"text\")\n          .data(HIST)\n        .enter().append(\"text\")\n\n\n\n\n        svg.append(\"line\")\n          .attr(\"stroke\", \"black\")\n          .attr(\"stroke-width\", 2)\n          .attr(\"x1\", this.xScale(props.allCount))\n          .attr(\"y1\", 15)\n          .attr(\"x2\", this.xScale(props.allCount))\n          .attr(\"y2\", props.height - 25)\n\n    \n      \n      // svg.append(\"text\")\n      //     .attr(\"fill\", \"#AAAAAA\")\n      //     .attr(\"x\", 0)\n      //     .attr(\"y\", this.yScale(yDomain[0]) - 5)\n      //     .text(yDomain[0]);\n\n      // svg.append(\"text\")\n      //     .attr(\"fill\", \"#AAAAAA\")\n      //     .attr(\"x\", 0)\n      //     .attr(\"y\", this.yScale(yDomain[1]) + 5)\n      //     .text( numberWithDelimiter(yDomain[1]) );\n\n\n\n    \n  }\n\n  render() {\n    return (\n      <svg className={`distribution-index${this.props.className}`} style={{ width: this.props.width, height: this.props.height }}>\n        <g ref={ c => { this.svgContainer = c; } }>\n        </g>\n        { this.props.children }\n      </svg>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n\n  }\n};\n\nexport default connect(mapStateToProps)(ContDistribution);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { changeMapLoaded, changeCurrentSeq } from '../actions';\nimport { LayerGenerator } from './';\nimport { dispatchToGlobal, numberWithDelimiter, randomBetween } from '../utils';\nimport * as d3 from 'd3';\nimport _ from 'lodash';\n\nconst Fragment = React.Fragment;\nclass MapContainer extends Component {\n\n  componentDidMount() {\n    window.mapboxgl.accessToken = 'pk.eyJ1Ijoic2Vuc2VhYmxlIiwiYSI6ImxSNC1wc28ifQ.hst-boAjFCngpjzrbXrShw';\n\n    this.map = new window.mapboxgl.Map({\n      container: this.refsMapContainer,\n      style: 'mapbox://styles/senseable/cjnr299am1ljs2spk9a4t2sdz',\n      zoom: 0.3431335719213704,\n      center: [9.629819343809345, 30.34808136525487],\n      interactive: false\n    });\n    // window.map = this.map;\n    this.map.on('style.load', this.handleStyleLoad.bind(this));\n    this.map.on('moveend', this.handleMoveEnd.bind(this));\n  }\n  \n  handleStyleLoad(e){\n    this.map.addSource(\"world-map-source\", {\n      type: 'vector',\n      url: 'mapbox://senseable.8x6k6499'\n    });\n\n   this.map.addLayer({\n      \"id\": \"world-map-layer\",\n      \"source\": \"world-map-source\",\n      \"source-layer\": \"world_assoc-c3znvj\",\n      \"type\": \"fill\",\n      \"paint\": {\n        'fill-opacity': 0.7,\n        'fill-color': '#FFFFFF'\n      }\n    }, 'waterway-label');\n\n   this.map.addLayer({\n      \"id\": \"world-map-line-layer\",\n      \"source\": \"world-map-source\",\n      \"source-layer\": \"world_assoc-c3znvj\",\n      \"type\": \"line\",\n      \"paint\": {\n        'line-opacity': 0.2,\n        'line-color': '#BBB',\n        'line-width': 1\n      }\n    }, 'waterway-label');\n\n\n  }\n\n  componentWillReceiveProps(newProps) {\n    let { currentFeature } = newProps;\n\n    if (!_.isNull(currentFeature)){\n\n      if (_.isNull(this.props.currentFeature)) {\n        this.updateCurrentFeature(currentFeature);\n      } else if (currentFeature.osm_id != this.props.currentFeature.osm_id) {\n        this.updateCurrentFeature(currentFeature);\n      }\n    }\n    \n  }\n\n  updateCurrentFeature(currentFeature){\n\n    var expression = [\"match\", [\"get\", \"py_id\"]];\n\n    // Calculate color for each state based on the unemployment rate\n    \n    let colorScale = d3.scaleLinear()\n      .domain([1184972887, \n               1346511620, \n               1360958163, \n               1378200802, \n               1395305792, \n               1438380051, \n               1479834657, \n               1502367226, \n               1510168743, \n               1516131630])\n      .range([\"#ffffcc\",\n              \"#d6efc2\",\n              \"#acdeb7\",\n              \"#81ceba\",\n              \"#56bec1\",\n              \"#3caac2\",\n              \"#3391bc\",\n              \"#2b77b4\",\n              \"#2855a4\",\n              \"#253494\"])\n\n    var extent = d3.extent(currentFeature.osm_user.country_counts, cc => {\n      return cc.count;\n    })\n\n\n    var finalDomain = [extent[0], \n                       extent[0] + (extent[1] - extent[0]) / 9 * 1,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 2,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 3,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 4,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 5,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 6,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 7,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 8,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 9];\n\n\n    colorScale.domain(finalDomain);\n\n    _.each(currentFeature.osm_user.country_counts, cc => {\n\n      expression.push(cc.world_id, colorScale(cc.count));\n    });\n\n\n    expression.push(\"rgba(0,0,0,0)\");\n\n    this.map.setPaintProperty(\"world-map-layer\", \"fill-color\", expression);\n\n  }\n\n  componentDidUpdate(){\n    this.map.resize();\n  }\n\n\n  handleMoveEnd(e){\n\n    \n  }\n\n\n  render() {\n    let { currentFeature } = this.props;\n    let width = 300;\n    let colorScale = d3.scaleLinear()\n      .range([\"#ffffcc\",\n              \"#d6efc2\",\n              \"#acdeb7\",\n              \"#81ceba\",\n              \"#56bec1\",\n              \"#3caac2\",\n              \"#3391bc\",\n              \"#2b77b4\",\n              \"#2855a4\",\n              \"#253494\"])\n\n    var extent = d3.extent(currentFeature.osm_user.country_counts, cc => {\n      return cc.count;\n    })\n\n    var finalDomain = [extent[0], \n                       extent[0] + (extent[1] - extent[0]) / 9 * 1,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 2,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 3,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 4,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 5,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 6,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 7,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 8,\n                       extent[0] + (extent[1] - extent[0]) / 9 * 9];\n\n\n    colorScale.domain(finalDomain);\n\n    return (\n      <Fragment>\n        <div ref={ c => { this.refsMapContainer = c; }} className=\"map-container-choropleth\" style={{width: \"100%\", height: 500}}>\n        </div>\n        \n        <div className=\"sub-legend\">\n          <div className=\"title\">\n            기여 횟수\n          </div>\n          {\n            _.map(finalDomain, (val, i) => {\n              if (_.isUndefined(val)) {\n                return null;\n              } else {\n                return (\n                  <div key={i} className=\"legend-sub-area\">\n                    <div className=\"color-box\" style={{ backgroundColor: colorScale(val) }}>\n                    </div>\n                    <div className=\"value\">\n                      { numberWithDelimiter(Number(val.toFixed(0))) }\n                    </div>\n                  </div>\n                ); \n              }\n\n              \n            })\n          }\n        </div>\n\n      </Fragment>\n\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    currentSeq: state.currentSeq,\n    currentFeature: state.currentFeature,\n    currentTimeStamp: state.currentTimeStamp\n  }\n}\n\nexport default connect(mapStateToProps)(MapContainer);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport moment from 'moment';\nimport * as d3 from 'd3';\nimport _ from 'lodash';\n\nclass YearLegend extends Component {\n\n  render() {\n    let { legend } = this.props;\n    let domain = [1184972887, \n              1346511620, \n              1360958163, \n              1378200802, \n              1395305792, \n              1438380051, \n              1479834657, \n              1502367226, \n              1510168743, \n              1516131630]\n    let yearScale = d3.scaleLinear()\n      .domain(domain)\n      .range([\"#ffffcc\",\n                \"#d6efc2\",\n                \"#acdeb7\",\n                \"#81ceba\",\n                \"#56bec1\",\n                \"#3caac2\",\n                \"#3391bc\",\n                \"#2b77b4\",\n                \"#2855a4\",\n                \"#253494\"]);\n\n    return (\n      <div className=\"year-legend\" style={{ opacity: legend ? 1 : 0 }}>\n        <div className=\"title\">\n          Date of Contribution\n        </div>\n        {\n          _.map(domain, (val, i) => {\n            if (_.isUndefined(val)) {\n              return null;\n            } else {\n              return (\n                <div key={i} className=\"legend-sub-area\">\n                  <div className=\"color-box\" style={{ backgroundColor: yearScale(val) }}>\n                  </div>\n                  <div className=\"value\">\n                    { moment.unix(val).format(\"YYYY MMM\") }\n                    {\n                      !(i + 1 > domain.length - 1) ? \n                      `-${moment.unix(domain[i + 1]).format(\"YYYY MMM\")}` :\n                      \"-\"\n                    }\n                  </div>\n                </div>\n              ); \n            }\n\n            \n          })\n        }\n      </div>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    legend: state.legend\n  }\n}\n\n\nexport default connect(mapStateToProps)(YearLegend);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport _ from 'lodash';\nimport moment from 'moment';\n\nconst Fragment = React.Fragment;\n\nclass MessageTopInfo extends Component {\n  render() {\n    let { currentFeature } = this.props;\n    return (\n      <Fragment>\n        <div className=\"contributor-info center\">\n          <div className=\"time\">\n            { //moment(currentFeature.osm_timestamp * 1000).format(\"YYYY MM DD\") }\n              moment.unix(currentFeature.osm_timestamp).format(\"MMMM DD, YYYY\")\n            }\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    currentFeature: state.currentFeature\n  }\n}\n\n\n\nexport default connect(mapStateToProps)(MessageTopInfo);\n","const TITLE_TYPE = `\n  font-family: 'Alfa Slab One', cursive;\n  font-size: 1em;\n  line-height: 1.2em;\n  font-style: normal;\n  font-weight: 400;\n  text-rendering: optimizeLegibility;\n`;\n\nconst REGULAR_TYPE = `\n  font-family: 'Caponi Text', 'Noto Serif KR', serif;\n  font-size: 1em;\n  line-height: 1.6em;\n  font-style: normal;\n  font-weight: 400;\n  text-rendering: optimizeLegibility;\n`;\n\nconst BOLD_TYPE = `\n  font-family: 'Caponi Text', 'Noto Serif KR', serif;\n  font-size: 1em;\n  line-height: 1.6em;\n  font-style: normal;\n  font-weight: 400;\n  text-rendering: optimizeLegibility;\n`;\n\nconst LABEL_BOLD_TYPE = `\n  font-family: 'Roboto', sans-serif;\n  font-size: 1em;\n  line-height: 1.6em;\n  font-style: normal;\n  font-weight: 700;\n  text-rendering: optimizeLegibility;\n`;\n\nconst LABEL_REGULAR_TYPE = `\n  font-family: 'Roboto', sans-serif;\n  font-size: 1em;\n  line-height: 1.6em;\n  font-style: normal;\n  font-weight: 400;\n  text-rendering: optimizeLegibility;\n`;\n\nconst LABEL_ITALIC_TYPE = `\n  font-family: 'Roboto', sans-serif;\n  font-size: 1em;\n  line-height: 1.6em;\n  font-style: normal;\n  font-weight: 400;\n  text-rendering: optimizeLegibility;\n`;\n\nconst ABSOLUTE_MIDDLE = `\n  transform: translate(0, -50%);\n`;\n\nconst ABSOLUTE_CENTER = `\n  transform: translate(-50%, 0);\n`;\n\nconst ABSOLUTE_CENTER_MIDDLE = `\n  transform: translate(-50%, -50%);\n`;\n\nexport default {\n  REGULAR_TYPE,\n  TITLE_TYPE,\n  BOLD_TYPE,\n  LABEL_BOLD_TYPE,\n  LABEL_REGULAR_TYPE,\n  LABEL_ITALIC_TYPE,\n  ABSOLUTE_CENTER,\n  ABSOLUTE_CENTER_MIDDLE,\n  ABSOLUTE_MIDDLE\n};","import styled from 'styled-components';\nimport mixins from './mixins';\n\nconst SectionContainer = styled.section`\n  width: 100%;\n  position: relative;\n`;\n\nconst Gutter = styled.div`\n  height: ${props => props.h}px;\n`;\n\nconst Sticky = styled.div`\n  position:sticky;\n  top: 10px;\n  height:auto;\n`;\n\nconst NonSticky = styled.div`\n  width: 400px;\n  position:relative;\n  margin: 0 auto;\n  z-index:5;\n  ${mixins.BOLD_TYPE}\n  font-size:1.2em;\n  line-height:1.4;\n  border: 1px solid #BBB;\n  padding: 10px 15px;\n  background: #E7F7FB;\n  color: black;\n`;\n\n\nconst Box = styled.div`\n  /* ${mixins.ABSOLUTE_CENTER} */\n  /* position: absolute; */\n  /* left: 50%; */\n  /* top: 0; */\n  width: 450px;\n  margin: 0 auto;\n  height: auto;\n  \n  ${mixins.BOLD_TYPE}\n  font-size:1.2em;\n  border: 1px solid #BBB;\n  padding: 10px 15px;\n  background: #E7F7FB;\n  color: black;\n`;\n\nexport {\n  SectionContainer,\n  Box,\n  Sticky,\n  NonSticky,\n  Gutter\n};","import React, { Component } from 'react'\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport mixins from '../stylesheets/mixins';\nimport {SectionContainer } from '../stylesheets/components';\nimport moment from 'moment';\nimport _ from 'lodash';\n\nconst InterestingPOIsContainer = styled(SectionContainer)`\n  margin: 100px 0;\n`;\n\nconst POIBox = styled.div`\n  position: absolute;\n  left: 50%;\n  ${mixins.ABSOLUTE_CENTER}\n  top: 20px;\n  ${mixins.BOLD_TYPE}\n  font-size:1.2em;\n  border: 1px solid #BBB;\n  padding: 10px 15px;\n  background: white;\n  color: black;\n  display:flex;\n  justify-content: space-between;\n  width: 400px;\n`;\n\nconst TitleArea = styled.div`\n  width:200px;\n`;\n\nconst Label = styled.h4`\n  ${mixins.LABEL_BOLD_TYPE}\n  font-size:0.65em;\n  color:#777;\n  margin-bottom: 5px;\n`;\n\nconst Value = styled.div`\n  font-size: 0.9em;\n  color: black;\n  padding-right: 10px;\n`;\n\nconst Date = styled.div `\n  ${mixins.LABEL_REGULAR_TYPE}\n  font-size:0.6em;\n  color: #AAA;\n`;\n\nconst Disclaimer = styled.div `\n  ${mixins.LABEL_ITALIC_TYPE}\n  font-size:0.5em;\n  color: #AAA;\n`;\n\nclass InterestingPOIs extends Component {\n\n\n  render() {\n    let name = _.isUndefined(this.props.name_en) ? this.props.name : this.props.name_en;\n    \n    return (\n      <InterestingPOIsContainer className=\"trigger\" data-action-name=\"changeInterestingPOIs\" data-poi-id={this.props.op} style={{ height: this.props.windowHeight}}>\n        <POIBox>\n          <TitleArea>\n            <Label>\n              Name\n            </Label>\n            <Value>\n              {name }\n            </Value>\n          </TitleArea>\n          <TitleArea>\n            <Label>\n              Contributor\n            </Label>\n            <Value>\n              P{this.props.osm_user.id}*\n            </Value>\n            <Date>\n              {moment.unix(this.props.osm_timestamp).format(\"MMMM DD, YYYY\")}\n            </Date>\n            <Disclaimer>\n              * Names have been anonymized for privacy\n            </Disclaimer>\n          </TitleArea>\n        </POIBox>\n      </InterestingPOIsContainer>\n    )\n  }\n}\n\nlet mapStateToProps = state => {\n    return state;\n};\n\nexport default connect(mapStateToProps)(InterestingPOIs);","import React, { Component } from 'react'\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport mixins from '../stylesheets/mixins';\n\nconst HeaderContainer = styled.div`\n  position: fixed;\n  left: 10px;\n  top: 10px;\n  z-index: 5;\n  opacity: ${props => props.titleHeader ? 1 : 0};\n  ${mixins.TITLE_TYPE}\n  transition: 0.4s opacity;\n  border: 1px solid #CCCCCC;\n  padding: 7px;\n  background-color: white;\n  font-size: 0.8em;\n  color: black;\n\n  .ko {\n    ${mixins.BOLD_TYPE}\n    color: black;\n    font-size: 0.9em;\n  }\n`;\n\nconst DateArea = styled.div`\n  position:absolute;\n\n  border: 1px solid #CCCCCC;\n  padding: 4px 5px;\n  background-color: white;\n  \n  ${mixins.LABEL_REGULAR_TYPE}\n  right: 0;\n  top: 2px;\n  transform: translate(87%, 0);\n  width: auto;\n  font-size:0.9em;\n  color: #888;\n`;\n\nclass TitleHeader extends Component {\n  render() {\n    return (\n      <HeaderContainer titleHeader={this.props.titleHeader}>    \n        Cartographers of North Korea &nbsp;<span className=\"ko\">북한의 지도 제작자</span>\n      </HeaderContainer>\n    )\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    titleHeader: state.titleHeader\n  }\n}\nexport default connect(mapStateToProps)(TitleHeader);","import React, { Component } from 'react'\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport mixins from '../stylesheets/mixins';\nimport {changeWorldMapIndividual } from '../actions';\nimport {KoreanLegend, IndividualInfo, NumberContributionLegend} from './';\nimport {SectionContainer, Box, Sticky} from '../stylesheets/components';\nimport osm_stats from '../constants/osm_users.json';\nimport * as d3 from 'd3';\nimport { numberWithDelimiter } from '../utils';\nimport _ from 'lodash';\n\nconst ContributorsGraphBox = styled.div`\n  background-color: white;\n  border: 1px solid #ccc;\n  width: 80%;\n  margin: 0 auto;\n  position: relative;\n`;\n\nconst Title = styled.div`\n  position: absolute;\n  left: 50%;\n  transform: translate(-50%, 0);\n  top: 20px;\n  color: black;\n  font-size: 0.9em;\n\n  div.disclaimer {\n    ${mixins.LABEL_ITALIC_TYPE}\n    margin-top:5px;\n    font-size:0.7em;\n    text-align: center;\n    color:#AAA;\n  }\n`;\n\nconst Tooltip = styled.div`\n  position:absolute;\n  line-height: 1;\n  padding: 10px;\n  background: #E7F7FB;\n  color: black;\n  z-index:6;\n  ${mixins.LABEL_BOLD_TYPE}\n  font-size:0.8em;\n  transition: 0.4s opacity;\n\n  width: calc(200px - 24px);\n  &:after {\n    content: \" \";\n    position: absolute;\n    top: 100%; /* At the bottom of the tooltip */\n    left: 50%;\n    margin-left: -5px;\n    border-width: 5px;\n    border-style: solid;\n    border-color: #E7F7FB transparent transparent transparent;\n  }\n\n  hr {\n    border:none;\n    margin: 0;\n    margin-bottom: 10px;\n    padding: 0;\n    border-bottom: 1px solid black;\n  }\n`;\nconst ToolTipLabelArea = styled.div`  \n  display: flex;\n  align-items:center;\n  justify-content: space-between;\n  /* padding-bottom:5px; */\n  margin-bottom:5px;\n`;\n\n const ToolTipLabel = styled.div`\n  ${mixins.LABEL_REGULAR_TYPE}\n  font-size:0.9em;\n`;\n\nconst ToolTipValue = styled.div`\n  ${mixins.LABEL_BOLD_TYPE}\n  font-size: 0.9em;\n`;\n\n\n\nclass ContributorsGraph extends Component {\n  constructor(props){\n    super(props);\n    this.osmUsersData = osm_stats.stats.osm_users;\n    this.xScale = d3.scaleLog()\n      .domain(d3.extent(this.osmUsersData, d => d.all_count));\n\n    this.margin = {\n      top: 30, \n      right: 60,\n      bottom: 30,\n      left: 60\n    };\n\n    this.refGraph = React.createRef();   \n    this.colorScale = d3.scaleLog()\n      .domain([1, 2, 3, 10, 100, 1000, 5000, 10000, 100000])\n      .range([\"#ffffcc\",\n        \"#d6efc2\",\n        \"#acdeb7\",\n        \"#81ceba\",\n        \"#56bec1\",\n        \"#3caac2\",\n        \"#3391bc\",\n        \"#2b77b4\",\n        \"#2855a4\",\n        \"#253494\"]);\n\n    this.state = {\n      currentHover: null\n    }\n  \n  }\n\n  initSimulation(props){\n\n    var simulation = d3.forceSimulation(this.osmUsersData)\n      .force(\"x\", d3.forceX(d => { return this.xScale(d.all_count); }).strength(1))\n      .force(\"y\", d3.forceY(props.height / 2 - 20))\n      .force(\"collide\", d3.forceCollide(props.padding))\n      .stop();\n\n    for (var i = 0; i < 200; ++i) simulation.tick();\n  }\n  \n  d3Init(){\n    let { width, height } = this.props;    \n    const svg = d3.select(this.refGraph.current);\n    this.xScale.range([this.margin.left, width - this.margin.right]);\n\n    this.initSimulation(this.props);\n\n    this.xAxisFunction = g => g\n      .attr(\"transform\", `translate(0,${height - this.margin.bottom})`)\n      .call(d3.axisBottom(this.xScale)\n        .ticks(width / 80)\n        .tickFormat(d => {\n          var log = Math.log(d) / Math.LN10;\n          return Math.abs(Math.round(log) - log) < 1e-6 ? numberWithDelimiter(d) : '';\n        })\n        .tickSizeOuter(0));\n    \n    this.xAxis = svg.append(\"g\")\n      .call(this.xAxisFunction);\n\n    var _this = this;\n\n    this.circleGraph = svg.append(\"g\")\n      .selectAll(\"circle\")\n      .data(this.osmUsersData)\n      .enter().append(\"circle\")\n      .attr(\"fill\", d => { return this.colorScale(d.all_count) })\n      .attr(\"stroke\", \"#eee\")\n      .style('cursor', 'pointer')\n      .attr(\"cx\", d => d.x)\n      .attr(\"cy\", d => d.y)\n      .attr(\"r\", this.props.radius)\n      .on('mouseover touchend', function (d) {\n        _this.setState({\n          currentHover: {\n            ...d,\n            cx: d3.select(this).attr('cx'),\n            cy: d3.select(this).attr('cy')\n          }\n        });\n\n        d3.select(this)\n          .transition()\n          .attr('r', _this.props.radius + 2)\n          .attr('fill', '#ff0000');\n      })\n      .on('mouseout', function (d) {\n        _this.setState({\n          currentHover: null\n        });\n\n        let circleColor = _this.setCircleColor(_this.props, d);\n        d3.select(this)\n          .transition()\n          .attr('r', _this.props.radius)\n          .attr('fill', circleColor);\n      })\n      .on('click', d => {\n        if (this.props.cholopleth) {\n          this.setState({\n            currentHover: d\n          });\n          this.props.dispatch(changeWorldMapIndividual(d));\n          d3.select(this)\n            .transition()\n            .attr('r', _this.props.radius + 2)\n            .attr('fill', '#ff0000');\n        }\n      });\n\n  }\n\n  d3Update() {\n    let { width, height } = this.props;\n    this.xScale.range([this.margin.left, width - this.margin.right]);\n    \n    this.initSimulation(this.props);\n\n    this.xAxisFunction = g => g\n      .attr(\"transform\", `translate(0,${height - this.margin.bottom})`)\n      .call(d3.axisBottom(this.xScale)\n        .ticks(width / 80)\n        .tickFormat(d => {\n          var log = Math.log(d) / Math.LN10;\n          return Math.abs(Math.round(log) - log) < 1e-6 ? numberWithDelimiter(d) : '';\n        })\n        .tickSizeOuter(0))\n\n    this.xAxis\n      .transition()\n      .call(this.xAxisFunction);\n\n    this.circleGraph\n      .transition()\n      .attr(\"cx\", d => d.x)\n      .attr(\"cy\", d => d.y)\n  }\n\n  componentDidMount() {\n    this.d3Init();\n  }\n\n  setCircleColor(props, d) {\n    let { graphMode, choloplethMode, cholopleth, currentIndividual } = props;\n\n    if (cholopleth) {\n      graphMode = choloplethMode;\n      // console.log(\"final graphmode is:\", graphMode);\n    }\n    //top20, top5\n    if (!_.isNull(currentIndividual) && !_.isUndefined(currentIndividual)) {\n\n      return d.id === currentIndividual.id ? \"#FF0000\" : \"#DDD\";\n\n    } else {\n      if (graphMode === \"korean\") {\n        return d.korean ? \"#FF0000\" : \"#DDD\";\n\n      } else if (graphMode === \"all\") {\n\n        return this.colorScale(d.all_count);\n\n      } else if (graphMode === \"top20\") {\n\n        return d.rank > 0 && d.rank <= 20 ? \"#253494\" : \"#DDD\";\n\n      } else if (graphMode === \"top5\") {\n\n        return d.rank > 0 && d.rank <= 5 ? \"#253494\" : \"#DDD\";\n\n      }\n    }\n\n  }\n\n  componentDidUpdate(prevProps){\n    let { graphMode, choloplethMode, cholopleth, currentIndividual } = this.props;\n\n    if (prevProps.width !== this.props.width || prevProps.height !== this.props.height) {\n      this.d3Update();\n      console.log(\"d3update called\");\n    }\n    \n    if (cholopleth) {\n      graphMode = choloplethMode;\n    }\n    \n    if (!_.isNull(currentIndividual) && !_.isUndefined(currentIndividual)) {\n\n      this.circleGraph.transition().attr(\"fill\", d => {\n\n        if (d.id === currentIndividual.id) {\n        \n          return \"#FF0000\";\n        \n        } else {\n\n          return \"#DDD\";\n        \n        }\n\n      })\n\n    } else {\n      //top20, top5\n      if (graphMode === \"korean\") {\n\n        this.circleGraph.transition().attr(\"fill\", d => {\n          return d.korean ? \"#FF0000\" : \"#DDD\";\n        })\n\n      } else if (graphMode === \"all\") {\n        this.circleGraph.transition().attr(\"fill\", d => {\n          return this.colorScale(d.all_count)\n        });\n\n      } else if (graphMode === \"top20\") {\n        \n        this.circleGraph.transition().attr(\"fill\", d => {\n          return d.rank > 0 && d.rank <= 20 ? \"#253494\" : \"#DDD\"; // this.colorScale(d.all_count)\n        })\n\n      } else if (graphMode === \"top5\") {\n        this.circleGraph.transition().attr(\"fill\", d => {\n          return d.rank > 0 && d.rank <= 5 ? \"#253494\" : \"#DDD\";\n        }) //this.colorScale(d.all_count)\n      }\n    }\n  }\n\n  render() {\n    let { currentHover } = this.state;\n    let { graphMode, choloplethMode, cholopleth, currentIndividual } = this.props;\n\n    if (cholopleth) {\n      graphMode = choloplethMode;\n      // console.log(\"final graphmode is:\", graphMode);\n    }\n\n    if (!_.isNull(currentHover)) {\n      console.log(currentHover.cx, currentHover.cy);\n\n    }\n    \n    return (\n\n        <ContributorsGraphBox style={{ height: this.props.height }}>\n          <Title>\n            Distribution of Contributors by # of Contribution\n\n            <div className=\"disclaimer\">\n              * Names have been anonymized for privacy\n            </div>\n          </Title>\n          <svg ref={this.refGraph} width={this.props.width} height={this.props.height}>\n          </svg>\n\n          {\n            _.isNull(currentHover) ? \n            null : \n            <Tooltip style={{ left: currentHover.cx - 100, top: Number(currentHover.cy) - 140 }}>\n              P{ currentHover.id }*\n              <hr />\n              <ToolTipLabelArea>\n                <ToolTipLabel>\n                  Total Contribution\n                </ToolTipLabel>\n                <ToolTipValue>\n                  { numberWithDelimiter(currentHover.all_count) }\n                </ToolTipValue>\n              </ToolTipLabelArea>\n              <ToolTipLabelArea>\n                <ToolTipLabel>\n                  # of Changesets \n                </ToolTipLabel>\n                <ToolTipValue>\n                  { numberWithDelimiter(currentHover.total_contribution_count) }\n                </ToolTipValue>\n              </ToolTipLabelArea>\n              <ToolTipLabelArea>\n                <ToolTipLabel>\n                  % of Contribution in Korean\n                </ToolTipLabel>\n                <ToolTipValue>\n                  {numberWithDelimiter(Math.floor(currentHover.korean_pct * 100))}% \n                </ToolTipValue>\n              </ToolTipLabelArea>\n            </Tooltip>\n          }\n          <KoreanLegend show={graphMode === \"korean\"} />\n          <NumberContributionLegend scale={this.colorScale} show={!cholopleth && graphMode !== \"korean\"} />\n          {\n            _.isNull(currentIndividual) || _.isUndefined(currentIndividual) ? \n            null : <IndividualInfo />\n          }\n          \n        </ContributorsGraphBox>\n    )\n  }\n}\n\nlet mapStateToProps = state => {\n    return {\n      graphMode: state.graphMode,\n      choloplethMode: state.choloplethMode,\n      cholopleth: state.cholopleth,\n      currentIndividual: state.currentIndividual\n    }\n};\n\nexport default connect(mapStateToProps)(ContributorsGraph);","import React, { Component } from 'react'\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport mixins from '../stylesheets/mixins';\nimport { Gutter } from '../stylesheets/components';\nimport { scaleLinear } from 'd3';\nimport moment from 'moment';\nimport { YearLegend } from './';\n\nconst Fragment = React.Fragment;\n\nconst Container = styled.div`\n  position: fixed;\n  right: 10px;\n  top: 10px;\n  z-index:4;\n  opacity: ${props => props.show ? 1 : 0};\n  transition: 0.4s opacity;\n`;\n\nconst RightStat = styled.div`\n \n  border: 1px solid #ccc;\n  padding:10px;\n  background-color: white;\n`;\n\nconst Label = styled.h4`\n  ${mixins.LABEL_BOLD_TYPE}\n  text-align: right;\n  font-size: 0.7em;\n  color: #777;\n`;\n\nconst Value = styled.p`\n  ${mixins.TITLE_TYPE}\n  font-size:1.5em;\n  color:black;\n  text-align: right;\n`;\n\n\nconst Timeline = styled.div`\n\n  border: 1px solid #ccc;\n  padding:15px 10px;\n  background-color: white;\n  height: 300px;\n  width: 15px;\n  position: relative;\n  float: right;\n`;\n\nconst Line = styled.div`\n  position: absolute;\n  left: 50%;\n  width: 3px;\n  transform: translate(-50%, 0);\n  background-color: ${ props => props.color };\n  height: calc(${ props => props.height }% - 30px);\n  transition: 0.2s height;\n`;\n\nconst Date = styled.div`\n  position: absolute;\n  right: 27px;\n  z-index: 6;\n  width: max-content;\n  ${mixins.LABEL_REGULAR_TYPE}\n  font-size:0.7em;\n  top: calc(${ props => props.top }% - 30px);\n  border: 1px solid #ccc;\n  padding:10px;\n  background-color: white;\n  transition: 0.2s top;\n`;\n\nclass TimelineScroller extends Component {\n  render() {\n    let timeScale = scaleLinear().domain([1184971551, 1539016223]).clamp(true).range([0, 100]);\n    let { timelineUI, currentTimeStamp } = this.props;\n    return (\n      <Fragment>\n        <Container show={timelineUI}>\n          <RightStat>\n            <Label>\n              Total Contributors\n            </Label>\n            <Value>\n              889\n            </Value>\n            <Gutter></Gutter>\n            <Label>\n              Total Contributions\n            </Label>\n            <Value>\n              324,415\n            </Value>\n          </RightStat>\n          <Gutter h={15}></Gutter>\n          <Timeline>\n            <Date top={timeScale(currentTimeStamp)}>\n              {moment.unix(currentTimeStamp).format(\"MMMM DD, YYYY\")}\n            </Date>\n            <Line color=\"#ddd\" height={100} />\n            <Line color=\"#000\" height={timeScale(currentTimeStamp)} />\n          </Timeline>\n        </Container>\n        <YearLegend />\n      </Fragment>\n    )\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    timelineUI: state.timelineUI,\n    currentTimeStamp: state.currentTimeStamp\n  }\n}\n\nexport default connect(mapStateToProps)(TimelineScroller);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { changeMapLoaded, changeCurrentSeq } from '../actions';\nimport { LayerGenerator } from './';\nimport { dispatchToGlobal, numberWithDelimiter, randomBetween } from '../utils';\nimport * as d3 from 'd3';\nimport country_analysis_all from '../constants/country_analysis_all.json';\nimport country_analysis_top_20 from '../constants/country_analysis_top_20.json';\nimport country_analysis_top_5 from '../constants/country_analysis_top_5.json';\nimport _ from 'lodash';\n\nconst Fragment = React.Fragment;\nclass CholoplethLegend extends Component {\n  constructor(props) {\n    super(props);\n    this.colorScale = d3.scaleLinear()\n      .range([\"#ffffcc\",\n        \"#d6efc2\",\n        \"#acdeb7\",\n        \"#81ceba\",\n        \"#56bec1\",\n        \"#3caac2\",\n        \"#3391bc\",\n        \"#2b77b4\",\n        \"#2855a4\",\n        \"#253494\"])\n\n  }\n\n  componentDidMount() {\n  }\n  updateCurrentCholopleth(cholopleth, choloplethMode, currentIndividual) {\n\n    let currentCountryJSON = null;\n\n    if (!_.isNull(currentIndividual)) {\n\n      currentCountryJSON = currentIndividual;\n\n    } else if (choloplethMode == \"all\") {\n\n      currentCountryJSON = {\n        country_counts: country_analysis_all\n      };\n\n    } else if (choloplethMode == \"top20\") {\n\n      currentCountryJSON = {\n        country_counts: country_analysis_top_20\n      };\n\n    } else { // top5\n\n      currentCountryJSON = {\n        country_counts: country_analysis_top_5\n      };\n\n    }\n\n    if (!_.isNull(currentCountryJSON) && cholopleth) {\n      let width = 300;\n\n      var extent = d3.extent(currentCountryJSON.country_counts, cc => {\n        return cc.count;\n      })\n\n      var finalDomain = [extent[0],\n      extent[0] + (extent[1] - extent[0]) / 9 * 1,\n      extent[0] + (extent[1] - extent[0]) / 9 * 2,\n      extent[0] + (extent[1] - extent[0]) / 9 * 3,\n      extent[0] + (extent[1] - extent[0]) / 9 * 4,\n      extent[0] + (extent[1] - extent[0]) / 9 * 5,\n      extent[0] + (extent[1] - extent[0]) / 9 * 6,\n      extent[0] + (extent[1] - extent[0]) / 9 * 7,\n      extent[0] + (extent[1] - extent[0]) / 9 * 8,\n      extent[0] + (extent[1] - extent[0]) / 9 * 9];\n      return {\n        opacity: 1,\n        finalDomain: finalDomain\n      }\n    } else {\n      return {\n        opacity: 0,\n        finalDomain: [0, 1]\n      }\n    }\n  }\n\n  render() {\n    let { cholopleth, choloplethMode, currentIndividual } = this.props;\n    console.log(\"cholopleth\", cholopleth, \"choroplethMode\", choloplethMode, \"currentIndividual\", currentIndividual);\n    let result = this.updateCurrentCholopleth(cholopleth, choloplethMode, currentIndividual);\n\n    this.colorScale.domain(result.finalDomain);\n\n    return (\n      <div className=\"sub-legend\" style={{ opacity: result.opacity }}>\n        <div className=\"title\">\n          # of Contribution\n        </div>\n        {\n          result.opacity == 1 ? \n          _.map(result.finalDomain, (val, i) => {\n            if (_.isUndefined(val)) {\n              return null;\n            } else {\n              return (\n                <div key={i} className=\"legend-sub-area\">\n                  <div className=\"color-box\" style={{ backgroundColor: this.colorScale(val) }}>\n                  </div>\n                  <div className=\"value\">\n                    {numberWithDelimiter(Number(val.toFixed(0)))}\n                  </div>\n                </div>\n              );\n            }\n\n\n          }) : null\n        }\n      </div>\n\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n\n    choloplethMode: state.choloplethMode,\n    currentIndividual: state.currentIndividual,\n    cholopleth: state.cholopleth\n    // currentSeq: state.currentSeq,\n    // currentFeature: state.currentFeature,\n    // currentTimeStamp: state.currentTimeStamp\n  }\n}\n\nexport default connect(mapStateToProps)(CholoplethLegend);","import React, { Component } from 'react'\nimport styled from 'styled-components';\nimport mixins from '../stylesheets/mixins';\n\nconst LegendBox = styled.div`\n  background-color: white;\n  border: 1px solid #ccc;\n  padding: 10px;\n  position: absolute;\n  right: 10px;\n  top: 10px;\n  transition: 0.4s opacity;\n  opacity: 0;\n  display: flex;\n`;\n\nconst RedCircle = styled.div`\n  width: 12px;\n  height: 12px;\n  border-radius: 20px;\n  background-color: red;\n  margin-top: 3px;\n`;\n\nconst Label = styled.div `\n  margin-left: 7px;\n  ${mixins.LABEL_REGULAR_TYPE}\n  font-size:0.7em;\n  color:#999;\n`;\n\nclass KoreanLegend extends Component {\n  render() {\n    return (\n      <LegendBox style={{ opacity: this.props.show ? 1 : 0 }}>\n        <RedCircle />\n        <Label>\n          Contributed in Korean\n        </Label>\n      </LegendBox>\n    )\n  }\n}\n\nexport default KoreanLegend;","import React, { Component } from 'react'\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport mixins from '../stylesheets/mixins';\nimport world_data from '../constants/world_data.json';\nimport { numberWithDelimiter } from '../utils';\nimport {changeWorldMapIndividual} from '../actions';\nimport _ from 'lodash';\n\nconst Box = styled.div`\n  position: absolute;\n  left: 50%;\n  background-color: white;\n  border: 1px solid #ccc;\n  padding: 10px 5px;\n  font-size:1.1em;\n  top: 50px;\n  transform: translate(-50%, -100%);\n  display: flex;\n  width: 300px;\n\tjustify-content: space-between;\n`;\n\nconst Area = styled.div`\n  width: 50%;\n  padding: 0 5px;\n`;\n\nconst Label = styled.h4`\n  ${mixins.LABEL_BOLD_TYPE}\n  font-size:0.65em;\n  color:#777;\n`;\n\nconst Value = styled.div `\n  font-size: 0.9em;\n  color: black;\n  padding-right: 10px;\n`;\n\nconst SmallSize = styled.span`\n  ${mixins.LABEL_BOLD_TYPE}\n  font-size: 0.7em;   \n  position: relative;\n  top: -1px;\n`;\n\nconst CloseButton = styled.a`\n  position: absolute;\n  right: 8px;\n  top: 1px;\n  ${mixins.LABEL_BOLD_TYPE}\n\n`;\n\nconst Fragment = React.Fragment;\n\nclass IndividualInfo extends Component {\n  componentDidMount(){\n    \n  }\n\n  getTop5Countries(currentIndividual) {\n\n    let worldIds = _.map(_.filter(_.sortBy(currentIndividual.country_counts, country => country.count).reverse().splice(0, 5), c => c.count > 0), country => {\n      return {\n        id: country.world_id,\n        count: country.count\n      };\n    });\n\n    let labels = _.map(worldIds, worldId => {\n      let label = _.find(world_data, w => {\n        return w.id === worldId.id\n      });\n\n      label.count = worldId.count;\n\n      return label;\n    });\n\n    return labels;\n  }\n\n  handleClick(e){\n    this.props.dispatch(changeWorldMapIndividual(null));\n  }\n\n  render() {\n    let { currentIndividual } = this.props;\n    let top5Countries = this.getTop5Countries(currentIndividual);\n\n    return (\n      <Box>\n        <CloseButton onClick={this.handleClick.bind(this)} href=\"javascript:void(0);\">\n          ⨯\n        </CloseButton>\n        <Area>\n          <Label>\n            Name\n          </Label>\n          <Value>\n            P{currentIndividual.id}\n          </Value>\n        </Area>\n        <Area>\n          <Label>\n            Top {top5Countries.length} Countries\n          </Label>\n          <Value>\n            {\n              _.map(top5Countries, (c, i) => {\n                return (\n                  <div key={i}>\n                    {c.name_en} <SmallSize>{ numberWithDelimiter(c.count) }</SmallSize>\n                  </div>\n                )\n              })\n            }\n          </Value>\n        </Area>\n      </Box>\n    )\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    currentIndividual: state.currentIndividual\n  }\n};\n\nexport default connect(mapStateToProps)(IndividualInfo);","import moment from 'moment';\n\nexport const DEFAULT_STATE = {\n  windowWidth: 1024,\n  windowHeight: 768,\n  titleHeader: false,\n  mapLoaded: false,\n  nkTile: false,\n  cholopleth: false,\n  timelineUI: false,\n  textVisualization: false,\n  legend: false,\n  currentSeq: 0,\n  currentFeature: null,\n  currentTimeStamp: 1167609600,\n  zoom: 6,\n  graphMode: \"all\", // all, korean\n  choloplethMode: \"all\", //top20, top5, individual\n  currentIndividual: null,\n  osmUsers: [],\n  responseCategories: [],\n  osmUserHistories: null,\n  osmUserHistoriesIdx: 0,\n  center: [125.75432, 39.03385],\n  selectedTextCategory: {},\n  selectedOsmUserResponse: null\n};\n\nexport const CATEGORIES_COLORS = [\n  \"#9bd1c7\",\n  \"#d8d754\",\n  \"#6258da\",\n  \"#ec8677\",\n  \"#8ab0d0\",\n  \"#f3b670\",\n  \"#bbdb79\",\n  \"#e8a4c8\",\n  \"#ada6a6\",\n  \"#b484b9\",\n  \"#99d182\",\n  \"#8ce2fc\",\n  \"#5f6687\",\n  \"#ce6586\",\n  \"#2e307d\"\n]\n\nexport const INTERESTING_NAMES = [\n  {dataPoint: \"p=4109493330\", id: 4109493330, title: \"위대한 수령 김일성동지 기념비\"},\n  {dataPoint: \"p=3090640091\", id: 3090640091, title: \"평양려관 5층 차집\"},\n  {dataPoint: \"p=5485334795\", id: 5485334795, title: \"사진꽃방 (1층)\"},\n  {dataPoint: \"pg=500783829\", id: 500783829,  title: \"Missile Launchpad\"},\n  {dataPoint: \"pg=408248450\", id: 408248450,  title: \"위대한 수령 김일성동지의 개선연설 자필기념비\"},\n  {dataPoint: \"pg=554071936\", id: 554071936,  title: \"Prison Workers Unit 3 Village\"}\n]\n\nexport const SUBCATEGORY_SELECT = {\n  1: ['Why?', '1'],\n  2: ['How?', '2'],\n  3: ['Comments', '3']\n}\n\n// 1448928000\n// 1448928052","import React, { Component } from 'react'\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport axios from 'axios';\nimport { addTextCategorySelected, removeTextCategorySelected, changeOsmUserReponseData } from '../actions';\nimport _ from 'lodash';\nimport { SUBCATEGORY_SELECT, CATEGORIES_COLORS } from '../constants/defaults';\nimport * as d3 from 'd3';\nimport {TextVisualizationResponses } from './';\n\nconst Fragment = React.Fragment;\nconst Bar = styled.div`\n  position: fixed;\n  z-index: 8;\n  top: 0;\n  opacity: 0;\n  transition: 0.4s opacity;\n  width: 170px;\n\n  section {\n    padding: 10px;\n    margin-bottom: 20px;\n  }\n\n  h3 {\n    font-size: 1.0em;\n    line-height: 1.1;\n    color: black;\n    margin-bottom: 7px;\n    font-weight: 700;\n    text-indent: -4px;\n  }\n\n  p {\n    color: #888;\n    line-height: 1.2;\n    font-family: \"Roboto\", sans-serif;\n    font-size:0.8em;\n  }\n\n  \n`;\n\nconst CategoryLink = styled.a`\n  font-size: 0.7em;\n  display: inline-block;\n  margin-bottom: 6px;\n  margin-left: -5px;\n  padding: 4px;\n  line-height: 1.2;\n  cursor: pointer;\n  background:white;\n  font-family: \"Roboto\", sans-serif;\n  font-weight: 400;\n  color:black;\n`\n\nconst UnCategoryLink = styled.a`\n  font-size: 0.7em;\n  display: inline-block;\n  margin-bottom: 6px;\n  margin-left: -5px;\n  line-height: 1.2;\n  padding: 4px;\n  cursor: pointer;\n  font-family: \"Roboto\", sans-serif;\n  font-weight: 700;\n  color:white;\n  position:relative;\n  padding-right:20px;\n\n  \n  .close-btn {\n    font-size:1.2em;\n\n    top: 1px;\n    right: 6px;\n    position: absolute;\n  }\n`\nconst ArrowArea = styled.div`\n  position: fixed;\n  z-index: 9;\n  opacity: 1;\n  transition: 0.4s opacity;\n  left: 180px;\n  height: 32px;\n  width: calc(100% - 190px);\n  bottom: 20px;\n  display: flex;\n  justify-content: space-between;\n  \n  hr {\n    border:none;\n    position:absolute;\n    top:20px;\n    border:1px solid #888;\n    width:100%;\n  }\n`;\n\n\nclass TextVisualization extends Component {\n  \n  componentDidMount(){\n    axios.all([axios.get('https://nkosm.wonyoung.so/api/osm_users.json')])\n    .then(axios.spread((response) => {\n      if (response.data.success) {\n        this.props.dispatch(changeOsmUserReponseData(response.data.osm_users, response.data.response_categories));\n      }\n    }));\n\n  }\n  \n  handleAddTextCategory(c) {\n    let { selectedTextCategory } = this.props;\n    \n    if ( !_.isUndefined(selectedTextCategory[c.id]) ) {\n\n      this.props.dispatch(removeTextCategorySelected(c.id));\n    } else {\n    \n      this.props.dispatch(addTextCategorySelected(c.id, {id: c.id }));\n    \n    }\n  }\n\n  render() {\n    let { textVisualization, selectedTextCategory, responseCategories } = this.props;\n    let subCategories = _.groupBy(responseCategories, c => { return c.subcategory_id; });\n    let colorScale = d3.scaleOrdinal().domain(_.map(responseCategories, rc => { return rc.id})).range(CATEGORIES_COLORS);\n    \n    return (\n      <Fragment>\n        <Bar style={{left: 0, opacity: textVisualization ? 1 : 0}}>\n          {\n            _.map(subCategories, (categories, key) => {\n              return (\n                <section key={key}>\n                  <h3>\n                    { SUBCATEGORY_SELECT[Number(key)][0] }\n                  </h3>\n                  {\n                    _.map(categories, c => {\n                \n                      let selected = _.isUndefined(selectedTextCategory[c.id]);\n                      return selected ? \n                        <CategoryLink onClick={this.handleAddTextCategory.bind(this, c)} key={c.id}>{c.category_name}</CategoryLink> : \n                        <UnCategoryLink style={{backgroundColor: colorScale(c.id)}} onClick={this.handleAddTextCategory.bind(this, c)} key={c.id}>\n                          {c.category_name} <span className=\"close-btn\">⨯</span>\n                        </UnCategoryLink>;\n                    })\n                  }\n                </section>\n                \n              );\n            })\n          }\n        </Bar>\n        \n       \n\n        <ArrowArea style={{opacity: textVisualization ? 1 : 0}}>\n          <img src={`${process.env.PUBLIC_URL}/assets/more_data_arrow.svg`} />\n          <img src={`${process.env.PUBLIC_URL}/assets/less_data_arrow.svg`} />\n        </ArrowArea>\n\n        {/* <Bar style={{right: 0, opacity: textVisualization ? 1 : 0}}>\n          <section>\n            <h3>\n              Responses<br />\n              211\n            </h3>\n            <p>\n              from 889<br />\n              contributors\n            </p>\n          </section>\n        </Bar> */}\n      </Fragment>\n    )\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    textVisualization: state.textVisualization,\n    selectedTextCategory: state.selectedTextCategory,\n    responseCategories: state.responseCategories\n\n  }\n}\nexport default connect(mapStateToProps)(TextVisualization);","import React, { Component } from 'react'\nimport styled from 'styled-components';\nimport { UserResponse } from './';\nimport { connect } from 'react-redux';\nimport * as d3 from 'd3';\nimport _ from 'lodash';\nimport { CATEGORIES_COLORS } from '../constants/defaults';\n\nconst GridBox = styled.div`\n  column-count: 15;\n  column-gap: 5px;\n  /* height: 2000px; */\n  width: calc(100% - 10px);\n`;\n\nconst Main = styled.div`\n  /* left: 180px; */\n  position: sticky;\n  z-index: 8;\n  margin-left: 180px;\n  top: 10px;\n  transition: 0.4s opacity;\n  width: calc(100% - 180px);\n  /* top: 20px; */\n  /* padding-top: 9px; */\n`;\n\nclass TextVisualizationResponses extends Component {\n\n  constructor(props){\n    super(props);\n\n    this.fontSizeScale = d3.scaleLinear().domain([1024, 1280, 1440, 2560]).clamp(true).range([2.2, 2.4, 3.2, 5]);\n    this.lineHeightScale = d3.scaleLinear().domain([1024, 1280, 1440, 2560]).clamp(true).range([1.7, 1.7, 1.5, 1.4]);\n  }\n  \n  render() {\n\n    let { osmUsers, responseCategories, textVisualization, windowWidth } = this.props;\n    let colorScale = d3.scaleOrdinal().domain(_.map(responseCategories, rc => { return rc.id})).range(CATEGORIES_COLORS);\n\n    return (\n      <Main style={{opacity: textVisualization ? 1 : 0 }}>\n        <GridBox>\n          {\n            _.map(osmUsers, (ou, i) => {\n              return (\n                <UserResponse {...ou} fontSize={this.fontSizeScale(windowWidth)} lineHeight={Math.ceil(this.lineHeightScale(windowWidth) * 10)/10} key={i} colorScale={colorScale} />\n              )\n            })\n          }\n        </GridBox>\n      </Main>\n    )\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    osmUsers: state.osmUsers,\n    windowWidth: state.windowWidth,\n    textVisualization: state.textVisualization,\n    responseCategories: state.responseCategories,\n    selectedTextCategory: state.selectedTextCategory\n  }\n}\n\nexport default connect(mapStateToProps)(TextVisualizationResponses);","import React, { Component } from 'react'\nimport _ from 'lodash';\nimport styled from 'styled-components';\nimport { changeSelectedOsmUserResponse } from '../actions';\nimport { connect } from 'react-redux';\nimport chroma from 'chroma-js';\nimport * as d3 from 'd3';\n\nconst TextSpan = styled.span`\n  word-break: break-word;\n\n  transition: 0.4s all;\n\n`;\n\nconst RespArea = styled.div`\n  margin-bottom: 5px;\n  font-size: 4px;\n  line-height: 1.5;\n  cursor:pointer;\n  transition: 0.4s all;\n  -webkit-column-break-inside: avoid;\n  page-break-inside: avoid;\n  break-inside: avoid;\n\n  &:hover {\n    background-color: white;\n  }\n`;\n\nclass UserResponse extends Component {\n  handleClick(response){\n    this.props.dispatch(changeSelectedOsmUserResponse({\n      ...this.props\n    })) \n  }\n\n  render() {\n    let { selectedTextCategory, fontSize, lineHeight } = this.props;\n    return (\n      <RespArea style={{ fontSize: `${fontSize}px`, lineHeight: lineHeight }} onClick={this.handleClick.bind(this)}>\n        {\n          _.map(this.props.responses, response => {\n            let selected = !_.isUndefined(selectedTextCategory[response.category_id]);\n            \n            return (\n              <TextSpan key={response.id} style={{\n                color: selected ? this.props.colorScale(response.category_id) : \"#999\",\n                backgroundColor: selected ? this.props.colorScale(response.category_id) : \"transparent\"\n              }}>\n                { response.resp }\n              </TextSpan> \n            );\n          })\n        }\n      </RespArea>\n    )\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    windowWidth: state.windowWidth,\n    selectedTextCategory: state.selectedTextCategory\n  }\n};\n\nexport default connect(mapStateToProps)(UserResponse);","import React, { Component } from 'react'\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport _ from 'lodash';\nimport mixins from '../stylesheets/mixins';\nimport { Gutter } from '../stylesheets/components';\nimport { changeSelectedOsmUserResponse, changeOsmUserHistories, changeOsmUserHistoriesIdx } from '../actions';\nimport axios from 'axios';\nimport * as d3 from 'd3';\nimport moment from 'moment';\nimport { CATEGORIES_COLORS } from '../constants/defaults';\nimport { numberWithDelimiter } from '../utils';\nimport chroma from 'chroma-js';\n\nconst Fragment = React.Fragment;\nconst RespContainer = styled.div`\n\n  position: fixed;\n  bottom: 10px;\n  left: 10px;\n  z-index:20;\n  background-color: white;\n  padding: 10px;\n  width: 50%;\n  border: 1px solid #ccc;\n  line-height: 1.6;\n  word-break: break-word;\n\n  .rela-cont {\n    position:relative;\n  }\n\n  .resp-content {\n    \n    max-height: 300px;\n    overflow-y: scroll;\n    line-height: 1.8;\n    padding-bottom: 50px;\n\n  }\n  span {\n    padding: 3px 5px;\n  }\n\n  .close-btn {\n    position:absolute;\n    right: 10px;\n    top: 2px;\n  }\n`;\n\nconst DataInfoContainer = styled.div`\n  position: fixed;\n  bottom: 10px;\n  right: 10px;\n  z-index:20;\n  background-color: white;\n  border: 1px solid #ccc;\n  padding: 10px;\n`;\n\n\nconst POIBox = styled.div`\n  color: black;\n  display:flex;\n  justify-content: space-between;\n  width: 250px;\n`;\n\nconst TitleArea = styled.div`\n  width:125px;\n`;\n\nconst Label = styled.h4`\n  ${mixins.LABEL_BOLD_TYPE}\n  font-size:0.7em;\n  color:#777; \n  margin-bottom: 5px;\n`;\n\nconst Value = styled.div`\n  font-size: 0.9em;\n  color: black;\n  padding-right: 10px;\n`;\n\nconst Date = styled.div`\n  ${mixins.LABEL_REGULAR_TYPE}\n  font-size:0.8em;\n  margin-top: -3px;\n  color: #AAA;\n`;\n\nconst CategorySpan = styled.span`\n  font-size: 0.8em;\n  font-family: \"Roboto\", sans-serif;\n  font-weight: 400;\n  padding: 2px 5px;\n  line-height: 1.7;\n  margin-right: 5px;\n  hyphens: auto;\n  word-break: break-all;\n`\n\nconst RespInfoArea = styled.div`\n  display: flex;\n  justify-content: space-between;\n  position: absolute;\n  padding-top: 10px;\n  border-top: 1px solid #ccc;\n  bottom: 0px;\n  background: white;\n  width: 100%;\n\n\n  div.left-inner {\n    width: calc(100% - 150px);\n  }\n\n   div.right-inner {\n     width: 120px;\n   }\n\n  div.left-inner {\n    line-height: 1.6;\n  }\n\n  div.right-inner {\n    text-align:right;\n    font-size:0.9em;\n    color:#777;\n  }\n\n  i {\n    font-style: italic;\n  }\n`;\n\nclass SelectedResponseViewer extends Component {\n  constructor(props){\n    super(props);\n    \n    this.intervalId = null;\n  }\n  componentDidMount(){\n    document.body.style.overflow = 'hidden';\n\n    this.loadOsmUserSampleData();\n  }\n\n  loadOsmUserSampleData(){\n\n    let { selectedOsmUserResponse } = this.props;\n    axios.get(`https://nkosm.wonyoung.so/api/osm_users/${selectedOsmUserResponse.id}.json`)\n      .then((response) => {\n        this.props.dispatch(changeOsmUserHistories(response.data.osm_user.histories));\n\n        // response.data.osm_user.histories\n\n      })\n      .catch(function (error) {\n        console.log(error);\n      })\n  }\n\n  componentWillUnmount(){\n    document.body.style.overflow = 'auto';\n    // clearInterval(this.intervalId);\n  }\n\n  handleClose(e){\n    this.props.dispatch(changeSelectedOsmUserResponse(null));\n    this.props.dispatch(changeOsmUserHistories(null));\n  }\n\n  getSelectedColorCategories(selectedOsmUserResponse, responseCategories, colorScale){\n    let respCategories = _.uniq(_.compact(_.map(selectedOsmUserResponse.responses, response => {\n      return response.category_id === 12 ? null : response.category_id\n    })));\n\n    let result = [];\n    _.each(respCategories, respCategory => {\n      let c = _.find(responseCategories, rc => { return rc.id === respCategory });\n      result.push({\n        ...c,\n        color: colorScale(c.id)\n      });\n    })\n\n    return result;\n  }\n  \n  componentDidUpdate(prevProps){\n   \n  }\n\n  render() {\n    let { selectedOsmUserResponse, responseCategories, osmUserHistories, osmUserHistoriesIdx } = this.props;\n    // debugger;\n    let colorScale = d3.scaleOrdinal().domain(_.map(responseCategories, rc => { return rc.id})).range(CATEGORIES_COLORS);\n    let selectedColorCategories = this.getSelectedColorCategories(selectedOsmUserResponse, responseCategories, colorScale);\n    let osmHistory;\n\n    if (!_.isNull(osmUserHistories)) {\n      if (!_.isUndefined(osmUserHistories[osmUserHistoriesIdx])){\n        osmHistory = osmUserHistories[osmUserHistoriesIdx].features[0];\n\n      }\n    }\n    \n    return (\n      <Fragment>\n\n        <RespContainer>\n          <div className='rela-cont'>\n            <button className=\"close-btn\" onClick={this.handleClose.bind(this)}><img src=\"./assets/close_btn.svg\" alt=\"close_btn\" /></button>\n\n            <div className=\"resp-content\">\n              \n              <div>\n                -\n              </div>\n\n              {\n                _.map(selectedOsmUserResponse.responses, (r, i) => {\n                  \n                  let bgColor = r.category_id === 12 ? \"transparent\": colorScale(r.category_id);\n                  let color = bgColor === \"transparent\" ? \"black\" : \"white\";\n                  return (\n                    <span key={i} style={{backgroundColor: bgColor, color: color }}>\n                      {r.resp}\n                    </span>\n                  )\n                })\n              }\n\n              <Gutter h={70}></Gutter>\n            \n\n            </div>\n\n            <RespInfoArea>\n\n              <div className=\"left-inner\">\n                {\n                  _.map(selectedColorCategories, scc => {\n                    return (\n                      <CategorySpan key={scc.id} style={{ backgroundColor: scc.color, color: \"white\" }}>\n                        {scc.category_name}\n                      </CategorySpan>\n                    )\n                  })\n                }\n              </div>\n              <div className=\"right-inner\">\n                P{ selectedOsmUserResponse.id }<br/>\n                <i>{ numberWithDelimiter(selectedOsmUserResponse.all_count) } Contribution</i>\n              </div>\n            </RespInfoArea>\n          </div>\n          \n          \n        \n        </RespContainer>\n        {\n          !_.isUndefined(osmHistory) ?\n          <DataInfoContainer>\n            <POIBox>\n              <TitleArea>\n                <Label>\n                  Name\n              </Label>\n                <Value>\n                    {_.isNull(osmHistory.properties.name_en) ? (_.isNull(osmHistory.properties.name) ? \"–\" : osmHistory.properties.name) : osmHistory.properties.name_en }\n                </Value>\n              </TitleArea>\n              <TitleArea>\n                <Label>\n                  Contributed Date\n                </Label>\n                <Date>\n                  {moment.unix(osmHistory.properties.osm_timestamp).format(\"MMMM DD, YYYY\")}\n                </Date>\n              </TitleArea>\n            </POIBox>\n          </DataInfoContainer> : null\n        }\n        \n      </Fragment>\n    )\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    selectedOsmUserResponse: state.selectedOsmUserResponse,\n    responseCategories: state.responseCategories,\n    osmUserHistories: state.osmUserHistories,\n    osmUserHistoriesIdx: state.osmUserHistoriesIdx\n  }\n};\n\nexport default connect(mapStateToProps)(SelectedResponseViewer);","import React, { Component } from 'react'\nimport styled from 'styled-components';\nimport mixins from '../stylesheets/mixins';\nimport _ from 'lodash';\nimport { numberWithDelimiter } from '../utils';\n\nconst LegendBox = styled.div`\n  background-color: white;\n  border: 1px solid #ccc;\n  padding: 10px;\n  position: absolute;\n  right: 10px;\n  top: 10px;\n  transition: 0.4s opacity;\n  opacity: 0;\n\n  h4 {\n    ${mixins.LABEL_BOLD_TYPE}\n    font-size:0.7em;\n    color:#999;\n  }\n\n  div.legend-inner { \n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    justify-content: flex-start;\n    align-items: center;\n    align-content: stretch;    \n    width: 200px;\n\n  }\n  div.legend {\n    width: 65px;\n    display: flex;\n  }\n`;\n\nconst Circle = styled.div`\n  width: 12px;\n  height: 12px;\n  border-radius: 20px;\n  margin-top: 3px;\n`;\n\nconst Label = styled.div `\n  margin-left: 7px;\n  ${mixins.LABEL_REGULAR_TYPE}\n  font-size:0.7em;\n  color:#999;\n`;\n\nclass NumberContributionLegend extends Component {\n  render() {\n    \n    return (\n      <LegendBox style={{ opacity: this.props.show ? 1 : 0 }}>\n        <h4>\n          # of Contribution \n        </h4>\n        \n        <div className=\"legend-inner\">\n          \n          {\n            _.map(this.props.scale.domain(), (d, i) => {\n              return (\n                <div className=\"legend\" key={i}>\n                  <Circle style={{ backgroundColor: this.props.scale(d) }} />\n                  <Label>\n                    { numberWithDelimiter(d) }\n                  </Label>\n                </div>\n              )\n            })\n          }\n\n        </div>\n      </LegendBox>\n    )\n  }\n}\n\nexport default NumberContributionLegend;","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport mixins from '../../stylesheets/mixins';\nimport { SectionContainer } from '../../stylesheets/components';\n\nconst SubtitleKo = styled.div`\n  ${mixins.BOLD_TYPE}\n  font-size: 0.85em;\n  text-align: center;\n`;\n\nconst IntroContainer = styled(SectionContainer)`\n  background-image: linear-gradient(-180deg, rgba(231, 247, 251, 0.83) 22%, rgba(231, 247, 251, 0.00) 81%);\n`;\n\nconst TitleContainer = styled.div`\n  width: 600px;\n  margin: 0 auto;\n  padding-top: 120px;\n`;\n\nconst H1 = styled.h1`\n  ${mixins.TITLE_TYPE}\n  text-align: center;\n  font-size:2.5em;\n  line-height: 1.2;\n  margin: 10px 0;\n`;\n\nconst SubParagraph = styled.p`\n  ${mixins.BOLD_TYPE}\n  text-align: center;\n  font-size:1.5em;\n  line-height: 1.35;\n  margin-top: 10px;\n`;\n\nconst DateBox = styled.div`\n  ${mixins.LABEL_REGULAR_TYPE}\n  border: 1px solid #CCCCCC;\n  padding: 5px;\n  text-align: center;\n  background-color: white;\n  display: block;\n  font-size:0.8em;\n  line-height:1.5;\n  color: #888;\n\n  text-align: center;\n  margin: 20px auto;\n  width: 105px;\n\n`;\n\nconst Prompt = styled.div`\n  position: absolute;\n  width: 48px;\n  height: 26px;\n  bottom: 3rem;\n  left: 50%;\n  margin-left: -24px;\n  animation: bounce 2s infinite;\n  opacity: ${props => props.titleHeader ? 0 : 1};\n  transition: .5s opacity;\n`;\n\nclass Intro extends Component {\n  render() {\n    let { titleHeader } = this.props;\n    return (\n      <IntroContainer className=\"trigger\" data-action-name=\"changeIntro\" style={{ height: this.props.windowHeight}}>\n      \n        <TitleContainer>\n          <SubtitleKo>\n            북한의 지도 제작자\n          </SubtitleKo>\n\n          <H1>\n            Cartographers <br/>\n            of North Korea\n          </H1>\n\n          <SubParagraph>\n            An analysis of the OpenStreetMap data in North Korea: <br/>\n            Who are the contributors? How and Why did they contribute to North Korea?\n          </SubParagraph>\n\n          <DateBox>\n            May 12th<br/>Wonyoung So\n          </DateBox>\n        </TitleContainer>\n\n        <Prompt titleHeader={titleHeader}>\n          <svg x=\"0px\" y=\"0px\" width=\"48px\" height=\"26px\" viewBox=\"0 0 48 26\" enableBackground=\"new 0 0 48 26\">\n            <g>\n              <path fill=\"#222\" d=\"M24.146,26c-0.53,0-1.039-0.284-1.414-0.659L0.586,3.158c-0.781-0.781-0.781-2.066,0-2.846\n                c0.78-0.781,2.048-0.791,2.828-0.009L24.137,21.02L44.576,0.305c0.776-0.787,2.042-0.796,2.829-0.021\n                c0.786,0.776,0.794,2.042,0.019,2.828L25.57,25.332C25.196,25.711,24.686,26,24.153,26C24.151,26,24.149,26,24.146,26z\"></path>\n            </g>\n          </svg>\n        </Prompt>\n\n      </IntroContainer>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    windowHeight: state.windowHeight,\n    titleHeader: state.titleHeader\n  }\n}\n\nexport default connect(mapStateToProps)(Intro);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport mixins from '../../stylesheets/mixins';\nimport {SectionContainer, Box, Sticky, NonSticky} from '../../stylesheets/components';\n\nconst IntroContainer = styled(SectionContainer)``;\n\nclass SectionFirst extends Component {\n  render() {\n    return (\n      <IntroContainer style={{ \n        height: this.props.windowHeight * 0.7\n      }} className=\"trigger\" data-action-name=\"changeEmptyMap\">\n        <NonSticky>\n          The residents of North Korea has limited accessibility to the internet for research purposes, almost all of the citizens have access to an intranet called “Kwangmyong,” and the internet connectivity has not offered to the public.\n        </NonSticky>\n\n      </IntroContainer>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    windowHeight: state.windowHeight\n  }\n}\n\nexport default connect(mapStateToProps)(SectionFirst);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { InterestingPOIs } from '../';\nimport styled from 'styled-components';\nimport mixins from '../../stylesheets/mixins';\nimport {SectionContainer, Box, Sticky, NonSticky} from '../../stylesheets/components';\nimport { rgba } from 'style-value-types';\n\nconst SecondContainer = styled(SectionContainer)`\n  padding: 200px 0;\n`;\n\nclass SectionSecond extends Component {\n  componentDidMount(){\n\n  }\n  \n  render() {\n    return (\n      <SecondContainer className=\"trigger\" data-action-name=\"changeChronicleMap\">\n        <Sticky>\n          <Box>\n            However, the quality of OSM data in North Korea is simply amazing; 889 users contributed 324,415 data points. But, Who gets benefits from this map? \n          </Box>\n        </Sticky>\n\n        \n        <div style={{ height: this.props.windowHeight * 1.5}}>\n        </div>\n      </SecondContainer>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    windowHeight: state.windowHeight\n  }\n}\n\nexport default connect(mapStateToProps)(SectionSecond);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { ContributorsGraph } from '../';\nimport styled from 'styled-components';\nimport mixins from '../../stylesheets/mixins';\nimport {SectionContainer, Box, Sticky} from '../../stylesheets/components';\n\nconst SectionThirdContainer = styled(SectionContainer)`\n`;\n\nconst GradientSticky = styled.div`\n  position: sticky;\n  background-image: linear-gradient(-180deg, rgba(231, 247, 251, 0.83) 22%, rgba(231, 247, 251, 0.00) 81%);\n  top: 0;\n  width: 100%;\n  z-index:2;\n  height: ${props => props.height }px;\n`;\n\nconst NonSticky = styled.div`\n  width: 400px;\n  position:relative;\n  margin: 0 auto;\n  z-index:5;\n  ${mixins.BOLD_TYPE}\n  font-size:1.2em;\n  border: 1px solid #BBB;\n  padding: 10px 15px;\n  background: #E7F7FB;\n  color: black;\n`;\n\nconst StickyGraphArea = styled.div`\n  position:sticky;\n  z-index:4;\n  top: 50%;\n  transform: translate(0, -50%);\n`;\n\nclass SectionThird extends Component {\n  render() {\n    let { windowHeight } = this.props;\n\n    let graphHeight = windowHeight * 0.4 < 400 ? 400 : windowHeight * 0.4;\n\n\n    return (\n      <SectionThirdContainer>\n        <GradientSticky height={this.props.windowHeight} />\n        <NonSticky className=\"trigger\" data-action-name=\"initGraphScene\">\n          It is true that it is hard to know the contributors only studying the OSM data, but the data shows some characteristics about them. First, the plot shows that the contributors are formed a power-law distribution, and the top 10 contributors drew 61 percent of the map.\n        </NonSticky>\n\n        <div style={{\n          height: this.props.windowHeight * 0.2\n        }}>\n        </div>\n\n\n        <StickyGraphArea>\n          <ContributorsGraph \n            radius={4}\n            padding={6}\n            width={this.props.windowWidth * 0.8} \n            height={graphHeight} /> \n        </StickyGraphArea>\n        \n        <div style={{\n          height: this.props.windowHeight * 0.8\n        }}>\n        </div>\n        \n        <NonSticky className=\"trigger\" data-action-name=\"changeGraphKorean\">\n          Second, In the contributors who labeled a name to the map objects, 62% of the contributors labeled them in Korean. \n        </NonSticky>\n        \n\n        <div style={{\n          height: this.props.windowHeight * 1.5\n        }}>\n        </div>\n\n      </SectionThirdContainer>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    windowWidth: state.windowWidth,\n    windowHeight: state.windowHeight\n  }\n}\n\nexport default connect(mapStateToProps)(SectionThird);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport { ContributorsGraph } from '../';\nimport mixins from '../../stylesheets/mixins';\nimport {SectionContainer, Box, Sticky, NonSticky} from '../../stylesheets/components';\n\nconst SectionFourthContainer = styled(SectionContainer)`\n`;\n\nconst Gutter = styled.div`\n  height: ${props => props.height }px;\n`;\n\nconst StickyBottomGraphContainer = styled.div`\n  position: sticky;\n  top: calc(100% - ${props => props.height * 0.3 + 20}px);\n`;\n\n\nclass SectionFourth extends Component {\n  render() {\n    return (\n      <SectionFourthContainer style={{ height: this.props.windowHeight * 3.5}}>\n        <NonSticky className=\"trigger\" data-action-name=\"initWorldMap\">\n          Third, OpenStreetMap has changesets, which is history of past contributions of each user. Using this datasets, it can be seen which regions, other than North Korea, have been the contributors’ interests. When summing up every changesets of 887 contributors, it does not give much insights, although there are some countries that has been in good relationship with North Korea such as Germany, China, and Russia.\n        </NonSticky>\n        \n\n        <Gutter height={150} />\n\n        <StickyBottomGraphContainer height={this.props.windowHeight} style={{ height: this.props.windowHeight * 0.3 }}>\n          <ContributorsGraph \n            radius={2.5}\n            padding={3.5}\n            width={this.props.windowWidth * 0.8} \n            height={this.props.windowHeight * 0.3} />\n        </StickyBottomGraphContainer>\n        \n        <Gutter height={this.props.windowHeight * 0.5} />\n\n        <NonSticky className=\"trigger\" data-action-name=\"changeWorldMapHeavyContributor\">\n          However, there are some countries coming up with heavy contributors. For instance, the top 20 contributors who use Korean also contributed to the countries as follows: China, Germany, India, United States, and South Korea.\n        </NonSticky>  \n        \n\n        <Gutter height={ this.props.windowHeight } />\n\n\n        <NonSticky className=\"trigger\" data-action-name=\"changeWorldMapHeaviestContributor\">\n          If the number of contributor is reduced to 5, the list of countries changed as follows: India, Germany, Ukraine, Russia, and Japan. It is also interesting to see the individual user’s spatial distribution of contributions.\n        </NonSticky>\n      </SectionFourthContainer>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    windowHeight: state.windowHeight,\n    windowWidth: state.windowWidth\n  }\n}\n\nexport default connect(mapStateToProps)(SectionFourth);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport { ContributorsGraph } from '../';\nimport mixins from '../../stylesheets/mixins';\nimport {SectionContainer, Box, Sticky, NonSticky} from '../../stylesheets/components';\n\n\nconst SectionFifthContainer = styled(SectionContainer)`\n  background-image: linear-gradient(-180deg, rgba(231, 247, 251, 0.83) 22%, rgba(231, 247, 251, 0.00) 81%);\n`;\n\n\nconst Gutter = styled.div`\n  height: ${props => props.height }px;\n`;\n\nconst NonStickyFinal = styled(NonSticky)`\n  width: 800px;\n`;\n\nconst MethodologyTitle = styled.h4`\n  font-size:0.7em;\n  color: #777;\n  line-height:1.2;\n`;\n\nconst MethodologyPG = styled.p`\n  font-size:0.7em;\n  color: #777;\n  width: 60%;\n`;\n\nclass SectionFifth extends Component {\n  render() {\n    return (\n      <SectionFifthContainer style={{height: this.props.windowHeight}}>\n        <Gutter height={100}></Gutter>\n        <NonStickyFinal className=\"trigger\" data-action-name=\"final\">\n          Regarding the complicated situation where there are fundamental differences between the beneficiaries (like, the random people on the internet from the first world) and the actual residents who live in the territory, asking the questions and imagining the reason why the 889 people have contributed data to North Korea appears to touch several things from the ideals that the internet and the open source culture have given to us, to North Korea’s surveillance- and defense-optimized, and state-controlled intranet that is founded on the open source culture. Particularly, with the respect to many POIs which are labeled in a conformist way, this “open source map” is truly oddly situated in the open source culture.\n          \n          <Gutter height={50}></Gutter>\n          <MethodologyTitle>\n            * Methodology\n          </MethodologyTitle>\n          <MethodologyPG>\n            OpenStreetMap data is used for the research. and this data is under the Open Database License (ODbL) version 1.0 share-alike license for data. for aggregating the changeset data, I used the center point of each changeset boundary. All contributors' screen name is anonymized for protecting the individual privacy.\n          </MethodologyPG>\n        </NonStickyFinal>\n      </SectionFifthContainer>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    windowHeight: state.windowHeight\n  }\n}\n\nexport default connect(mapStateToProps)(SectionFifth);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { InterestingPOIs } from '../';\nimport styled from 'styled-components';\nimport mixins from '../../stylesheets/mixins';\nimport { SectionContainer, Box, Sticky } from '../../stylesheets/components';\nimport interestingPOIs from '../../constants/interesting_pois.json';\nimport _ from 'lodash';\n\nconst SecondContainer = styled(SectionContainer)`\n  margin: 200px 0;\n`;\n\nclass SectionOddPOIs extends Component {\n  render() {\n    var interestingPOIs2 = _.shuffle(interestingPOIs).splice(0, 5);\n\n    return (\n      <SecondContainer>\n        <Sticky className=\"trigger\" data-action-name=\"wrapupChronicleMap\">\n          <Box>\n            They have contributed interesting data points in detail.\n          </Box>\n        </Sticky>\n        \n        <div style={{ height: this.props.windowHeight}}>\n        </div>\n\n        {\n          _.map(interestingPOIs2, (interestingPOI, i) => {\n            return (\n              <InterestingPOIs {...interestingPOI} key={i}  />\n            )\n          })\n        }\n      </SecondContainer>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    windowHeight: state.windowHeight\n  }\n}\n\nexport default connect(mapStateToProps)(SectionOddPOIs);","import React, { Component } from 'react'\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport mixins from '../../stylesheets/mixins';\nimport { TextVisualizationResponses } from '../';\nimport {SectionContainer, Box, Sticky, NonSticky, Gutter } from '../../stylesheets/components';\nimport _ from 'lodash';\n\nconst SectionTextContainer = styled(SectionContainer)`\n  transition: 0.4s all;\n  background: rgba(231, 247, 251);\n  opacity: 1;\n\n  &.hide {\n    opacity: 0;\n    pointer-events: none;\n  }\n`;\n\n\nconst GradientSticky = styled.div`\n  position: sticky;\n  background-image: linear-gradient(-180deg, rgba(231, 247, 251, 0.83) 22%, rgba(231, 247, 251, 0.00) 81%);\n  top: 0;\n  width: 100%;\n  z-index:2;\n  height: ${props => props.height }px;\n`;\n\nclass SectionText extends Component {\n  render() {\n    let { selectedOsmUserResponse, windowHeight } = this.props;\n    return (\n      <SectionTextContainer className={selectedOsmUserResponse ? \"hide\" : \"\" } style={{ height: 8000}}>\n        <div style={{ height: this.props.windowHeight }}></div>\n    \n\n        <NonSticky className=\"trigger\" data-action-name=\"initTextVisualization\" style={{ zIndex: 11 }}>\n          Thus, I asked all of the contributors to know more about the motivations and strategies. Here are the responses from 211 contributors.\n        </NonSticky>\n        <Gutter h={200} />\n        <TextVisualizationResponses />\n        <Gutter h={500} />\n        <NonSticky className=\"trigger\" data-action-name=\"changeTextVisualizationWhy\" style={{ zIndex: 11 }}>\n          Although the contributors' motivation is mostly for fun and pure curiosity—such as searching for empty space in OSM—, they were motivated by specific and more altruistic reasons; in particular, with the respect of advocating open mapping, they wanted North Koreans to use the map in near future, such as for escaping their territory. \n        </NonSticky>\n        <Gutter h={1500} />\n        <NonSticky className=\"trigger\" data-action-name=\"changeTextVisualizationHow\" style={{ zIndex: 11 }}>\n          Contributors mostly uses satellite imagery to contribute data to North Korea, as OpenStreetMap provides Microsoft Bing satellite images. However, some contributors have the first-hand knowledge as they have been to Pyeongyang. Moreover, they often combine resources on the internet to contribute street-level information to the OSM.\n        </NonSticky>\n         <Gutter h={1500} />\n        <NonSticky className=\"trigger\" data-action-name=\"changeTextVisualizationStory\" style={{ zIndex: 11 }}>\n          Some contributors have interests because of similar national history (German citizens) or personal history, and they have followed from the news media and thought about reunification of Korean peninsula. You can toggle and click to see individual responses.\n        </NonSticky>\n\n      </SectionTextContainer>\n    )\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    windowHeight: state.windowHeight,\n    selectedOsmUserResponse: !_.isNull(state.selectedOsmUserResponse)\n  }\n}\n\nexport default connect(mapStateToProps)(SectionText);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { MapContainer, TextVisualization, ContributorInfo, CenterMarker, \n        SelectedResponseViewer, TitleHeader, TimelineScroller, CholoplethLegend } from '../components';\nimport { changeGraphKorean, changeIntro,  wrapupChronicleMap, changeEmptyMap, changeChronicleMap, initGraphScene, changeCurrentFeature, changeCurrentTimeStamp, initWorldMap, changeWorldMapHeaviestContributor, changeWorldMapHeavyContributor, addTextCategorySelected, changeTextVisualization, removeAllTextCategories} from '../actions';\nimport axios from 'axios';\nimport 'intersection-observer';\nimport scrollama from 'scrollama';\nimport { Intro, SectionFirst, SectionSecond, SectionThird, SectionFourth, SectionFifth, SectionOddPOIs, SectionText } from '../components/sections';\nimport { HeaderContainer } from '../components';\nimport _ from 'lodash';\nimport interestingPOIs from '../constants/interesting_pois.json';\nimport { scaleLinear } from 'd3';\n\nconst Fragment = React.Fragment;\n\nclass Home extends Component {\n  constructor(props){\n    super(props);\n\n    this.timeScale = scaleLinear().domain([0, 1]).clamp(true).range([1184971551, 1539016223]);\n    this.introZoomLevelScale = scaleLinear()\n      .domain([\n        375, \n        667, \n        750, \n        800, \n        1440\n      ])\n      .range ([\n        5.129678844315936 - 0.1,\n        5.95692370701329 - 0.1,\n        6.169505942965738 - 0.1,\n        6.285137881074422 - 0.1,\n        7.083247699254196 - 0.1\n      ]);\n\n    this.timelineZoomLevelScale = scaleLinear()\n      .domain([\n        375, \n        667, \n        750, \n        800, \n        1440\n      ])\n      .range ([\n        5.129678844315936,\n        5.95692370701329,\n        6.169505942965738,\n        6.285137881074422,\n        7.083247699254196\n      ]);\n\n    this.worldMapZoomLevelScale = scaleLinear()\n      .domain([\n        375,\n        667,\n        750,\n        800,\n        1440\n      ])\n      .range([\n        0.8913299194094557,\n        0.8913299194094557,\n        1.04073926761343,\n        1.234294902868799,\n        1.234294902868799\n      ]);\n\n  }\n  componentDidMount(){\n    document.body.style.overflowY = \"hidden\";\n  }\n\n  componentDidUpdate(prevProps, prevState){\n    if (prevProps.mapLoaded !== this.props.mapLoaded && this.props.mapLoaded) {\n\n\n        this.scroller = scrollama();\n        this.scroller.setup({\n          step: '.trigger',\n          container: '.scroll-container',\n          offset: 0.8,\n          order: true,\n          progress: true\n        })\n          .onStepEnter(this.handleStepEnter.bind(this))\n          .onStepProgress(_.throttle(this.handleStepProgress.bind(this), 250))\n          .onStepExit(this.handleStepExit.bind(this));\n      _.delay(() => {\n        window.scroll(0, 0);\n      }, 400);\n      \n\n      document.body.style.overflowY = \"auto\";\n    }\n\n    if (prevProps.windowHeight !== this.props.windowHeight && !_.isUndefined(this.scroller)) {\n      this.scroller.resize();\n    }\n  }\n  checkActive(){\n    // for (var key in this.activeStepByIndex) {\n    //   if (activeStepByIndex[key]) {\n    //     console.log('index ' + key + ' is active');\n        \n    //   }\n    // }\n  }\n\n  handleStepProgress(e){\n    let actionName = e.element.dataset.actionName;\n    if (actionName === \"changeChronicleMap\") {\n      \n      this.props.dispatch(changeCurrentTimeStamp(this.timeScale(e.progress)));\n\n    }\n  }\n\n  handleStepEnter(e){\n    // console.log(e.index);\n    // console.log(e);\n    // console.log(e.index);\n    let { windowHeight } = this.props;\n    let actionName = e.element.dataset.actionName;\n    console.log(actionName, \"enter\");\n    \n    if (!_.isUndefined(actionName)){\n\n      switch(actionName) {\n        case \"changeIntro\": \n          this.props.dispatch(changeIntro({\n            zoom: this.introZoomLevelScale(windowHeight)\n          }));\n          break;\n        case \"changeEmptyMap\":\n          this.props.dispatch(changeEmptyMap({\n            zoom: this.introZoomLevelScale(windowHeight)\n          }));\n          break;\n        case \"changeChronicleMap\":\n          this.props.dispatch(changeChronicleMap({\n            zoom: this.timelineZoomLevelScale(windowHeight)\n          }));\n          break;\n        case \"wrapupChronicleMap\":\n          this.props.dispatch(wrapupChronicleMap());\n          break;\n        case \"changeInterestingPOIs\":\n          \n          let poi = _.find(interestingPOIs, iPoi => {\n            return iPoi.op === e.element.dataset.poiId;\n          });\n          \n          this.props.dispatch(changeCurrentFeature(poi));\n          break;\n        case \"initGraphScene\":\n          this.props.dispatch(initGraphScene({\n            zoom: this.timelineZoomLevelScale(windowHeight)\n          }));\n          break;\n        case \"changeGraphKorean\":\n          this.props.dispatch(changeGraphKorean({\n            zoom: this.timelineZoomLevelScale(windowHeight)\n          }));\n          break;\n        case 'initWorldMap':\n          this.props.dispatch(initWorldMap({\n            zoom: this.worldMapZoomLevelScale(windowHeight)\n          }));\n          break;\n        case 'changeWorldMapHeavyContributor':\n          this.props.dispatch(changeWorldMapHeavyContributor());\n          break;\n        case 'changeWorldMapHeaviestContributor':\n          this.props.dispatch(changeWorldMapHeaviestContributor());\n          break;\n        case 'initTextVisualization':\n          this.props.dispatch(changeTextVisualization(true));\n          this.props.dispatch(removeAllTextCategories());\n          break;\n        case 'changeTextVisualizationWhy':\n          // this.props.dispatch(change)\n          this.props.dispatch(removeAllTextCategories());\n          this.props.dispatch(addTextCategorySelected(1, {id: 1 }));\n          this.props.dispatch(addTextCategorySelected(3, {id: 3 }));\n          this.props.dispatch(addTextCategorySelected(13, {id: 13 }));\n          break;\n        case 'changeTextVisualizationHow':\n          this.props.dispatch(removeAllTextCategories());\n          this.props.dispatch(addTextCategorySelected(7, {id: 7 }));\n          this.props.dispatch(addTextCategorySelected(8, {id: 8 }));\n          this.props.dispatch(addTextCategorySelected(9, {id: 9 }));\n          \n          break;\n        \n        case 'changeTextVisualizationStory':\n\n          this.props.dispatch(removeAllTextCategories());\n          this.props.dispatch(addTextCategorySelected(4, {id: 4 }));\n          this.props.dispatch(addTextCategorySelected(11, {id: 11 }));\n          this.props.dispatch(addTextCategorySelected(15, {id: 15 }));\n\n          break;\n\n        case 'final':\n          this.props.dispatch(changeTextVisualization(false));\n          break;\n        default: \n          break;\n      }\n\n      \n    }\n    \n  }\n\n  handleStepExit(e){\n    // console.log(e.index);\n// console.log(e);\n    let {windowHeight} = this.props;\n\n    let actionName = e.element.dataset.actionName;\n    // console.log(actionName, \"exit\", e.direction);\n    console.log(actionName, \"exit\");\n    if (!_.isUndefined(actionName)) {\n\n      switch (actionName) {\n     \n        case \"changeGraphKorean\":\n          if (e.direction === \"up\") {\n            this.props.dispatch(initGraphScene({\n              zoom: this.timelineZoomLevelScale(windowHeight)\n            }));\n          }\n          break;\n        case 'initWorldMap': \n          if (e.direction === \"up\") {\n            this.props.dispatch(changeGraphKorean({\n              zoom: this.timelineZoomLevelScale(windowHeight)\n            }));\n          }\n          break;\n        case 'initTextVisualization':\n          if (e.direction === \"up\") {\n\n            this.props.dispatch(changeTextVisualization(false));\n          }\n          \n          break;\n         case 'changeTextVisualizationWhy':\n          if (e.direction === \"up\") {\n            this.props.dispatch(changeTextVisualization(true));\n            this.props.dispatch(removeAllTextCategories());\n          }\n          \n          break;\n        case 'changeTextVisualizationHow':\n          if (e.direction === \"up\") {\n            this.props.dispatch(changeTextVisualization(true));\n\n            this.props.dispatch(removeAllTextCategories());\n            this.props.dispatch(addTextCategorySelected(1, {id: 1 }));\n            this.props.dispatch(addTextCategorySelected(3, {id: 3 }));\n            this.props.dispatch(addTextCategorySelected(13, {id: 13 }));\n          }\n          \n          break;\n        case 'changeTextVisualizationStory':\n          if (e.direction === \"up\") {\n            \n          this.props.dispatch(removeAllTextCategories());\n          this.props.dispatch(addTextCategorySelected(7, {id: 7 }));\n          this.props.dispatch(addTextCategorySelected(8, {id: 8 }));\n          this.props.dispatch(addTextCategorySelected(9, {id: 9 }));\n          }\n          \n          break;\n        case 'final':\n          if (e.direction === \"up\") {\n            this.props.dispatch(changeTextVisualization(true));\n\n            this.props.dispatch(removeAllTextCategories());\n            this.props.dispatch(addTextCategorySelected(4, {id: 4 }));\n            this.props.dispatch(addTextCategorySelected(11, {id: 11 }));\n            this.props.dispatch(addTextCategorySelected(15, {id: 15 }));\n          }\n          \n          break;\n        default: \n          break;\n      }\n\n\n    }\n  }\n\n  render() {\n    let { currentFeature, selectedOsmUserResponse } = this.props;\n\n    return (\n      <Fragment>\n        <div className=\"scroll-container\">\n          <Intro />\n          <SectionFirst />\n          <SectionSecond />\n          <SectionOddPOIs />\n          <SectionThird />\n          <SectionFourth />\n          <SectionText /> \n          <SectionFifth />\n        </div>\n        <TimelineScroller />\n        <TitleHeader />\n        <CholoplethLegend />\n        {\n          !selectedOsmUserResponse ?\n          <TextVisualization /> : null\n        }\n        {\n          selectedOsmUserResponse ? \n          <SelectedResponseViewer /> : null\n        }\n        <MapContainer />\n      </Fragment>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    mapLoaded: state.mapLoaded,\n    windowWidth: state.windowWidth,\n    windowHeight: state.windowHeight,\n    selectedOsmUserResponse: !_.isNull(state.selectedOsmUserResponse)\n  }\n}\n\nexport default connect(mapStateToProps)(Home);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport styled from 'styled-components';\nimport mixins from '../stylesheets/mixins';\nimport { Gutter } from '../stylesheets/components';\n\n// const Fragment = React.Fragment;\n\nconst SubtitleKo = styled.div`\n  ${mixins.BOLD_TYPE}\n  font-size: 0.85em;\n`;\n\nconst H1 = styled.h1`\n  ${mixins.TITLE_TYPE}\n  font-size:2.5em;\n  line-height: 1.2;\n  margin: 10px 0;\n`;\n\nconst Container = styled.div`\n  max-width: 1200px;\n  display: flex;\n  justify-content: space-between;\n  padding: 60px;\n\n  div.column:first-child {\n    width: calc(60% - 50px);\n  }\n\n  div.column:last-child {\n    width: calc(40% - 50px);\n  }\n\n  p.name {\n    font-family: \"Caponi Display\";\n    font-weight: 700;\n  }\n\n  p.subtitle { \n    font-family: \"Roboto\";\n    font-weight: 700;\n    font-size:0.9em;\n    margin-bottom: 5px;\n  }\n\n  p.desc {\n    font-family: \"Caponi Display\";\n    font-weight: 400;    \n    line-height: 1.3;\n    font-size: 1.4em;\n  }\n`;\n\nconst AppLink = styled(Link)`\n  background-color: black;\n  color: white;\n  display: inline-block;\n  font-size: 1.3em;\n  font-family: \"Caponi Display\";\n  font-weight: 700;\n  line-height: 1.2;\n\n  padding: 13px 16px 8px;\n  border-radius: 5px;\n`;\n\n\nconst BackgroundContainer = styled.div`\n  background: url(./assets/back_project_page.png) no-repeat center bottom;\n  background-size: 81% auto;\n  background-position: right bottom;\n\n`;\n\n\nclass LandingPage extends Component {\n  render() {\n    return (\n      <BackgroundContainer>\n        <Container>\n          <div className=\"column\">\n\n            <SubtitleKo>\n              북한의 지도 제작자\n            </SubtitleKo>\n\n            <H1>\n              Cartographers <br />\n              of North Korea\n            </H1>\n\n            <p className=\"name\">\n              Wonyoung So\n            </p>\n          </div>\n          \n          <div className=\"column\" style={{fontSize: \"0.8em\"}}>\n            <Gutter h={30} />\n            6.894<br/>\n            Interactive Data Visualization\n            <br/><br/>\n            Massachusetts<br/>\n            Institute of<br/>\n            Technology\n          </div>\n        </Container>\n\n        <Gutter h={70} />\n\n        <Container>\n          <div className=\"column\">\n            <p className=\"subtitle\">\n              Abstract\n            </p>\n            <p className=\"desc\">\n              The focus of this project is to discuss the collaborative mapping strategies of contributors in uncharted territories, using North Korea as a case study. OpenStreetMap (OSM) enables “armchair mappers” to map territories such as North Korea in which the government has controlled internet access to its residents. Here, I ask the questions of who is mapping to North Korea, which tools and methods the contributors use to have access and represent North Korea, and which are the motivations behind such mapping endeavor. To do this, I analyze the technical aspects of OSM data in North Korea, and analyze the structured correspondence I exchanged with 889 contributors.\n            </p>\n          </div>\n          <div className=\"column\">\n            <AppLink to={process.env.PUBLIC_URL + '/viz'}>\n              Launch<br />\n              The Application\n            </AppLink>\n          </div>\n        </Container>\n\n        <Container>\n          <div className=\"column\">\n            <p className=\"subtitle\">\n              Video\n            </p>\n            \n            <iframe width=\"100%\" height=\"375\" src=\"https://www.youtube.com/embed/Zlb_6Ro5L3Q\" frameborder=\"0\"  allowFullscreen></iframe>\n          </div>\n          <div className=\"column\">\n\n            <p className=\"subtitle\">\n              Paper\n            </p>\n\n            <a href={`${process.env.PUBLIC_URL}/assets/wso-final-paper.pdf`}>\n              Wonyoung So. Cartographers of North Korea.\n            </a>\n          </div>\n        </Container>\n\n        <Container>\n          <div className=\"column\">\n            <p className=\"subtitle\">\n              License\n            </p>\n\n            <p>\n              OpenStreetMap data is under the Open Database License (ODbL) version 1.0 share-alike license for data. for aggregating the changeset data, I used the center point of each boundary. All the OSM contributors' screen name is changed for protecting individuals' privacy.\n            </p>\n          </div>\n        </Container>\n      </BackgroundContainer>\n    )\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    windowWidth: state.windowWidth,\n    windowHeight: state.windowHeight\n  }\n}\n\nexport default connect(mapStateToProps)(LandingPage);","import React, { Component } from 'react';\nimport { windowResize, changeDataLoaded, changeTrips, changeCurrentTime } from './actions';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport { BrowserRouter, Route, Link } from 'react-router-dom';\nimport Home from './pages/Home';\n// import SummaryPage from './pages/SummaryPage';\nimport LandingPage from './pages/LandingPage';\n\nconst Fragment = React.Fragment;\n\nclass App extends Component {\n  componentWillMount(){\n\n  }\n\n  componentDidMount(){\n\n    window.addEventListener('resize', this.resizeHandler.bind(this));\n    this.resizeHandler();\n  }\n\n\n\n\n  resizeHandler(e){\n    this.props.dispatch(windowResize({\n      width: window.innerWidth,\n      height: window.innerHeight\n    }));\n    \n  }\n\n\n  render() {\n\n    return (\n      <BrowserRouter>\n        <Fragment>\n          <Route path={process.env.PUBLIC_URL + '/'} component={Home} />\n        </Fragment>\n      </BrowserRouter>\n    );\n  }\n}\n\nlet mapStateToProps = state => {\n  return {\n    width: state.windowWidth,\n    height: state.windowHeight\n  }\n};\n\nexport default connect(mapStateToProps)(App);","import { createStore, combineReducers } from 'redux';\nimport mainReducer from './main';\n\nexport default createStore(mainReducer);\n","import { DEFAULT_STATE } from '../constants/defaults';\nimport _ from 'lodash';\n\nexport default function screenReducer(state = DEFAULT_STATE, action){\n  switch(action.type) {\n    case \"WINDOW_RESIZE\":\n      return {\n        ...state,\n        windowWidth: action.payload.windowWidth,\n        windowHeight: action.payload.windowHeight\n      }\n    case 'CHANGE_OSM_USER_HISTORIES_IDX':\n      return {\n        ...state,\n        osmUserHistoriesIdx: action.payload.osmUserHistoriesIdx\n      };  \n    case 'CHANGE_OSM_USER_HISTORIES':\n      return {\n        ...state,\n        osmUserHistories: action.payload.osmUserHistories\n      };    \n    case 'CHANGE_OSM_USER_RESPONSE_DATA':\n      return {\n        ...state,\n        osmUsers: action.payload.osmUsers,\n        responseCategories: action.payload.responseCategories\n      }\n    case 'ADD_TEXT_CATEGORY':\n      return {\n        ...state,\n        selectedTextCategory: {\n          ...state.selectedTextCategory,\n          [action.payload.id]: action.payload.textCategoryInfo\n        }\n      }\n    case \"REMOVE_ALL_TEXT_CATEGORIES\":\n      return {\n        ...state,\n        selectedTextCategory: {}\n      }\n    case 'REMOVE_TEXT_CATEGORY':\n      let selectedTextCategory = { ...state.selectedTextCategory };\n\n      delete selectedTextCategory[action.payload.id]\n      return {\n        ...state,\n        selectedTextCategory: selectedTextCategory\n      }\n    case 'CHANGE_TEXT_VISUALIZATION':\n      return {\n        ...state,\n        textVisualization: action.payload.textVisualization\n      }\n    case \"CHANGE_MAP_LOADED\":\n      return {\n        ...state,\n        mapLoaded: action.payload.mapLoaded\n      }\n    case 'CHANGE_INTRO': \n      return {\n        ...state,\n        nkTile: action.payload.nkTile,\n        titleHeader: action.payload.titleHeader,\n        zoom: action.payload.zoom,\n        center: action.payload.center,\n        currentFeature: action.payload.currentFeature\n      }\n    case 'CHANGE_EMPTY_MAP':\n      return {\n        ...state,\n        nkTile: action.payload.nkTile,\n        zoom: action.payload.zoom,\n        center: action.payload.center,\n        timelineUI: action.payload.timelineUI,\n        currentTimeStamp : action.payload.currentTimeStamp,\n        legend : action.payload.legend,\n        titleHeader: action.payload.titleHeader,\n        currentFeature: action.payload.currentFeature\n      };\n    case 'CHANGE_CHRONICLE_MAP':\n      return {\n        ...state,\n        nkTile: action.payload.nkTile,\n        zoom: action.payload.zoom,\n        center: action.payload.center,\n        currentFeature: action.payload.currentFeature,\n        timelineUI: action.payload.timelineUI,\n        legend: action.payload.legend,\n        titleHeader: action.payload.titleHeader\n      };\n    case 'CHANGE_SELECTED_OSM_USER_RESPONSE':\n      return {\n        ...state,\n        selectedOsmUserResponse: action.payload.selectedOsmUserResponse,\n        cholopleth: _.isNull(action.payload.selectedOsmUserResponse),\n        nkTile: !_.isNull(action.payload.selectedOsmUserResponse),\n        osmUserHistoriesIdx: _.isNull(action.payload.selectedOsmUserResponse) ? 0 : state.osmUserHistoriesIdx\n      };\n    case 'WRAPUP_CHRONICLE_MAP':\n      return {\n        ...state,\n        timelineUI: action.payload.timelineUI,\n        currentTimeStamp: action.payload.currentTimeStamp,\n        legend: action.payload.legend,\n        titleHeader: action.payload.titleHeader\n      }\n\n    case 'CHANGE_INTERESTING_POIS':\n      return {\n        ...state\n      };\n    case 'INIT_GRAPH_SCENE':\n      return {\n        ...state,\n        nkTile: action.payload.nkTile,\n        legend: action.payload.legend,\n        timelineUI: action.payload.timelineUI,\n        currentFeature: action.payload.currentFeature,\n        zoom: action.payload.zoom,\n        center: action.payload.center,\n        graphMode: action.payload.graphMode,\n        titleHeader: action.payload.titleHeader\n      };\n    case 'CHANGE_GRAPH_KOREAN':\n      return {\n        ...state,\n        nkTile: action.payload.nkTile,\n        graphMode: action.payload.graphMode,\n        zoom: action.payload.zoom,\n        center: action.payload.center,\n        cholopleth: action.payload.cholopleth,\n        titleHeader: action.payload.titleHeader\n      };\n    case 'INIT_WORLD_MAP':\n      return {\n        ...state,\n        nkTile: action.payload.nkTile,\n        zoom: action.payload.zoom,\n        center: action.payload.center,\n        currentFeature: action.payload.currentFeature,\n        cholopleth: action.payload.cholopleth,\n        choloplethMode: action.payload.choloplethMode, //top20, top5, individual\n        currentIndividual: action.payload.currentIndividual,\n        legend: action.payload.legend,\n        titleHeader: action.payload.titleHeader\n      };\n    case 'CHANGE_WORLD_MAP_HEAVY_CONTRIBUTOR':\n      return {\n        ...state,\n        nkTile: action.payload.nkTile,\n        cholopleth: action.payload.cholopleth,\n        currentFeature: action.payload.currentFeature,\n        choloplethMode: action.payload.choloplethMode, //top20, top5, individual\n        currentIndividual: action.payload.currentIndividual,\n        legend: action.payload.legend\n      };\n    case 'CHANGE_WORLD_MAP_HEAVIEST_CONTRIBUTOR':\n      return {\n        ...state,\n        nkTile: action.payload.nkTile,\n        cholopleth: action.payload.cholopleth,\n        currentFeature: action.payload.currentFeature,\n        choloplethMode: action.payload.choloplethMode, //top20, top5, individual\n        currentIndividual: action.payload.currentIndividual,\n        legend: action.payload.legend,\n        textVisualization: false\n      };\n    case 'CHANGE_WORLD_MAP_INDIVIDUAL':\n      return {\n        ...state,\n        nkTile: action.payload.nkTile,\n        currentFeature: action.payload.currentFeature,\n        currentIndividual: action.payload.currentIndividual        \n      }\n    case \"RESET\":\n      return {\n        ...state\n      }\n    case \"CHANGE_CURRENT_SEQ\":\n      return {\n        ...state,\n        currentSeq: action.payload.currentSeq\n      }\n    case \"CHANGE_CURRENT_TIMESTAMP\":\n      return {\n        ...state,\n        currentTimeStamp: action.payload.currentTimeStamp\n      }\n    case \"CHANGE_CURRENT_FEATURE\":\n      return {\n        ...state,\n        nkTile: true,\n        currentFeature: action.payload.currentFeature,\n        legend: true\n      }\n    default:\n      break;\n  }\n\n  return state;\n};","import React from 'react';\nimport { render } from 'react-dom';\nimport { Provider } from 'react-redux';\nimport App from './App';\nimport AppState from './reducers';\nimport \"./stylesheets/style.scss\";\n\nrender(\n  <Provider store={AppState}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);"],"sourceRoot":""}